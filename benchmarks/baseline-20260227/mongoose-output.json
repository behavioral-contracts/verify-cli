{
  "tool": "@behavioral-contracts/verify-cli",
  "tool_version": "0.1.0",
  "corpus_version": "1.0.0",
  "timestamp": "2026-02-27T17:57:48.200Z",
  "git_commit": "8c03361a54e844ad89279ddada158a14f88fd37c",
  "git_branch": "main",
  "tsconfig": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/tsconfig.json",
  "packages_analyzed": [
    "zod",
    "winston",
    "uuid",
    "undici",
    "typescript",
    "typeorm",
    "twilio",
    "tedious",
    "square",
    "stripe",
    "superagent",
    "socket.io-client",
    "sqlite3",
    "sinon",
    "socket.io",
    "sharp",
    "sequelize",
    "request-promise",
    "redis",
    "puppeteer",
    "react-hook-form",
    "pg",
    "openai",
    "passport",
    "node-fetch",
    "nodemailer",
    "next",
    "mysql2",
    "multer",
    "mongoose",
    "mongodb",
    "moment",
    "mocha",
    "luxon",
    "knex",
    "joi",
    "ioredis",
    "graphql",
    "got",
    "firebase-admin",
    "fastify",
    "express",
    "ethers",
    "discord.js",
    "dayjs",
    "drizzle-orm",
    "cors",
    "date-fns",
    "cloudinary",
    "chai",
    "bullmq",
    "cassandra-driver",
    "bcryptjs",
    "axios",
    "@tanstack/react-query",
    "@vercel/postgres",
    "@supabase/supabase-js",
    "@prisma/client",
    "@sendgrid/mail",
    "@nestjs/common",
    "@slack/web-api",
    "@octokit/rest",
    "@hapi/hapi",
    "@anthropic-ai/sdk",
    "@clerk/nextjs",
    "@aws-sdk/client-s3"
  ],
  "contracts_applied": 363,
  "files_analyzed": 3,
  "violations": [
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 74,
      "column": 3,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'saveDocumentMissing' contains unprotected await expression. await user.save()... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 70,
        "endLine": 78,
        "lines": [
          {
            "line": 70,
            "content": "",
            "highlighted": false
          },
          {
            "line": 71,
            "content": "async function saveDocumentMissing(email: string, name: string, age: number) {",
            "highlighted": false
          },
          {
            "line": 72,
            "content": "  const user = new User({ email, name, age });",
            "highlighted": false
          },
          {
            "line": 73,
            "content": "  // ❌ No try-catch - will crash on validation error or duplicate key",
            "highlighted": false
          },
          {
            "line": 74,
            "content": "  await user.save();",
            "highlighted": true
          },
          {
            "line": 75,
            "content": "  return user;",
            "highlighted": false
          },
          {
            "line": 76,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 77,
            "content": "",
            "highlighted": false
          },
          {
            "line": 78,
            "content": "async function validateDocumentMissing(data: Partial<IUser>) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 81,
      "column": 3,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'validateDocumentMissing' contains unprotected await expression. await user.validate()... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 77,
        "endLine": 85,
        "lines": [
          {
            "line": 77,
            "content": "",
            "highlighted": false
          },
          {
            "line": 78,
            "content": "async function validateDocumentMissing(data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 79,
            "content": "  const user = new User(data);",
            "highlighted": false
          },
          {
            "line": 80,
            "content": "  // ❌ No try-catch - will crash on validation error",
            "highlighted": false
          },
          {
            "line": 81,
            "content": "  await user.validate();",
            "highlighted": true
          },
          {
            "line": 82,
            "content": "  return true;",
            "highlighted": false
          },
          {
            "line": 83,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 84,
            "content": "",
            "highlighted": false
          },
          {
            "line": 85,
            "content": "async function deleteDocumentMissing(id: string) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 87,
      "column": 16,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'deleteDocumentMissing' contains unprotected await expression. await User.findById(id)... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 83,
        "endLine": 91,
        "lines": [
          {
            "line": 83,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 84,
            "content": "",
            "highlighted": false
          },
          {
            "line": 85,
            "content": "async function deleteDocumentMissing(id: string) {",
            "highlighted": false
          },
          {
            "line": 86,
            "content": "  // ❌ No try-catch on findById",
            "highlighted": false
          },
          {
            "line": 87,
            "content": "  const user = await User.findById(id);",
            "highlighted": true
          },
          {
            "line": 88,
            "content": "  if (user) {",
            "highlighted": false
          },
          {
            "line": 89,
            "content": "    // ❌ No try-catch on deleteOne",
            "highlighted": false
          },
          {
            "line": 90,
            "content": "    await user.deleteOne();",
            "highlighted": false
          },
          {
            "line": 91,
            "content": "  }",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 90,
      "column": 5,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'deleteDocumentMissing' contains unprotected await expression. await user.deleteOne()... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 86,
        "endLine": 94,
        "lines": [
          {
            "line": 86,
            "content": "  // ❌ No try-catch on findById",
            "highlighted": false
          },
          {
            "line": 87,
            "content": "  const user = await User.findById(id);",
            "highlighted": false
          },
          {
            "line": 88,
            "content": "  if (user) {",
            "highlighted": false
          },
          {
            "line": 89,
            "content": "    // ❌ No try-catch on deleteOne",
            "highlighted": false
          },
          {
            "line": 90,
            "content": "    await user.deleteOne();",
            "highlighted": true
          },
          {
            "line": 91,
            "content": "  }",
            "highlighted": false
          },
          {
            "line": 92,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 93,
            "content": "",
            "highlighted": false
          },
          {
            "line": 94,
            "content": "// NOTE: Document.remove() was deprecated in mongoose >= 7.x",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 101,
      "column": 16,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'createAndUpdateMissing' contains unprotected await expression. await User.create({ email, name: 'Test', age: 25 }... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 97,
        "endLine": 105,
        "lines": [
          {
            "line": 97,
            "content": "// ❌ Multiple Document Operations in Sequence",
            "highlighted": false
          },
          {
            "line": 98,
            "content": "",
            "highlighted": false
          },
          {
            "line": 99,
            "content": "async function createAndUpdateMissing(email: string) {",
            "highlighted": false
          },
          {
            "line": 100,
            "content": "  // ❌ No try-catch on create",
            "highlighted": false
          },
          {
            "line": 101,
            "content": "  const user = await User.create({ email, name: 'Test', age: 25 });",
            "highlighted": true
          },
          {
            "line": 102,
            "content": "",
            "highlighted": false
          },
          {
            "line": 103,
            "content": "  // Modify the document",
            "highlighted": false
          },
          {
            "line": 104,
            "content": "  user.name = 'Updated';",
            "highlighted": false
          },
          {
            "line": 105,
            "content": "",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 107,
      "column": 3,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'createAndUpdateMissing' contains unprotected await expression. await user.save()... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 103,
        "endLine": 111,
        "lines": [
          {
            "line": 103,
            "content": "  // Modify the document",
            "highlighted": false
          },
          {
            "line": 104,
            "content": "  user.name = 'Updated';",
            "highlighted": false
          },
          {
            "line": 105,
            "content": "",
            "highlighted": false
          },
          {
            "line": 106,
            "content": "  // ❌ No try-catch on save",
            "highlighted": false
          },
          {
            "line": 107,
            "content": "  await user.save();",
            "highlighted": true
          },
          {
            "line": 108,
            "content": "",
            "highlighted": false
          },
          {
            "line": 109,
            "content": "  return user;",
            "highlighted": false
          },
          {
            "line": 110,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 111,
            "content": "",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 114,
      "column": 16,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'findAndModifyMissing' contains unprotected await expression. await User.findById(id)... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 110,
        "endLine": 118,
        "lines": [
          {
            "line": 110,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 111,
            "content": "",
            "highlighted": false
          },
          {
            "line": 112,
            "content": "async function findAndModifyMissing(id: string) {",
            "highlighted": false
          },
          {
            "line": 113,
            "content": "  // ❌ No try-catch on findById",
            "highlighted": false
          },
          {
            "line": 114,
            "content": "  const user = await User.findById(id);",
            "highlighted": true
          },
          {
            "line": 115,
            "content": "",
            "highlighted": false
          },
          {
            "line": 116,
            "content": "  if (user) {",
            "highlighted": false
          },
          {
            "line": 117,
            "content": "    user.age = 30;",
            "highlighted": false
          },
          {
            "line": 118,
            "content": "    // ❌ No try-catch on save",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 119,
      "column": 5,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'findAndModifyMissing' contains unprotected await expression. await user.save()... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 115,
        "endLine": 123,
        "lines": [
          {
            "line": 115,
            "content": "",
            "highlighted": false
          },
          {
            "line": 116,
            "content": "  if (user) {",
            "highlighted": false
          },
          {
            "line": 117,
            "content": "    user.age = 30;",
            "highlighted": false
          },
          {
            "line": 118,
            "content": "    // ❌ No try-catch on save",
            "highlighted": false
          },
          {
            "line": 119,
            "content": "    await user.save();",
            "highlighted": true
          },
          {
            "line": 120,
            "content": "  }",
            "highlighted": false
          },
          {
            "line": 121,
            "content": "",
            "highlighted": false
          },
          {
            "line": 122,
            "content": "  return user;",
            "highlighted": false
          },
          {
            "line": 123,
            "content": "}",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 160,
      "column": 12,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'findById' contains unprotected await expression. await User.findById(id)... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 156,
        "endLine": 164,
        "lines": [
          {
            "line": 156,
            "content": "  // ❌ No try-catch in class methods",
            "highlighted": false
          },
          {
            "line": 157,
            "content": "",
            "highlighted": false
          },
          {
            "line": 158,
            "content": "  async findById(id: string) {",
            "highlighted": false
          },
          {
            "line": 159,
            "content": "    // ❌ No error handling",
            "highlighted": false
          },
          {
            "line": 160,
            "content": "    return await User.findById(id);",
            "highlighted": true
          },
          {
            "line": 161,
            "content": "  }",
            "highlighted": false
          },
          {
            "line": 162,
            "content": "",
            "highlighted": false
          },
          {
            "line": 163,
            "content": "  async create(data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 164,
            "content": "    // ❌ No error handling",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 166,
      "column": 5,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'create' contains unprotected await expression. await user.save()... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 162,
        "endLine": 170,
        "lines": [
          {
            "line": 162,
            "content": "",
            "highlighted": false
          },
          {
            "line": 163,
            "content": "  async create(data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 164,
            "content": "    // ❌ No error handling",
            "highlighted": false
          },
          {
            "line": 165,
            "content": "    const user = new User(data);",
            "highlighted": false
          },
          {
            "line": 166,
            "content": "    await user.save();",
            "highlighted": true
          },
          {
            "line": 167,
            "content": "    return user;",
            "highlighted": false
          },
          {
            "line": 168,
            "content": "  }",
            "highlighted": false
          },
          {
            "line": 169,
            "content": "",
            "highlighted": false
          },
          {
            "line": 170,
            "content": "  async update(id: string, data: Partial<IUser>) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 172,
      "column": 18,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'update' contains unprotected await expression. await User.findById(id)... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 168,
        "endLine": 176,
        "lines": [
          {
            "line": 168,
            "content": "  }",
            "highlighted": false
          },
          {
            "line": 169,
            "content": "",
            "highlighted": false
          },
          {
            "line": 170,
            "content": "  async update(id: string, data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 171,
            "content": "    // ❌ No error handling",
            "highlighted": false
          },
          {
            "line": 172,
            "content": "    const user = await User.findById(id);",
            "highlighted": true
          },
          {
            "line": 173,
            "content": "    if (user) {",
            "highlighted": false
          },
          {
            "line": 174,
            "content": "      Object.assign(user, data);",
            "highlighted": false
          },
          {
            "line": 175,
            "content": "      await user.save();",
            "highlighted": false
          },
          {
            "line": 176,
            "content": "    }",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 175,
      "column": 7,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'update' contains unprotected await expression. await user.save()... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 171,
        "endLine": 179,
        "lines": [
          {
            "line": 171,
            "content": "    // ❌ No error handling",
            "highlighted": false
          },
          {
            "line": 172,
            "content": "    const user = await User.findById(id);",
            "highlighted": false
          },
          {
            "line": 173,
            "content": "    if (user) {",
            "highlighted": false
          },
          {
            "line": 174,
            "content": "      Object.assign(user, data);",
            "highlighted": false
          },
          {
            "line": 175,
            "content": "      await user.save();",
            "highlighted": true
          },
          {
            "line": 176,
            "content": "    }",
            "highlighted": false
          },
          {
            "line": 177,
            "content": "    return user;",
            "highlighted": false
          },
          {
            "line": 178,
            "content": "  }",
            "highlighted": false
          },
          {
            "line": 179,
            "content": "",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 182,
      "column": 18,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'delete' contains unprotected await expression. await User.findById(id)... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 178,
        "endLine": 186,
        "lines": [
          {
            "line": 178,
            "content": "  }",
            "highlighted": false
          },
          {
            "line": 179,
            "content": "",
            "highlighted": false
          },
          {
            "line": 180,
            "content": "  async delete(id: string) {",
            "highlighted": false
          },
          {
            "line": 181,
            "content": "    // ❌ No error handling",
            "highlighted": false
          },
          {
            "line": 182,
            "content": "    const user = await User.findById(id);",
            "highlighted": true
          },
          {
            "line": 183,
            "content": "    if (user) {",
            "highlighted": false
          },
          {
            "line": 184,
            "content": "      await user.deleteOne();",
            "highlighted": false
          },
          {
            "line": 185,
            "content": "    }",
            "highlighted": false
          },
          {
            "line": 186,
            "content": "  }",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 184,
      "column": 7,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'delete' contains unprotected await expression. await user.deleteOne()... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 180,
        "endLine": 188,
        "lines": [
          {
            "line": 180,
            "content": "  async delete(id: string) {",
            "highlighted": false
          },
          {
            "line": 181,
            "content": "    // ❌ No error handling",
            "highlighted": false
          },
          {
            "line": 182,
            "content": "    const user = await User.findById(id);",
            "highlighted": false
          },
          {
            "line": 183,
            "content": "    if (user) {",
            "highlighted": false
          },
          {
            "line": 184,
            "content": "      await user.deleteOne();",
            "highlighted": true
          },
          {
            "line": 185,
            "content": "    }",
            "highlighted": false
          },
          {
            "line": 186,
            "content": "  }",
            "highlighted": false
          },
          {
            "line": 187,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 188,
            "content": "",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 245,
      "column": 16,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'middlewareHandlerMissing' contains unprotected await expression. await User.findById(id)... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 241,
        "endLine": 249,
        "lines": [
          {
            "line": 241,
            "content": "async function middlewareHandlerMissing(req: any, res: any) {",
            "highlighted": false
          },
          {
            "line": 242,
            "content": "  const { id } = req.params;",
            "highlighted": false
          },
          {
            "line": 243,
            "content": "",
            "highlighted": false
          },
          {
            "line": 244,
            "content": "  // ❌ No try-catch - will crash the server",
            "highlighted": false
          },
          {
            "line": 245,
            "content": "  const user = await User.findById(id);",
            "highlighted": true
          },
          {
            "line": 246,
            "content": "",
            "highlighted": false
          },
          {
            "line": 247,
            "content": "  res.json(user);",
            "highlighted": false
          },
          {
            "line": 248,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 249,
            "content": "",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 254,
      "column": 16,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'createUserHandlerMissing' contains unprotected await expression. await User.create(data)... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 250,
        "endLine": 258,
        "lines": [
          {
            "line": 250,
            "content": "async function createUserHandlerMissing(req: any, res: any) {",
            "highlighted": false
          },
          {
            "line": 251,
            "content": "  const data = req.body;",
            "highlighted": false
          },
          {
            "line": 252,
            "content": "",
            "highlighted": false
          },
          {
            "line": 253,
            "content": "  // ❌ No try-catch",
            "highlighted": false
          },
          {
            "line": 254,
            "content": "  const user = await User.create(data);",
            "highlighted": true
          },
          {
            "line": 255,
            "content": "",
            "highlighted": false
          },
          {
            "line": 256,
            "content": "  res.json(user);",
            "highlighted": false
          },
          {
            "line": 257,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 258,
            "content": "",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 290,
      "column": 16,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'complexOperationMissing' contains unprotected await expression. await User.findById(userId)... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 286,
        "endLine": 294,
        "lines": [
          {
            "line": 286,
            "content": "// ❌ Complex Patterns WITHOUT Try-Catch",
            "highlighted": false
          },
          {
            "line": 287,
            "content": "",
            "highlighted": false
          },
          {
            "line": 288,
            "content": "async function complexOperationMissing(userId: string) {",
            "highlighted": false
          },
          {
            "line": 289,
            "content": "  // ❌ No try-catch on first operation",
            "highlighted": false
          },
          {
            "line": 290,
            "content": "  const user = await User.findById(userId);",
            "highlighted": true
          },
          {
            "line": 291,
            "content": "",
            "highlighted": false
          },
          {
            "line": 292,
            "content": "  if (user) {",
            "highlighted": false
          },
          {
            "line": 293,
            "content": "    user.active = false;",
            "highlighted": false
          },
          {
            "line": 294,
            "content": "    // ❌ No try-catch on save",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 295,
      "column": 5,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'complexOperationMissing' contains unprotected await expression. await user.save()... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 291,
        "endLine": 299,
        "lines": [
          {
            "line": 291,
            "content": "",
            "highlighted": false
          },
          {
            "line": 292,
            "content": "  if (user) {",
            "highlighted": false
          },
          {
            "line": 293,
            "content": "    user.active = false;",
            "highlighted": false
          },
          {
            "line": 294,
            "content": "    // ❌ No try-catch on save",
            "highlighted": false
          },
          {
            "line": 295,
            "content": "    await user.save();",
            "highlighted": true
          },
          {
            "line": 296,
            "content": "",
            "highlighted": false
          },
          {
            "line": 297,
            "content": "    // ❌ No try-catch on countDocuments",
            "highlighted": false
          },
          {
            "line": 298,
            "content": "    const inactiveCount = await User.countDocuments({ active: false });",
            "highlighted": false
          },
          {
            "line": 299,
            "content": "",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 298,
      "column": 27,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'complexOperationMissing' contains unprotected await expression. await User.countDocuments({ active: false })... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 294,
        "endLine": 302,
        "lines": [
          {
            "line": 294,
            "content": "    // ❌ No try-catch on save",
            "highlighted": false
          },
          {
            "line": 295,
            "content": "    await user.save();",
            "highlighted": false
          },
          {
            "line": 296,
            "content": "",
            "highlighted": false
          },
          {
            "line": 297,
            "content": "    // ❌ No try-catch on countDocuments",
            "highlighted": false
          },
          {
            "line": 298,
            "content": "    const inactiveCount = await User.countDocuments({ active: false });",
            "highlighted": true
          },
          {
            "line": 299,
            "content": "",
            "highlighted": false
          },
          {
            "line": 300,
            "content": "    return { user, inactiveCount };",
            "highlighted": false
          },
          {
            "line": 301,
            "content": "  }",
            "highlighted": false
          },
          {
            "line": 302,
            "content": "",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-cast-error-no-try-catch-invalid-id",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 87,
      "column": 22,
      "package": "mongoose",
      "function": "findById",
      "contract_clause": "cast-error-no-try-catch-invalid-id",
      "description": "No try-catch block found. CastError with kind: 'ObjectId' - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-findById",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Common when user input is passed directly as ID. Validate ID format before querying.\n",
      "code_snippet": {
        "startLine": 83,
        "endLine": 91,
        "lines": [
          {
            "line": 83,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 84,
            "content": "",
            "highlighted": false
          },
          {
            "line": 85,
            "content": "async function deleteDocumentMissing(id: string) {",
            "highlighted": false
          },
          {
            "line": 86,
            "content": "  // ❌ No try-catch on findById",
            "highlighted": false
          },
          {
            "line": 87,
            "content": "  const user = await User.findById(id);",
            "highlighted": true
          },
          {
            "line": 88,
            "content": "  if (user) {",
            "highlighted": false
          },
          {
            "line": 89,
            "content": "    // ❌ No try-catch on deleteOne",
            "highlighted": false
          },
          {
            "line": 90,
            "content": "    await user.deleteOne();",
            "highlighted": false
          },
          {
            "line": 91,
            "content": "  }",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 87,
      "column": 22,
      "package": "mongoose",
      "function": "findById",
      "contract_clause": "connection-error-no-try-catch",
      "description": "No try-catch block found. MongooseError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST handle connection errors",
      "code_snippet": {
        "startLine": 83,
        "endLine": 91,
        "lines": [
          {
            "line": 83,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 84,
            "content": "",
            "highlighted": false
          },
          {
            "line": 85,
            "content": "async function deleteDocumentMissing(id: string) {",
            "highlighted": false
          },
          {
            "line": 86,
            "content": "  // ❌ No try-catch on findById",
            "highlighted": false
          },
          {
            "line": 87,
            "content": "  const user = await User.findById(id);",
            "highlighted": true
          },
          {
            "line": 88,
            "content": "  if (user) {",
            "highlighted": false
          },
          {
            "line": 89,
            "content": "    // ❌ No try-catch on deleteOne",
            "highlighted": false
          },
          {
            "line": 90,
            "content": "    await user.deleteOne();",
            "highlighted": false
          },
          {
            "line": 91,
            "content": "  }",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-validation-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 101,
      "column": 22,
      "package": "mongoose",
      "function": "create",
      "contract_clause": "validation-error-no-try-catch",
      "description": "No try-catch block found. ValidationError with errors object containing field-specific ValidatorErrors - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/validation.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Check error.name === 'ValidationError' and inspect error.errors object. Each field error is accessible via error.errors[fieldName].\n",
      "code_snippet": {
        "startLine": 97,
        "endLine": 105,
        "lines": [
          {
            "line": 97,
            "content": "// ❌ Multiple Document Operations in Sequence",
            "highlighted": false
          },
          {
            "line": 98,
            "content": "",
            "highlighted": false
          },
          {
            "line": 99,
            "content": "async function createAndUpdateMissing(email: string) {",
            "highlighted": false
          },
          {
            "line": 100,
            "content": "  // ❌ No try-catch on create",
            "highlighted": false
          },
          {
            "line": 101,
            "content": "  const user = await User.create({ email, name: 'Test', age: 25 });",
            "highlighted": true
          },
          {
            "line": 102,
            "content": "",
            "highlighted": false
          },
          {
            "line": 103,
            "content": "  // Modify the document",
            "highlighted": false
          },
          {
            "line": 104,
            "content": "  user.name = 'Updated';",
            "highlighted": false
          },
          {
            "line": 105,
            "content": "",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-duplicate-key-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 101,
      "column": 22,
      "package": "mongoose",
      "function": "create",
      "contract_clause": "duplicate-key-error-no-try-catch",
      "description": "No try-catch block found. MongoError with code: 11000 - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/validation.html#unique-indexes",
      "suggested_fix": "Caller MUST wrap in try-catch and check error.code === 11000. This is NOT a ValidationError - it comes from MongoDB driver. Extract duplicate field from error message or error.keyPattern.\n",
      "code_snippet": {
        "startLine": 97,
        "endLine": 105,
        "lines": [
          {
            "line": 97,
            "content": "// ❌ Multiple Document Operations in Sequence",
            "highlighted": false
          },
          {
            "line": 98,
            "content": "",
            "highlighted": false
          },
          {
            "line": 99,
            "content": "async function createAndUpdateMissing(email: string) {",
            "highlighted": false
          },
          {
            "line": 100,
            "content": "  // ❌ No try-catch on create",
            "highlighted": false
          },
          {
            "line": 101,
            "content": "  const user = await User.create({ email, name: 'Test', age: 25 });",
            "highlighted": true
          },
          {
            "line": 102,
            "content": "",
            "highlighted": false
          },
          {
            "line": 103,
            "content": "  // Modify the document",
            "highlighted": false
          },
          {
            "line": 104,
            "content": "  user.name = 'Updated';",
            "highlighted": false
          },
          {
            "line": 105,
            "content": "",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 101,
      "column": 22,
      "package": "mongoose",
      "function": "create",
      "contract_clause": "connection-error-no-try-catch",
      "description": "No try-catch block found. MongooseError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST handle connection errors with retry logic",
      "code_snippet": {
        "startLine": 97,
        "endLine": 105,
        "lines": [
          {
            "line": 97,
            "content": "// ❌ Multiple Document Operations in Sequence",
            "highlighted": false
          },
          {
            "line": 98,
            "content": "",
            "highlighted": false
          },
          {
            "line": 99,
            "content": "async function createAndUpdateMissing(email: string) {",
            "highlighted": false
          },
          {
            "line": 100,
            "content": "  // ❌ No try-catch on create",
            "highlighted": false
          },
          {
            "line": 101,
            "content": "  const user = await User.create({ email, name: 'Test', age: 25 });",
            "highlighted": true
          },
          {
            "line": 102,
            "content": "",
            "highlighted": false
          },
          {
            "line": 103,
            "content": "  // Modify the document",
            "highlighted": false
          },
          {
            "line": 104,
            "content": "  user.name = 'Updated';",
            "highlighted": false
          },
          {
            "line": 105,
            "content": "",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-cast-error-no-try-catch-invalid-id",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 114,
      "column": 22,
      "package": "mongoose",
      "function": "findById",
      "contract_clause": "cast-error-no-try-catch-invalid-id",
      "description": "No try-catch block found. CastError with kind: 'ObjectId' - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-findById",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Common when user input is passed directly as ID. Validate ID format before querying.\n",
      "code_snippet": {
        "startLine": 110,
        "endLine": 118,
        "lines": [
          {
            "line": 110,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 111,
            "content": "",
            "highlighted": false
          },
          {
            "line": 112,
            "content": "async function findAndModifyMissing(id: string) {",
            "highlighted": false
          },
          {
            "line": 113,
            "content": "  // ❌ No try-catch on findById",
            "highlighted": false
          },
          {
            "line": 114,
            "content": "  const user = await User.findById(id);",
            "highlighted": true
          },
          {
            "line": 115,
            "content": "",
            "highlighted": false
          },
          {
            "line": 116,
            "content": "  if (user) {",
            "highlighted": false
          },
          {
            "line": 117,
            "content": "    user.age = 30;",
            "highlighted": false
          },
          {
            "line": 118,
            "content": "    // ❌ No try-catch on save",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 114,
      "column": 22,
      "package": "mongoose",
      "function": "findById",
      "contract_clause": "connection-error-no-try-catch",
      "description": "No try-catch block found. MongooseError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST handle connection errors",
      "code_snippet": {
        "startLine": 110,
        "endLine": 118,
        "lines": [
          {
            "line": 110,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 111,
            "content": "",
            "highlighted": false
          },
          {
            "line": 112,
            "content": "async function findAndModifyMissing(id: string) {",
            "highlighted": false
          },
          {
            "line": 113,
            "content": "  // ❌ No try-catch on findById",
            "highlighted": false
          },
          {
            "line": 114,
            "content": "  const user = await User.findById(id);",
            "highlighted": true
          },
          {
            "line": 115,
            "content": "",
            "highlighted": false
          },
          {
            "line": 116,
            "content": "  if (user) {",
            "highlighted": false
          },
          {
            "line": 117,
            "content": "    user.age = 30;",
            "highlighted": false
          },
          {
            "line": 118,
            "content": "    // ❌ No try-catch on save",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-cast-error-no-try-catch-invalid-id",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 160,
      "column": 18,
      "package": "mongoose",
      "function": "findById",
      "contract_clause": "cast-error-no-try-catch-invalid-id",
      "description": "No try-catch block found. CastError with kind: 'ObjectId' - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-findById",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Common when user input is passed directly as ID. Validate ID format before querying.\n",
      "code_snippet": {
        "startLine": 156,
        "endLine": 164,
        "lines": [
          {
            "line": 156,
            "content": "  // ❌ No try-catch in class methods",
            "highlighted": false
          },
          {
            "line": 157,
            "content": "",
            "highlighted": false
          },
          {
            "line": 158,
            "content": "  async findById(id: string) {",
            "highlighted": false
          },
          {
            "line": 159,
            "content": "    // ❌ No error handling",
            "highlighted": false
          },
          {
            "line": 160,
            "content": "    return await User.findById(id);",
            "highlighted": true
          },
          {
            "line": 161,
            "content": "  }",
            "highlighted": false
          },
          {
            "line": 162,
            "content": "",
            "highlighted": false
          },
          {
            "line": 163,
            "content": "  async create(data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 164,
            "content": "    // ❌ No error handling",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 160,
      "column": 18,
      "package": "mongoose",
      "function": "findById",
      "contract_clause": "connection-error-no-try-catch",
      "description": "No try-catch block found. MongooseError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST handle connection errors",
      "code_snippet": {
        "startLine": 156,
        "endLine": 164,
        "lines": [
          {
            "line": 156,
            "content": "  // ❌ No try-catch in class methods",
            "highlighted": false
          },
          {
            "line": 157,
            "content": "",
            "highlighted": false
          },
          {
            "line": 158,
            "content": "  async findById(id: string) {",
            "highlighted": false
          },
          {
            "line": 159,
            "content": "    // ❌ No error handling",
            "highlighted": false
          },
          {
            "line": 160,
            "content": "    return await User.findById(id);",
            "highlighted": true
          },
          {
            "line": 161,
            "content": "  }",
            "highlighted": false
          },
          {
            "line": 162,
            "content": "",
            "highlighted": false
          },
          {
            "line": 163,
            "content": "  async create(data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 164,
            "content": "    // ❌ No error handling",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-cast-error-no-try-catch-invalid-id",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 172,
      "column": 24,
      "package": "mongoose",
      "function": "findById",
      "contract_clause": "cast-error-no-try-catch-invalid-id",
      "description": "No try-catch block found. CastError with kind: 'ObjectId' - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-findById",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Common when user input is passed directly as ID. Validate ID format before querying.\n",
      "code_snippet": {
        "startLine": 168,
        "endLine": 176,
        "lines": [
          {
            "line": 168,
            "content": "  }",
            "highlighted": false
          },
          {
            "line": 169,
            "content": "",
            "highlighted": false
          },
          {
            "line": 170,
            "content": "  async update(id: string, data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 171,
            "content": "    // ❌ No error handling",
            "highlighted": false
          },
          {
            "line": 172,
            "content": "    const user = await User.findById(id);",
            "highlighted": true
          },
          {
            "line": 173,
            "content": "    if (user) {",
            "highlighted": false
          },
          {
            "line": 174,
            "content": "      Object.assign(user, data);",
            "highlighted": false
          },
          {
            "line": 175,
            "content": "      await user.save();",
            "highlighted": false
          },
          {
            "line": 176,
            "content": "    }",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 172,
      "column": 24,
      "package": "mongoose",
      "function": "findById",
      "contract_clause": "connection-error-no-try-catch",
      "description": "No try-catch block found. MongooseError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST handle connection errors",
      "code_snippet": {
        "startLine": 168,
        "endLine": 176,
        "lines": [
          {
            "line": 168,
            "content": "  }",
            "highlighted": false
          },
          {
            "line": 169,
            "content": "",
            "highlighted": false
          },
          {
            "line": 170,
            "content": "  async update(id: string, data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 171,
            "content": "    // ❌ No error handling",
            "highlighted": false
          },
          {
            "line": 172,
            "content": "    const user = await User.findById(id);",
            "highlighted": true
          },
          {
            "line": 173,
            "content": "    if (user) {",
            "highlighted": false
          },
          {
            "line": 174,
            "content": "      Object.assign(user, data);",
            "highlighted": false
          },
          {
            "line": 175,
            "content": "      await user.save();",
            "highlighted": false
          },
          {
            "line": 176,
            "content": "    }",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-cast-error-no-try-catch-invalid-id",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 182,
      "column": 24,
      "package": "mongoose",
      "function": "findById",
      "contract_clause": "cast-error-no-try-catch-invalid-id",
      "description": "No try-catch block found. CastError with kind: 'ObjectId' - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-findById",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Common when user input is passed directly as ID. Validate ID format before querying.\n",
      "code_snippet": {
        "startLine": 178,
        "endLine": 186,
        "lines": [
          {
            "line": 178,
            "content": "  }",
            "highlighted": false
          },
          {
            "line": 179,
            "content": "",
            "highlighted": false
          },
          {
            "line": 180,
            "content": "  async delete(id: string) {",
            "highlighted": false
          },
          {
            "line": 181,
            "content": "    // ❌ No error handling",
            "highlighted": false
          },
          {
            "line": 182,
            "content": "    const user = await User.findById(id);",
            "highlighted": true
          },
          {
            "line": 183,
            "content": "    if (user) {",
            "highlighted": false
          },
          {
            "line": 184,
            "content": "      await user.deleteOne();",
            "highlighted": false
          },
          {
            "line": 185,
            "content": "    }",
            "highlighted": false
          },
          {
            "line": 186,
            "content": "  }",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 182,
      "column": 24,
      "package": "mongoose",
      "function": "findById",
      "contract_clause": "connection-error-no-try-catch",
      "description": "No try-catch block found. MongooseError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST handle connection errors",
      "code_snippet": {
        "startLine": 178,
        "endLine": 186,
        "lines": [
          {
            "line": 178,
            "content": "  }",
            "highlighted": false
          },
          {
            "line": 179,
            "content": "",
            "highlighted": false
          },
          {
            "line": 180,
            "content": "  async delete(id: string) {",
            "highlighted": false
          },
          {
            "line": 181,
            "content": "    // ❌ No error handling",
            "highlighted": false
          },
          {
            "line": 182,
            "content": "    const user = await User.findById(id);",
            "highlighted": true
          },
          {
            "line": 183,
            "content": "    if (user) {",
            "highlighted": false
          },
          {
            "line": 184,
            "content": "      await user.deleteOne();",
            "highlighted": false
          },
          {
            "line": 185,
            "content": "    }",
            "highlighted": false
          },
          {
            "line": 186,
            "content": "  }",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-cast-error-no-try-catch-invalid-id",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 245,
      "column": 22,
      "package": "mongoose",
      "function": "findById",
      "contract_clause": "cast-error-no-try-catch-invalid-id",
      "description": "No try-catch block found. CastError with kind: 'ObjectId' - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-findById",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Common when user input is passed directly as ID. Validate ID format before querying.\n",
      "code_snippet": {
        "startLine": 241,
        "endLine": 249,
        "lines": [
          {
            "line": 241,
            "content": "async function middlewareHandlerMissing(req: any, res: any) {",
            "highlighted": false
          },
          {
            "line": 242,
            "content": "  const { id } = req.params;",
            "highlighted": false
          },
          {
            "line": 243,
            "content": "",
            "highlighted": false
          },
          {
            "line": 244,
            "content": "  // ❌ No try-catch - will crash the server",
            "highlighted": false
          },
          {
            "line": 245,
            "content": "  const user = await User.findById(id);",
            "highlighted": true
          },
          {
            "line": 246,
            "content": "",
            "highlighted": false
          },
          {
            "line": 247,
            "content": "  res.json(user);",
            "highlighted": false
          },
          {
            "line": 248,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 249,
            "content": "",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 245,
      "column": 22,
      "package": "mongoose",
      "function": "findById",
      "contract_clause": "connection-error-no-try-catch",
      "description": "No try-catch block found. MongooseError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST handle connection errors",
      "code_snippet": {
        "startLine": 241,
        "endLine": 249,
        "lines": [
          {
            "line": 241,
            "content": "async function middlewareHandlerMissing(req: any, res: any) {",
            "highlighted": false
          },
          {
            "line": 242,
            "content": "  const { id } = req.params;",
            "highlighted": false
          },
          {
            "line": 243,
            "content": "",
            "highlighted": false
          },
          {
            "line": 244,
            "content": "  // ❌ No try-catch - will crash the server",
            "highlighted": false
          },
          {
            "line": 245,
            "content": "  const user = await User.findById(id);",
            "highlighted": true
          },
          {
            "line": 246,
            "content": "",
            "highlighted": false
          },
          {
            "line": 247,
            "content": "  res.json(user);",
            "highlighted": false
          },
          {
            "line": 248,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 249,
            "content": "",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-validation-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 254,
      "column": 22,
      "package": "mongoose",
      "function": "create",
      "contract_clause": "validation-error-no-try-catch",
      "description": "No try-catch block found. ValidationError with errors object containing field-specific ValidatorErrors - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/validation.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Check error.name === 'ValidationError' and inspect error.errors object. Each field error is accessible via error.errors[fieldName].\n",
      "code_snippet": {
        "startLine": 250,
        "endLine": 258,
        "lines": [
          {
            "line": 250,
            "content": "async function createUserHandlerMissing(req: any, res: any) {",
            "highlighted": false
          },
          {
            "line": 251,
            "content": "  const data = req.body;",
            "highlighted": false
          },
          {
            "line": 252,
            "content": "",
            "highlighted": false
          },
          {
            "line": 253,
            "content": "  // ❌ No try-catch",
            "highlighted": false
          },
          {
            "line": 254,
            "content": "  const user = await User.create(data);",
            "highlighted": true
          },
          {
            "line": 255,
            "content": "",
            "highlighted": false
          },
          {
            "line": 256,
            "content": "  res.json(user);",
            "highlighted": false
          },
          {
            "line": 257,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 258,
            "content": "",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-duplicate-key-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 254,
      "column": 22,
      "package": "mongoose",
      "function": "create",
      "contract_clause": "duplicate-key-error-no-try-catch",
      "description": "No try-catch block found. MongoError with code: 11000 - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/validation.html#unique-indexes",
      "suggested_fix": "Caller MUST wrap in try-catch and check error.code === 11000. This is NOT a ValidationError - it comes from MongoDB driver. Extract duplicate field from error message or error.keyPattern.\n",
      "code_snippet": {
        "startLine": 250,
        "endLine": 258,
        "lines": [
          {
            "line": 250,
            "content": "async function createUserHandlerMissing(req: any, res: any) {",
            "highlighted": false
          },
          {
            "line": 251,
            "content": "  const data = req.body;",
            "highlighted": false
          },
          {
            "line": 252,
            "content": "",
            "highlighted": false
          },
          {
            "line": 253,
            "content": "  // ❌ No try-catch",
            "highlighted": false
          },
          {
            "line": 254,
            "content": "  const user = await User.create(data);",
            "highlighted": true
          },
          {
            "line": 255,
            "content": "",
            "highlighted": false
          },
          {
            "line": 256,
            "content": "  res.json(user);",
            "highlighted": false
          },
          {
            "line": 257,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 258,
            "content": "",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 254,
      "column": 22,
      "package": "mongoose",
      "function": "create",
      "contract_clause": "connection-error-no-try-catch",
      "description": "No try-catch block found. MongooseError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST handle connection errors with retry logic",
      "code_snippet": {
        "startLine": 250,
        "endLine": 258,
        "lines": [
          {
            "line": 250,
            "content": "async function createUserHandlerMissing(req: any, res: any) {",
            "highlighted": false
          },
          {
            "line": 251,
            "content": "  const data = req.body;",
            "highlighted": false
          },
          {
            "line": 252,
            "content": "",
            "highlighted": false
          },
          {
            "line": 253,
            "content": "  // ❌ No try-catch",
            "highlighted": false
          },
          {
            "line": 254,
            "content": "  const user = await User.create(data);",
            "highlighted": true
          },
          {
            "line": 255,
            "content": "",
            "highlighted": false
          },
          {
            "line": 256,
            "content": "  res.json(user);",
            "highlighted": false
          },
          {
            "line": 257,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 258,
            "content": "",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-cast-error-no-try-catch-invalid-id",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 290,
      "column": 22,
      "package": "mongoose",
      "function": "findById",
      "contract_clause": "cast-error-no-try-catch-invalid-id",
      "description": "No try-catch block found. CastError with kind: 'ObjectId' - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-findById",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Common when user input is passed directly as ID. Validate ID format before querying.\n",
      "code_snippet": {
        "startLine": 286,
        "endLine": 294,
        "lines": [
          {
            "line": 286,
            "content": "// ❌ Complex Patterns WITHOUT Try-Catch",
            "highlighted": false
          },
          {
            "line": 287,
            "content": "",
            "highlighted": false
          },
          {
            "line": 288,
            "content": "async function complexOperationMissing(userId: string) {",
            "highlighted": false
          },
          {
            "line": 289,
            "content": "  // ❌ No try-catch on first operation",
            "highlighted": false
          },
          {
            "line": 290,
            "content": "  const user = await User.findById(userId);",
            "highlighted": true
          },
          {
            "line": 291,
            "content": "",
            "highlighted": false
          },
          {
            "line": 292,
            "content": "  if (user) {",
            "highlighted": false
          },
          {
            "line": 293,
            "content": "    user.active = false;",
            "highlighted": false
          },
          {
            "line": 294,
            "content": "    // ❌ No try-catch on save",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 290,
      "column": 22,
      "package": "mongoose",
      "function": "findById",
      "contract_clause": "connection-error-no-try-catch",
      "description": "No try-catch block found. MongooseError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST handle connection errors",
      "code_snippet": {
        "startLine": 286,
        "endLine": 294,
        "lines": [
          {
            "line": 286,
            "content": "// ❌ Complex Patterns WITHOUT Try-Catch",
            "highlighted": false
          },
          {
            "line": 287,
            "content": "",
            "highlighted": false
          },
          {
            "line": 288,
            "content": "async function complexOperationMissing(userId: string) {",
            "highlighted": false
          },
          {
            "line": 289,
            "content": "  // ❌ No try-catch on first operation",
            "highlighted": false
          },
          {
            "line": 290,
            "content": "  const user = await User.findById(userId);",
            "highlighted": true
          },
          {
            "line": 291,
            "content": "",
            "highlighted": false
          },
          {
            "line": 292,
            "content": "  if (user) {",
            "highlighted": false
          },
          {
            "line": 293,
            "content": "    user.active = false;",
            "highlighted": false
          },
          {
            "line": 294,
            "content": "    // ❌ No try-catch on save",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
      "line": 298,
      "column": 33,
      "package": "mongoose",
      "function": "countDocuments",
      "contract_clause": "connection-error-no-try-catch",
      "description": "No try-catch block found. MongooseError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-countDocuments",
      "suggested_fix": "Caller MUST wrap in try-catch",
      "code_snippet": {
        "startLine": 294,
        "endLine": 302,
        "lines": [
          {
            "line": 294,
            "content": "    // ❌ No try-catch on save",
            "highlighted": false
          },
          {
            "line": 295,
            "content": "    await user.save();",
            "highlighted": false
          },
          {
            "line": 296,
            "content": "",
            "highlighted": false
          },
          {
            "line": 297,
            "content": "    // ❌ No try-catch on countDocuments",
            "highlighted": false
          },
          {
            "line": 298,
            "content": "    const inactiveCount = await User.countDocuments({ active: false });",
            "highlighted": true
          },
          {
            "line": 299,
            "content": "",
            "highlighted": false
          },
          {
            "line": 300,
            "content": "    return { user, inactiveCount };",
            "highlighted": false
          },
          {
            "line": 301,
            "content": "  }",
            "highlighted": false
          },
          {
            "line": 302,
            "content": "",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 33,
      "column": 17,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'findAllUsersMissing' contains unprotected await expression. await User.find()... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 29,
        "endLine": 37,
        "lines": [
          {
            "line": 29,
            "content": "// ❌ Query Operations WITHOUT Try-Catch",
            "highlighted": false
          },
          {
            "line": 30,
            "content": "",
            "highlighted": false
          },
          {
            "line": 31,
            "content": "async function findAllUsersMissing() {",
            "highlighted": false
          },
          {
            "line": 32,
            "content": "  // ❌ No error handling - will crash if connection fails",
            "highlighted": false
          },
          {
            "line": 33,
            "content": "  const users = await User.find();",
            "highlighted": true
          },
          {
            "line": 34,
            "content": "  return users;",
            "highlighted": false
          },
          {
            "line": 35,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 36,
            "content": "",
            "highlighted": false
          },
          {
            "line": 37,
            "content": "async function findOneUserMissing(email: string) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 39,
      "column": 16,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'findOneUserMissing' contains unprotected await expression. await User.findOne({ email })... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 35,
        "endLine": 43,
        "lines": [
          {
            "line": 35,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 36,
            "content": "",
            "highlighted": false
          },
          {
            "line": 37,
            "content": "async function findOneUserMissing(email: string) {",
            "highlighted": false
          },
          {
            "line": 38,
            "content": "  // ❌ No error handling - will crash on query error",
            "highlighted": false
          },
          {
            "line": 39,
            "content": "  const user = await User.findOne({ email });",
            "highlighted": true
          },
          {
            "line": 40,
            "content": "  return user;",
            "highlighted": false
          },
          {
            "line": 41,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 42,
            "content": "",
            "highlighted": false
          },
          {
            "line": 43,
            "content": "async function findUserByIdMissing(id: string) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 45,
      "column": 16,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'findUserByIdMissing' contains unprotected await expression. await User.findById(id)... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 41,
        "endLine": 49,
        "lines": [
          {
            "line": 41,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 42,
            "content": "",
            "highlighted": false
          },
          {
            "line": 43,
            "content": "async function findUserByIdMissing(id: string) {",
            "highlighted": false
          },
          {
            "line": 44,
            "content": "  // ❌ No error handling - will crash on invalid ObjectId",
            "highlighted": false
          },
          {
            "line": 45,
            "content": "  const user = await User.findById(id);",
            "highlighted": true
          },
          {
            "line": 46,
            "content": "  return user;",
            "highlighted": false
          },
          {
            "line": 47,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 48,
            "content": "",
            "highlighted": false
          },
          {
            "line": 49,
            "content": "// ❌ Create Operations WITHOUT Try-Catch",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 53,
      "column": 16,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'createUserMissing' contains unprotected await expression. await User.create(data)... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 49,
        "endLine": 57,
        "lines": [
          {
            "line": 49,
            "content": "// ❌ Create Operations WITHOUT Try-Catch",
            "highlighted": false
          },
          {
            "line": 50,
            "content": "",
            "highlighted": false
          },
          {
            "line": 51,
            "content": "async function createUserMissing(data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 52,
            "content": "  // ❌ No error handling - will crash on validation error or duplicate key",
            "highlighted": false
          },
          {
            "line": 53,
            "content": "  const user = await User.create(data);",
            "highlighted": true
          },
          {
            "line": 54,
            "content": "  return user;",
            "highlighted": false
          },
          {
            "line": 55,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 56,
            "content": "",
            "highlighted": false
          },
          {
            "line": 57,
            "content": "async function createMultipleUsersMissing(users: Partial<IUser>[]) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 59,
      "column": 18,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'createMultipleUsersMissing' contains unprotected await expression. await User.insertMany(users)... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 55,
        "endLine": 63,
        "lines": [
          {
            "line": 55,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 56,
            "content": "",
            "highlighted": false
          },
          {
            "line": 57,
            "content": "async function createMultipleUsersMissing(users: Partial<IUser>[]) {",
            "highlighted": false
          },
          {
            "line": 58,
            "content": "  // ❌ No error handling - will crash on bulk insert failure",
            "highlighted": false
          },
          {
            "line": 59,
            "content": "  const result = await User.insertMany(users);",
            "highlighted": true
          },
          {
            "line": 60,
            "content": "  return result;",
            "highlighted": false
          },
          {
            "line": 61,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 62,
            "content": "",
            "highlighted": false
          },
          {
            "line": 63,
            "content": "// ❌ Update Operations WITHOUT Try-Catch",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 67,
      "column": 18,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'updateOneUserMissing' contains unprotected await expression. await User.updateOne({ _id: id }, data)... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 63,
        "endLine": 71,
        "lines": [
          {
            "line": 63,
            "content": "// ❌ Update Operations WITHOUT Try-Catch",
            "highlighted": false
          },
          {
            "line": 64,
            "content": "",
            "highlighted": false
          },
          {
            "line": 65,
            "content": "async function updateOneUserMissing(id: string, data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 66,
            "content": "  // ❌ No error handling - will crash on update failure",
            "highlighted": false
          },
          {
            "line": 67,
            "content": "  const result = await User.updateOne({ _id: id }, data);",
            "highlighted": true
          },
          {
            "line": 68,
            "content": "  return result;",
            "highlighted": false
          },
          {
            "line": 69,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 70,
            "content": "",
            "highlighted": false
          },
          {
            "line": 71,
            "content": "async function updateManyUsersMissing(filter: any, update: Partial<IUser>) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 73,
      "column": 18,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'updateManyUsersMissing' contains unprotected await expression. await User.updateMany(filter, update)... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 69,
        "endLine": 77,
        "lines": [
          {
            "line": 69,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 70,
            "content": "",
            "highlighted": false
          },
          {
            "line": 71,
            "content": "async function updateManyUsersMissing(filter: any, update: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 72,
            "content": "  // ❌ No error handling - will crash on bulk update failure",
            "highlighted": false
          },
          {
            "line": 73,
            "content": "  const result = await User.updateMany(filter, update);",
            "highlighted": true
          },
          {
            "line": 74,
            "content": "  return result;",
            "highlighted": false
          },
          {
            "line": 75,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 76,
            "content": "",
            "highlighted": false
          },
          {
            "line": 77,
            "content": "async function findAndUpdateUserMissing(id: string, data: Partial<IUser>) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 79,
      "column": 16,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'findAndUpdateUserMissing' contains unprotected await expression. await User.findByIdAndUpdate(id, data, { new: true... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 75,
        "endLine": 83,
        "lines": [
          {
            "line": 75,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 76,
            "content": "",
            "highlighted": false
          },
          {
            "line": 77,
            "content": "async function findAndUpdateUserMissing(id: string, data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 78,
            "content": "  // ❌ No error handling - vulnerable to CVE-2023-3696",
            "highlighted": false
          },
          {
            "line": 79,
            "content": "  const user = await User.findByIdAndUpdate(id, data, { new: true });",
            "highlighted": true
          },
          {
            "line": 80,
            "content": "  return user;",
            "highlighted": false
          },
          {
            "line": 81,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 82,
            "content": "",
            "highlighted": false
          },
          {
            "line": 83,
            "content": "async function findOneAndUpdateUserMissing(email: string, data: Partial<IUser>) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 85,
      "column": 16,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'findOneAndUpdateUserMissing' contains unprotected await expression. await User.findOneAndUpdate({ email }, data, { new... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 81,
        "endLine": 89,
        "lines": [
          {
            "line": 81,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 82,
            "content": "",
            "highlighted": false
          },
          {
            "line": 83,
            "content": "async function findOneAndUpdateUserMissing(email: string, data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 84,
            "content": "  // ❌ No error handling - vulnerable to CVE-2023-3696",
            "highlighted": false
          },
          {
            "line": 85,
            "content": "  const user = await User.findOneAndUpdate({ email }, data, { new: true });",
            "highlighted": true
          },
          {
            "line": 86,
            "content": "  return user;",
            "highlighted": false
          },
          {
            "line": 87,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 88,
            "content": "",
            "highlighted": false
          },
          {
            "line": 89,
            "content": "async function replaceOneUserMissing(id: string, data: Partial<IUser>) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 91,
      "column": 18,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'replaceOneUserMissing' contains unprotected await expression. await User.replaceOne({ _id: id }, data)... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 87,
        "endLine": 95,
        "lines": [
          {
            "line": 87,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 88,
            "content": "",
            "highlighted": false
          },
          {
            "line": 89,
            "content": "async function replaceOneUserMissing(id: string, data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 90,
            "content": "  // ❌ No error handling",
            "highlighted": false
          },
          {
            "line": 91,
            "content": "  const result = await User.replaceOne({ _id: id }, data);",
            "highlighted": true
          },
          {
            "line": 92,
            "content": "  return result;",
            "highlighted": false
          },
          {
            "line": 93,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 94,
            "content": "",
            "highlighted": false
          },
          {
            "line": 95,
            "content": "async function findOneAndReplaceMissing(email: string, data: Partial<IUser>) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 97,
      "column": 16,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'findOneAndReplaceMissing' contains unprotected await expression. await User.findOneAndReplace({ email }, data)... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 93,
        "endLine": 101,
        "lines": [
          {
            "line": 93,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 94,
            "content": "",
            "highlighted": false
          },
          {
            "line": 95,
            "content": "async function findOneAndReplaceMissing(email: string, data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 96,
            "content": "  // ❌ No error handling",
            "highlighted": false
          },
          {
            "line": 97,
            "content": "  const user = await User.findOneAndReplace({ email }, data);",
            "highlighted": true
          },
          {
            "line": 98,
            "content": "  return user;",
            "highlighted": false
          },
          {
            "line": 99,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 100,
            "content": "",
            "highlighted": false
          },
          {
            "line": 101,
            "content": "// ❌ Delete Operations WITHOUT Try-Catch",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 105,
      "column": 18,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'deleteOneUserMissing' contains unprotected await expression. await User.deleteOne({ _id: id })... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 101,
        "endLine": 109,
        "lines": [
          {
            "line": 101,
            "content": "// ❌ Delete Operations WITHOUT Try-Catch",
            "highlighted": false
          },
          {
            "line": 102,
            "content": "",
            "highlighted": false
          },
          {
            "line": 103,
            "content": "async function deleteOneUserMissing(id: string) {",
            "highlighted": false
          },
          {
            "line": 104,
            "content": "  // ❌ No error handling",
            "highlighted": false
          },
          {
            "line": 105,
            "content": "  const result = await User.deleteOne({ _id: id });",
            "highlighted": true
          },
          {
            "line": 106,
            "content": "  return result;",
            "highlighted": false
          },
          {
            "line": 107,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 108,
            "content": "",
            "highlighted": false
          },
          {
            "line": 109,
            "content": "async function deleteManyUsersMissing(filter: any) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 111,
      "column": 18,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'deleteManyUsersMissing' contains unprotected await expression. await User.deleteMany(filter)... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 107,
        "endLine": 115,
        "lines": [
          {
            "line": 107,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 108,
            "content": "",
            "highlighted": false
          },
          {
            "line": 109,
            "content": "async function deleteManyUsersMissing(filter: any) {",
            "highlighted": false
          },
          {
            "line": 110,
            "content": "  // ❌ No error handling",
            "highlighted": false
          },
          {
            "line": 111,
            "content": "  const result = await User.deleteMany(filter);",
            "highlighted": true
          },
          {
            "line": 112,
            "content": "  return result;",
            "highlighted": false
          },
          {
            "line": 113,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 114,
            "content": "",
            "highlighted": false
          },
          {
            "line": 115,
            "content": "async function findAndDeleteUserMissing(id: string) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 117,
      "column": 16,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'findAndDeleteUserMissing' contains unprotected await expression. await User.findByIdAndDelete(id)... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 113,
        "endLine": 121,
        "lines": [
          {
            "line": 113,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 114,
            "content": "",
            "highlighted": false
          },
          {
            "line": 115,
            "content": "async function findAndDeleteUserMissing(id: string) {",
            "highlighted": false
          },
          {
            "line": 116,
            "content": "  // ❌ No error handling",
            "highlighted": false
          },
          {
            "line": 117,
            "content": "  const user = await User.findByIdAndDelete(id);",
            "highlighted": true
          },
          {
            "line": 118,
            "content": "  return user;",
            "highlighted": false
          },
          {
            "line": 119,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 120,
            "content": "",
            "highlighted": false
          },
          {
            "line": 121,
            "content": "async function findOneAndDeleteUserMissing(email: string) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 123,
      "column": 16,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'findOneAndDeleteUserMissing' contains unprotected await expression. await User.findOneAndDelete({ email })... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 119,
        "endLine": 127,
        "lines": [
          {
            "line": 119,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 120,
            "content": "",
            "highlighted": false
          },
          {
            "line": 121,
            "content": "async function findOneAndDeleteUserMissing(email: string) {",
            "highlighted": false
          },
          {
            "line": 122,
            "content": "  // ❌ No error handling",
            "highlighted": false
          },
          {
            "line": 123,
            "content": "  const user = await User.findOneAndDelete({ email });",
            "highlighted": true
          },
          {
            "line": 124,
            "content": "  return user;",
            "highlighted": false
          },
          {
            "line": 125,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 126,
            "content": "",
            "highlighted": false
          },
          {
            "line": 127,
            "content": "// NOTE: Model.findByIdAndRemove() was deprecated in mongoose >= 7.x",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 134,
      "column": 17,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'executeQueryMissing' contains unprotected await expression. await User.find({ active: true }).limit(10).exec()... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 130,
        "endLine": 138,
        "lines": [
          {
            "line": 130,
            "content": "// ❌ Query Methods WITHOUT Try-Catch",
            "highlighted": false
          },
          {
            "line": 131,
            "content": "",
            "highlighted": false
          },
          {
            "line": 132,
            "content": "async function executeQueryMissing() {",
            "highlighted": false
          },
          {
            "line": 133,
            "content": "  // ❌ No error handling on .exec()",
            "highlighted": false
          },
          {
            "line": 134,
            "content": "  const users = await User.find({ active: true }).limit(10).exec();",
            "highlighted": true
          },
          {
            "line": 135,
            "content": "  return users;",
            "highlighted": false
          },
          {
            "line": 136,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 137,
            "content": "",
            "highlighted": false
          },
          {
            "line": 138,
            "content": "async function executeWithOrFailMissing(id: string) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 140,
      "column": 16,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'executeWithOrFailMissing' contains unprotected await expression. await User.findById(id).orFail()... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 136,
        "endLine": 144,
        "lines": [
          {
            "line": 136,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 137,
            "content": "",
            "highlighted": false
          },
          {
            "line": 138,
            "content": "async function executeWithOrFailMissing(id: string) {",
            "highlighted": false
          },
          {
            "line": 139,
            "content": "  // ❌ No error handling - orFail() will throw but not caught",
            "highlighted": false
          },
          {
            "line": 140,
            "content": "  const user = await User.findById(id).orFail();",
            "highlighted": true
          },
          {
            "line": 141,
            "content": "  return user;",
            "highlighted": false
          },
          {
            "line": 142,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 143,
            "content": "",
            "highlighted": false
          },
          {
            "line": 144,
            "content": "// ❌ Aggregation Operations WITHOUT Try-Catch",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 148,
      "column": 18,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'aggregateUsersMissing' contains unprotected await expression. await User.aggregate([\n    { $match: { active: tru... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 144,
        "endLine": 152,
        "lines": [
          {
            "line": 144,
            "content": "// ❌ Aggregation Operations WITHOUT Try-Catch",
            "highlighted": false
          },
          {
            "line": 145,
            "content": "",
            "highlighted": false
          },
          {
            "line": 146,
            "content": "async function aggregateUsersMissing() {",
            "highlighted": false
          },
          {
            "line": 147,
            "content": "  // ❌ No error handling",
            "highlighted": false
          },
          {
            "line": 148,
            "content": "  const result = await User.aggregate([",
            "highlighted": true
          },
          {
            "line": 149,
            "content": "    { $match: { active: true } },",
            "highlighted": false
          },
          {
            "line": 150,
            "content": "    { $group: { _id: '$age', count: { $sum: 1 } } }",
            "highlighted": false
          },
          {
            "line": 151,
            "content": "  ]);",
            "highlighted": false
          },
          {
            "line": 152,
            "content": "  return result;",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 157,
      "column": 17,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'countUsersMissing' contains unprotected await expression. await User.countDocuments({ active: true })... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 153,
        "endLine": 161,
        "lines": [
          {
            "line": 153,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 154,
            "content": "",
            "highlighted": false
          },
          {
            "line": 155,
            "content": "async function countUsersMissing() {",
            "highlighted": false
          },
          {
            "line": 156,
            "content": "  // ❌ No error handling",
            "highlighted": false
          },
          {
            "line": 157,
            "content": "  const count = await User.countDocuments({ active: true });",
            "highlighted": true
          },
          {
            "line": 158,
            "content": "  return count;",
            "highlighted": false
          },
          {
            "line": 159,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 160,
            "content": "",
            "highlighted": false
          },
          {
            "line": 161,
            "content": "async function estimateCountMissing() {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 163,
      "column": 17,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'estimateCountMissing' contains unprotected await expression. await User.estimatedDocumentCount()... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 159,
        "endLine": 167,
        "lines": [
          {
            "line": 159,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 160,
            "content": "",
            "highlighted": false
          },
          {
            "line": 161,
            "content": "async function estimateCountMissing() {",
            "highlighted": false
          },
          {
            "line": 162,
            "content": "  // ❌ No error handling",
            "highlighted": false
          },
          {
            "line": 163,
            "content": "  const count = await User.estimatedDocumentCount();",
            "highlighted": true
          },
          {
            "line": 164,
            "content": "  return count;",
            "highlighted": false
          },
          {
            "line": 165,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 166,
            "content": "",
            "highlighted": false
          },
          {
            "line": 167,
            "content": "// ❌ Connection Operations WITHOUT Try-Catch",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 207,
      "column": 16,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'chainedQueryMissing' contains unprotected await expression. await User.findOne({ email })\n    .select('name em... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 203,
        "endLine": 211,
        "lines": [
          {
            "line": 203,
            "content": "// ❌ Chained Query WITHOUT Try-Catch",
            "highlighted": false
          },
          {
            "line": 204,
            "content": "",
            "highlighted": false
          },
          {
            "line": 205,
            "content": "async function chainedQueryMissing(email: string) {",
            "highlighted": false
          },
          {
            "line": 206,
            "content": "  // ❌ No error handling on chained query",
            "highlighted": false
          },
          {
            "line": 207,
            "content": "  const user = await User.findOne({ email })",
            "highlighted": true
          },
          {
            "line": 208,
            "content": "    .select('name email')",
            "highlighted": false
          },
          {
            "line": 209,
            "content": "    .limit(1)",
            "highlighted": false
          },
          {
            "line": 210,
            "content": "    .exec();",
            "highlighted": false
          },
          {
            "line": 211,
            "content": "  return user;",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 218,
      "column": 18,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'checkUserExistsMissing' contains unprotected await expression. await User.exists({ email })... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 214,
        "endLine": 222,
        "lines": [
          {
            "line": 214,
            "content": "// ❌ Additional Methods WITHOUT Try-Catch",
            "highlighted": false
          },
          {
            "line": 215,
            "content": "",
            "highlighted": false
          },
          {
            "line": 216,
            "content": "async function checkUserExistsMissing(email: string) {",
            "highlighted": false
          },
          {
            "line": 217,
            "content": "  // ❌ No error handling",
            "highlighted": false
          },
          {
            "line": 218,
            "content": "  const exists = await User.exists({ email });",
            "highlighted": true
          },
          {
            "line": 219,
            "content": "  return exists;",
            "highlighted": false
          },
          {
            "line": 220,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 221,
            "content": "",
            "highlighted": false
          },
          {
            "line": 222,
            "content": "async function getDistinctValuesMissing() {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 224,
      "column": 16,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'getDistinctValuesMissing' contains unprotected await expression. await User.distinct('age')... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 220,
        "endLine": 228,
        "lines": [
          {
            "line": 220,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 221,
            "content": "",
            "highlighted": false
          },
          {
            "line": 222,
            "content": "async function getDistinctValuesMissing() {",
            "highlighted": false
          },
          {
            "line": 223,
            "content": "  // ❌ No error handling",
            "highlighted": false
          },
          {
            "line": 224,
            "content": "  const ages = await User.distinct('age');",
            "highlighted": true
          },
          {
            "line": 225,
            "content": "  return ages;",
            "highlighted": false
          },
          {
            "line": 226,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 227,
            "content": "",
            "highlighted": false
          },
          {
            "line": 228,
            "content": "async function bulkWriteMissing(operations: any[]) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 230,
      "column": 18,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'bulkWriteMissing' contains unprotected await expression. await User.bulkWrite(operations)... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 226,
        "endLine": 234,
        "lines": [
          {
            "line": 226,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 227,
            "content": "",
            "highlighted": false
          },
          {
            "line": 228,
            "content": "async function bulkWriteMissing(operations: any[]) {",
            "highlighted": false
          },
          {
            "line": 229,
            "content": "  // ❌ No error handling",
            "highlighted": false
          },
          {
            "line": 230,
            "content": "  const result = await User.bulkWrite(operations);",
            "highlighted": true
          },
          {
            "line": 231,
            "content": "  return result;",
            "highlighted": false
          },
          {
            "line": 232,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 233,
            "content": "",
            "highlighted": false
          },
          {
            "line": 234,
            "content": "// ❌ Multiple Operations in Sequence WITHOUT Try-Catch",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 238,
      "column": 16,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'multipleOperationsMissing' contains unprotected await expression. await User.findOne({ email })... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 234,
        "endLine": 242,
        "lines": [
          {
            "line": 234,
            "content": "// ❌ Multiple Operations in Sequence WITHOUT Try-Catch",
            "highlighted": false
          },
          {
            "line": 235,
            "content": "",
            "highlighted": false
          },
          {
            "line": 236,
            "content": "async function multipleOperationsMissing(email: string, data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 237,
            "content": "  // ❌ No error handling for either operation",
            "highlighted": false
          },
          {
            "line": 238,
            "content": "  const user = await User.findOne({ email });",
            "highlighted": true
          },
          {
            "line": 239,
            "content": "  if (user) {",
            "highlighted": false
          },
          {
            "line": 240,
            "content": "    await User.updateOne({ _id: user._id }, data);",
            "highlighted": false
          },
          {
            "line": 241,
            "content": "  }",
            "highlighted": false
          },
          {
            "line": 242,
            "content": "  return user;",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 240,
      "column": 5,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'multipleOperationsMissing' contains unprotected await expression. await User.updateOne({ _id: user._id }, data)... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 236,
        "endLine": 244,
        "lines": [
          {
            "line": 236,
            "content": "async function multipleOperationsMissing(email: string, data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 237,
            "content": "  // ❌ No error handling for either operation",
            "highlighted": false
          },
          {
            "line": 238,
            "content": "  const user = await User.findOne({ email });",
            "highlighted": false
          },
          {
            "line": 239,
            "content": "  if (user) {",
            "highlighted": false
          },
          {
            "line": 240,
            "content": "    await User.updateOne({ _id: user._id }, data);",
            "highlighted": true
          },
          {
            "line": 241,
            "content": "  }",
            "highlighted": false
          },
          {
            "line": 242,
            "content": "  return user;",
            "highlighted": false
          },
          {
            "line": 243,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 244,
            "content": "",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 249,
      "column": 16,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'nestedOperationsMissing' contains unprotected await expression. await User.findById(userId)... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 245,
        "endLine": 253,
        "lines": [
          {
            "line": 245,
            "content": "// ❌ Nested Operations WITHOUT Try-Catch",
            "highlighted": false
          },
          {
            "line": 246,
            "content": "",
            "highlighted": false
          },
          {
            "line": 247,
            "content": "async function nestedOperationsMissing(userId: string) {",
            "highlighted": false
          },
          {
            "line": 248,
            "content": "  // ❌ No error handling",
            "highlighted": false
          },
          {
            "line": 249,
            "content": "  const user = await User.findById(userId);",
            "highlighted": true
          },
          {
            "line": 250,
            "content": "",
            "highlighted": false
          },
          {
            "line": 251,
            "content": "  if (user) {",
            "highlighted": false
          },
          {
            "line": 252,
            "content": "    // ❌ No error handling on nested operation",
            "highlighted": false
          },
          {
            "line": 253,
            "content": "    const count = await User.countDocuments({ age: user.age });",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 253,
      "column": 19,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "Async function 'nestedOperationsMissing' contains unprotected await expression. await User.countDocuments({ age: user.age })... may throw unhandled errors.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 249,
        "endLine": 257,
        "lines": [
          {
            "line": 249,
            "content": "  const user = await User.findById(userId);",
            "highlighted": false
          },
          {
            "line": 250,
            "content": "",
            "highlighted": false
          },
          {
            "line": 251,
            "content": "  if (user) {",
            "highlighted": false
          },
          {
            "line": 252,
            "content": "    // ❌ No error handling on nested operation",
            "highlighted": false
          },
          {
            "line": 253,
            "content": "    const count = await User.countDocuments({ age: user.age });",
            "highlighted": true
          },
          {
            "line": 254,
            "content": "    return { user, count };",
            "highlighted": false
          },
          {
            "line": 255,
            "content": "  }",
            "highlighted": false
          },
          {
            "line": 256,
            "content": "",
            "highlighted": false
          },
          {
            "line": 257,
            "content": "  return null;",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 33,
      "column": 23,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "No try-catch block found. MongooseError or MongoError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 29,
        "endLine": 37,
        "lines": [
          {
            "line": 29,
            "content": "// ❌ Query Operations WITHOUT Try-Catch",
            "highlighted": false
          },
          {
            "line": 30,
            "content": "",
            "highlighted": false
          },
          {
            "line": 31,
            "content": "async function findAllUsersMissing() {",
            "highlighted": false
          },
          {
            "line": 32,
            "content": "  // ❌ No error handling - will crash if connection fails",
            "highlighted": false
          },
          {
            "line": 33,
            "content": "  const users = await User.find();",
            "highlighted": true
          },
          {
            "line": 34,
            "content": "  return users;",
            "highlighted": false
          },
          {
            "line": 35,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 36,
            "content": "",
            "highlighted": false
          },
          {
            "line": 37,
            "content": "async function findOneUserMissing(email: string) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-cast-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 33,
      "column": 23,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "cast-error-no-try-catch",
      "description": "No try-catch block found. CastError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/schematypes.html#what-is-a-schematype",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Validate query parameters before passing to mongoose. Handle CastError separately from other errors.\n",
      "code_snippet": {
        "startLine": 29,
        "endLine": 37,
        "lines": [
          {
            "line": 29,
            "content": "// ❌ Query Operations WITHOUT Try-Catch",
            "highlighted": false
          },
          {
            "line": 30,
            "content": "",
            "highlighted": false
          },
          {
            "line": 31,
            "content": "async function findAllUsersMissing() {",
            "highlighted": false
          },
          {
            "line": 32,
            "content": "  // ❌ No error handling - will crash if connection fails",
            "highlighted": false
          },
          {
            "line": 33,
            "content": "  const users = await User.find();",
            "highlighted": true
          },
          {
            "line": 34,
            "content": "  return users;",
            "highlighted": false
          },
          {
            "line": 35,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 36,
            "content": "",
            "highlighted": false
          },
          {
            "line": 37,
            "content": "async function findOneUserMissing(email: string) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 39,
      "column": 22,
      "package": "mongoose",
      "function": "findOne",
      "contract_clause": "connection-error-no-try-catch",
      "description": "No try-catch block found. MongooseError or MongoError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch() to handle connection errors",
      "code_snippet": {
        "startLine": 35,
        "endLine": 43,
        "lines": [
          {
            "line": 35,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 36,
            "content": "",
            "highlighted": false
          },
          {
            "line": 37,
            "content": "async function findOneUserMissing(email: string) {",
            "highlighted": false
          },
          {
            "line": 38,
            "content": "  // ❌ No error handling - will crash on query error",
            "highlighted": false
          },
          {
            "line": 39,
            "content": "  const user = await User.findOne({ email });",
            "highlighted": true
          },
          {
            "line": 40,
            "content": "  return user;",
            "highlighted": false
          },
          {
            "line": 41,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 42,
            "content": "",
            "highlighted": false
          },
          {
            "line": 43,
            "content": "async function findUserByIdMissing(id: string) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-cast-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 39,
      "column": 22,
      "package": "mongoose",
      "function": "findOne",
      "contract_clause": "cast-error-no-try-catch",
      "description": "No try-catch block found. CastError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/schematypes.html",
      "suggested_fix": "Caller MUST wrap in try-catch to handle type casting errors",
      "code_snippet": {
        "startLine": 35,
        "endLine": 43,
        "lines": [
          {
            "line": 35,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 36,
            "content": "",
            "highlighted": false
          },
          {
            "line": 37,
            "content": "async function findOneUserMissing(email: string) {",
            "highlighted": false
          },
          {
            "line": 38,
            "content": "  // ❌ No error handling - will crash on query error",
            "highlighted": false
          },
          {
            "line": 39,
            "content": "  const user = await User.findOne({ email });",
            "highlighted": true
          },
          {
            "line": 40,
            "content": "  return user;",
            "highlighted": false
          },
          {
            "line": 41,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 42,
            "content": "",
            "highlighted": false
          },
          {
            "line": 43,
            "content": "async function findUserByIdMissing(id: string) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-cast-error-no-try-catch-invalid-id",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 45,
      "column": 22,
      "package": "mongoose",
      "function": "findById",
      "contract_clause": "cast-error-no-try-catch-invalid-id",
      "description": "No try-catch block found. CastError with kind: 'ObjectId' - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-findById",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Common when user input is passed directly as ID. Validate ID format before querying.\n",
      "code_snippet": {
        "startLine": 41,
        "endLine": 49,
        "lines": [
          {
            "line": 41,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 42,
            "content": "",
            "highlighted": false
          },
          {
            "line": 43,
            "content": "async function findUserByIdMissing(id: string) {",
            "highlighted": false
          },
          {
            "line": 44,
            "content": "  // ❌ No error handling - will crash on invalid ObjectId",
            "highlighted": false
          },
          {
            "line": 45,
            "content": "  const user = await User.findById(id);",
            "highlighted": true
          },
          {
            "line": 46,
            "content": "  return user;",
            "highlighted": false
          },
          {
            "line": 47,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 48,
            "content": "",
            "highlighted": false
          },
          {
            "line": 49,
            "content": "// ❌ Create Operations WITHOUT Try-Catch",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 45,
      "column": 22,
      "package": "mongoose",
      "function": "findById",
      "contract_clause": "connection-error-no-try-catch",
      "description": "No try-catch block found. MongooseError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST handle connection errors",
      "code_snippet": {
        "startLine": 41,
        "endLine": 49,
        "lines": [
          {
            "line": 41,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 42,
            "content": "",
            "highlighted": false
          },
          {
            "line": 43,
            "content": "async function findUserByIdMissing(id: string) {",
            "highlighted": false
          },
          {
            "line": 44,
            "content": "  // ❌ No error handling - will crash on invalid ObjectId",
            "highlighted": false
          },
          {
            "line": 45,
            "content": "  const user = await User.findById(id);",
            "highlighted": true
          },
          {
            "line": 46,
            "content": "  return user;",
            "highlighted": false
          },
          {
            "line": 47,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 48,
            "content": "",
            "highlighted": false
          },
          {
            "line": 49,
            "content": "// ❌ Create Operations WITHOUT Try-Catch",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-validation-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 53,
      "column": 22,
      "package": "mongoose",
      "function": "create",
      "contract_clause": "validation-error-no-try-catch",
      "description": "No try-catch block found. ValidationError with errors object containing field-specific ValidatorErrors - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/validation.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Check error.name === 'ValidationError' and inspect error.errors object. Each field error is accessible via error.errors[fieldName].\n",
      "code_snippet": {
        "startLine": 49,
        "endLine": 57,
        "lines": [
          {
            "line": 49,
            "content": "// ❌ Create Operations WITHOUT Try-Catch",
            "highlighted": false
          },
          {
            "line": 50,
            "content": "",
            "highlighted": false
          },
          {
            "line": 51,
            "content": "async function createUserMissing(data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 52,
            "content": "  // ❌ No error handling - will crash on validation error or duplicate key",
            "highlighted": false
          },
          {
            "line": 53,
            "content": "  const user = await User.create(data);",
            "highlighted": true
          },
          {
            "line": 54,
            "content": "  return user;",
            "highlighted": false
          },
          {
            "line": 55,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 56,
            "content": "",
            "highlighted": false
          },
          {
            "line": 57,
            "content": "async function createMultipleUsersMissing(users: Partial<IUser>[]) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-duplicate-key-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 53,
      "column": 22,
      "package": "mongoose",
      "function": "create",
      "contract_clause": "duplicate-key-error-no-try-catch",
      "description": "No try-catch block found. MongoError with code: 11000 - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/validation.html#unique-indexes",
      "suggested_fix": "Caller MUST wrap in try-catch and check error.code === 11000. This is NOT a ValidationError - it comes from MongoDB driver. Extract duplicate field from error message or error.keyPattern.\n",
      "code_snippet": {
        "startLine": 49,
        "endLine": 57,
        "lines": [
          {
            "line": 49,
            "content": "// ❌ Create Operations WITHOUT Try-Catch",
            "highlighted": false
          },
          {
            "line": 50,
            "content": "",
            "highlighted": false
          },
          {
            "line": 51,
            "content": "async function createUserMissing(data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 52,
            "content": "  // ❌ No error handling - will crash on validation error or duplicate key",
            "highlighted": false
          },
          {
            "line": 53,
            "content": "  const user = await User.create(data);",
            "highlighted": true
          },
          {
            "line": 54,
            "content": "  return user;",
            "highlighted": false
          },
          {
            "line": 55,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 56,
            "content": "",
            "highlighted": false
          },
          {
            "line": 57,
            "content": "async function createMultipleUsersMissing(users: Partial<IUser>[]) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 53,
      "column": 22,
      "package": "mongoose",
      "function": "create",
      "contract_clause": "connection-error-no-try-catch",
      "description": "No try-catch block found. MongooseError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST handle connection errors with retry logic",
      "code_snippet": {
        "startLine": 49,
        "endLine": 57,
        "lines": [
          {
            "line": 49,
            "content": "// ❌ Create Operations WITHOUT Try-Catch",
            "highlighted": false
          },
          {
            "line": 50,
            "content": "",
            "highlighted": false
          },
          {
            "line": 51,
            "content": "async function createUserMissing(data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 52,
            "content": "  // ❌ No error handling - will crash on validation error or duplicate key",
            "highlighted": false
          },
          {
            "line": 53,
            "content": "  const user = await User.create(data);",
            "highlighted": true
          },
          {
            "line": 54,
            "content": "  return user;",
            "highlighted": false
          },
          {
            "line": 55,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 56,
            "content": "",
            "highlighted": false
          },
          {
            "line": 57,
            "content": "async function createMultipleUsersMissing(users: Partial<IUser>[]) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-validation-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 59,
      "column": 24,
      "package": "mongoose",
      "function": "insertMany",
      "contract_clause": "validation-error-no-try-catch",
      "description": "No try-catch block found. ValidationError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-insertMany",
      "suggested_fix": "Caller MUST wrap in try-catch. Default behavior stops on first error; use ordered:false to continue on errors.",
      "code_snippet": {
        "startLine": 55,
        "endLine": 63,
        "lines": [
          {
            "line": 55,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 56,
            "content": "",
            "highlighted": false
          },
          {
            "line": 57,
            "content": "async function createMultipleUsersMissing(users: Partial<IUser>[]) {",
            "highlighted": false
          },
          {
            "line": 58,
            "content": "  // ❌ No error handling - will crash on bulk insert failure",
            "highlighted": false
          },
          {
            "line": 59,
            "content": "  const result = await User.insertMany(users);",
            "highlighted": true
          },
          {
            "line": 60,
            "content": "  return result;",
            "highlighted": false
          },
          {
            "line": 61,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 62,
            "content": "",
            "highlighted": false
          },
          {
            "line": 63,
            "content": "// ❌ Update Operations WITHOUT Try-Catch",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-duplicate-key-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 59,
      "column": 24,
      "package": "mongoose",
      "function": "insertMany",
      "contract_clause": "duplicate-key-error-no-try-catch",
      "description": "No try-catch block found. MongoError with code: 11000 - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-insertMany",
      "suggested_fix": "Caller MUST wrap in try-catch and handle duplicate key errors",
      "code_snippet": {
        "startLine": 55,
        "endLine": 63,
        "lines": [
          {
            "line": 55,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 56,
            "content": "",
            "highlighted": false
          },
          {
            "line": 57,
            "content": "async function createMultipleUsersMissing(users: Partial<IUser>[]) {",
            "highlighted": false
          },
          {
            "line": 58,
            "content": "  // ❌ No error handling - will crash on bulk insert failure",
            "highlighted": false
          },
          {
            "line": 59,
            "content": "  const result = await User.insertMany(users);",
            "highlighted": true
          },
          {
            "line": 60,
            "content": "  return result;",
            "highlighted": false
          },
          {
            "line": 61,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 62,
            "content": "",
            "highlighted": false
          },
          {
            "line": 63,
            "content": "// ❌ Update Operations WITHOUT Try-Catch",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-validation-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 67,
      "column": 24,
      "package": "mongoose",
      "function": "updateOne",
      "contract_clause": "validation-error-no-try-catch",
      "description": "No try-catch block found. ValidationError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/validation.html",
      "suggested_fix": "Caller MUST wrap in try-catch to handle validation errors",
      "code_snippet": {
        "startLine": 63,
        "endLine": 71,
        "lines": [
          {
            "line": 63,
            "content": "// ❌ Update Operations WITHOUT Try-Catch",
            "highlighted": false
          },
          {
            "line": 64,
            "content": "",
            "highlighted": false
          },
          {
            "line": 65,
            "content": "async function updateOneUserMissing(id: string, data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 66,
            "content": "  // ❌ No error handling - will crash on update failure",
            "highlighted": false
          },
          {
            "line": 67,
            "content": "  const result = await User.updateOne({ _id: id }, data);",
            "highlighted": true
          },
          {
            "line": 68,
            "content": "  return result;",
            "highlighted": false
          },
          {
            "line": 69,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 70,
            "content": "",
            "highlighted": false
          },
          {
            "line": 71,
            "content": "async function updateManyUsersMissing(filter: any, update: Partial<IUser>) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-cast-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 67,
      "column": 24,
      "package": "mongoose",
      "function": "updateOne",
      "contract_clause": "cast-error-no-try-catch",
      "description": "No try-catch block found. CastError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/schematypes.html",
      "suggested_fix": "Caller MUST wrap in try-catch to handle type errors",
      "code_snippet": {
        "startLine": 63,
        "endLine": 71,
        "lines": [
          {
            "line": 63,
            "content": "// ❌ Update Operations WITHOUT Try-Catch",
            "highlighted": false
          },
          {
            "line": 64,
            "content": "",
            "highlighted": false
          },
          {
            "line": 65,
            "content": "async function updateOneUserMissing(id: string, data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 66,
            "content": "  // ❌ No error handling - will crash on update failure",
            "highlighted": false
          },
          {
            "line": 67,
            "content": "  const result = await User.updateOne({ _id: id }, data);",
            "highlighted": true
          },
          {
            "line": 68,
            "content": "  return result;",
            "highlighted": false
          },
          {
            "line": 69,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 70,
            "content": "",
            "highlighted": false
          },
          {
            "line": 71,
            "content": "async function updateManyUsersMissing(filter: any, update: Partial<IUser>) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 67,
      "column": 24,
      "package": "mongoose",
      "function": "updateOne",
      "contract_clause": "connection-error-no-try-catch",
      "description": "No try-catch block found. MongooseError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST handle connection errors",
      "code_snippet": {
        "startLine": 63,
        "endLine": 71,
        "lines": [
          {
            "line": 63,
            "content": "// ❌ Update Operations WITHOUT Try-Catch",
            "highlighted": false
          },
          {
            "line": 64,
            "content": "",
            "highlighted": false
          },
          {
            "line": 65,
            "content": "async function updateOneUserMissing(id: string, data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 66,
            "content": "  // ❌ No error handling - will crash on update failure",
            "highlighted": false
          },
          {
            "line": 67,
            "content": "  const result = await User.updateOne({ _id: id }, data);",
            "highlighted": true
          },
          {
            "line": 68,
            "content": "  return result;",
            "highlighted": false
          },
          {
            "line": 69,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 70,
            "content": "",
            "highlighted": false
          },
          {
            "line": 71,
            "content": "async function updateManyUsersMissing(filter: any, update: Partial<IUser>) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-prototype-pollution-cve-2023-3696-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 79,
      "column": 22,
      "package": "mongoose",
      "function": "findByIdAndUpdate",
      "contract_clause": "prototype-pollution-cve-2023-3696-no-try-catch",
      "description": "No try-catch block found. May not throw - vulnerability allows arbitrary code execution - this will crash the application.",
      "source_doc": "https://security.snyk.io/vuln/SNYK-JS-MONGOOSE-5777721",
      "suggested_fix": "Caller MUST wrap in try-catch. CRITICAL: Ensure mongoose version >= 5.13.20, 6.4.6, or 7.3.1 to patch CVE-2023-3696. Validate and sanitize all update payloads from user input.\n",
      "code_snippet": {
        "startLine": 75,
        "endLine": 83,
        "lines": [
          {
            "line": 75,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 76,
            "content": "",
            "highlighted": false
          },
          {
            "line": 77,
            "content": "async function findAndUpdateUserMissing(id: string, data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 78,
            "content": "  // ❌ No error handling - vulnerable to CVE-2023-3696",
            "highlighted": false
          },
          {
            "line": 79,
            "content": "  const user = await User.findByIdAndUpdate(id, data, { new: true });",
            "highlighted": true
          },
          {
            "line": 80,
            "content": "  return user;",
            "highlighted": false
          },
          {
            "line": 81,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 82,
            "content": "",
            "highlighted": false
          },
          {
            "line": 83,
            "content": "async function findOneAndUpdateUserMissing(email: string, data: Partial<IUser>) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-validation-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 79,
      "column": 22,
      "package": "mongoose",
      "function": "findByIdAndUpdate",
      "contract_clause": "validation-error-no-try-catch",
      "description": "No try-catch block found. ValidationError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/validation.html",
      "suggested_fix": "Caller MUST wrap in try-catch",
      "code_snippet": {
        "startLine": 75,
        "endLine": 83,
        "lines": [
          {
            "line": 75,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 76,
            "content": "",
            "highlighted": false
          },
          {
            "line": 77,
            "content": "async function findAndUpdateUserMissing(id: string, data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 78,
            "content": "  // ❌ No error handling - vulnerable to CVE-2023-3696",
            "highlighted": false
          },
          {
            "line": 79,
            "content": "  const user = await User.findByIdAndUpdate(id, data, { new: true });",
            "highlighted": true
          },
          {
            "line": 80,
            "content": "  return user;",
            "highlighted": false
          },
          {
            "line": 81,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 82,
            "content": "",
            "highlighted": false
          },
          {
            "line": 83,
            "content": "async function findOneAndUpdateUserMissing(email: string, data: Partial<IUser>) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-cast-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 79,
      "column": 22,
      "package": "mongoose",
      "function": "findByIdAndUpdate",
      "contract_clause": "cast-error-no-try-catch",
      "description": "No try-catch block found. CastError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-findByIdAndUpdate",
      "suggested_fix": "Caller MUST wrap in try-catch",
      "code_snippet": {
        "startLine": 75,
        "endLine": 83,
        "lines": [
          {
            "line": 75,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 76,
            "content": "",
            "highlighted": false
          },
          {
            "line": 77,
            "content": "async function findAndUpdateUserMissing(id: string, data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 78,
            "content": "  // ❌ No error handling - vulnerable to CVE-2023-3696",
            "highlighted": false
          },
          {
            "line": 79,
            "content": "  const user = await User.findByIdAndUpdate(id, data, { new: true });",
            "highlighted": true
          },
          {
            "line": 80,
            "content": "  return user;",
            "highlighted": false
          },
          {
            "line": 81,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 82,
            "content": "",
            "highlighted": false
          },
          {
            "line": 83,
            "content": "async function findOneAndUpdateUserMissing(email: string, data: Partial<IUser>) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-prototype-pollution-cve-2023-3696-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 85,
      "column": 22,
      "package": "mongoose",
      "function": "findOneAndUpdate",
      "contract_clause": "prototype-pollution-cve-2023-3696-no-try-catch",
      "description": "No try-catch block found. May not throw - allows RCE - this will crash the application.",
      "source_doc": "https://security.snyk.io/vuln/SNYK-JS-MONGOOSE-5777721",
      "suggested_fix": "Caller MUST wrap in try-catch and validate input. Upgrade mongoose to patched version.",
      "code_snippet": {
        "startLine": 81,
        "endLine": 89,
        "lines": [
          {
            "line": 81,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 82,
            "content": "",
            "highlighted": false
          },
          {
            "line": 83,
            "content": "async function findOneAndUpdateUserMissing(email: string, data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 84,
            "content": "  // ❌ No error handling - vulnerable to CVE-2023-3696",
            "highlighted": false
          },
          {
            "line": 85,
            "content": "  const user = await User.findOneAndUpdate({ email }, data, { new: true });",
            "highlighted": true
          },
          {
            "line": 86,
            "content": "  return user;",
            "highlighted": false
          },
          {
            "line": 87,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 88,
            "content": "",
            "highlighted": false
          },
          {
            "line": 89,
            "content": "async function replaceOneUserMissing(id: string, data: Partial<IUser>) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-validation-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 85,
      "column": 22,
      "package": "mongoose",
      "function": "findOneAndUpdate",
      "contract_clause": "validation-error-no-try-catch",
      "description": "No try-catch block found. ValidationError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/validation.html",
      "suggested_fix": "Caller MUST wrap in try-catch",
      "code_snippet": {
        "startLine": 81,
        "endLine": 89,
        "lines": [
          {
            "line": 81,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 82,
            "content": "",
            "highlighted": false
          },
          {
            "line": 83,
            "content": "async function findOneAndUpdateUserMissing(email: string, data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 84,
            "content": "  // ❌ No error handling - vulnerable to CVE-2023-3696",
            "highlighted": false
          },
          {
            "line": 85,
            "content": "  const user = await User.findOneAndUpdate({ email }, data, { new: true });",
            "highlighted": true
          },
          {
            "line": 86,
            "content": "  return user;",
            "highlighted": false
          },
          {
            "line": 87,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 88,
            "content": "",
            "highlighted": false
          },
          {
            "line": 89,
            "content": "async function replaceOneUserMissing(id: string, data: Partial<IUser>) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 105,
      "column": 24,
      "package": "mongoose",
      "function": "deleteOne",
      "contract_clause": "connection-error-no-try-catch",
      "description": "No try-catch block found. MongooseError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch",
      "code_snippet": {
        "startLine": 101,
        "endLine": 109,
        "lines": [
          {
            "line": 101,
            "content": "// ❌ Delete Operations WITHOUT Try-Catch",
            "highlighted": false
          },
          {
            "line": 102,
            "content": "",
            "highlighted": false
          },
          {
            "line": 103,
            "content": "async function deleteOneUserMissing(id: string) {",
            "highlighted": false
          },
          {
            "line": 104,
            "content": "  // ❌ No error handling",
            "highlighted": false
          },
          {
            "line": 105,
            "content": "  const result = await User.deleteOne({ _id: id });",
            "highlighted": true
          },
          {
            "line": 106,
            "content": "  return result;",
            "highlighted": false
          },
          {
            "line": 107,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 108,
            "content": "",
            "highlighted": false
          },
          {
            "line": 109,
            "content": "async function deleteManyUsersMissing(filter: any) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-cast-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 117,
      "column": 22,
      "package": "mongoose",
      "function": "findByIdAndDelete",
      "contract_clause": "cast-error-no-try-catch",
      "description": "No try-catch block found. CastError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-findByIdAndDelete",
      "suggested_fix": "Caller MUST wrap in try-catch",
      "code_snippet": {
        "startLine": 113,
        "endLine": 121,
        "lines": [
          {
            "line": 113,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 114,
            "content": "",
            "highlighted": false
          },
          {
            "line": 115,
            "content": "async function findAndDeleteUserMissing(id: string) {",
            "highlighted": false
          },
          {
            "line": 116,
            "content": "  // ❌ No error handling",
            "highlighted": false
          },
          {
            "line": 117,
            "content": "  const user = await User.findByIdAndDelete(id);",
            "highlighted": true
          },
          {
            "line": 118,
            "content": "  return user;",
            "highlighted": false
          },
          {
            "line": 119,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 120,
            "content": "",
            "highlighted": false
          },
          {
            "line": 121,
            "content": "async function findOneAndDeleteUserMissing(email: string) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 117,
      "column": 22,
      "package": "mongoose",
      "function": "findByIdAndDelete",
      "contract_clause": "connection-error-no-try-catch",
      "description": "No try-catch block found. MongooseError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch",
      "code_snippet": {
        "startLine": 113,
        "endLine": 121,
        "lines": [
          {
            "line": 113,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 114,
            "content": "",
            "highlighted": false
          },
          {
            "line": 115,
            "content": "async function findAndDeleteUserMissing(id: string) {",
            "highlighted": false
          },
          {
            "line": 116,
            "content": "  // ❌ No error handling",
            "highlighted": false
          },
          {
            "line": 117,
            "content": "  const user = await User.findByIdAndDelete(id);",
            "highlighted": true
          },
          {
            "line": 118,
            "content": "  return user;",
            "highlighted": false
          },
          {
            "line": 119,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 120,
            "content": "",
            "highlighted": false
          },
          {
            "line": 121,
            "content": "async function findOneAndDeleteUserMissing(email: string) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-query-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 134,
      "column": 23,
      "package": "mongoose",
      "function": "exec",
      "contract_clause": "query-error-no-try-catch",
      "description": "No try-catch block found. MongooseError, CastError, or ValidationError depending on failure type - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/api/query.html#query_Query-exec",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). .exec() is the terminal operation for query chains. All query errors surface here.\n",
      "code_snippet": {
        "startLine": 130,
        "endLine": 138,
        "lines": [
          {
            "line": 130,
            "content": "// ❌ Query Methods WITHOUT Try-Catch",
            "highlighted": false
          },
          {
            "line": 131,
            "content": "",
            "highlighted": false
          },
          {
            "line": 132,
            "content": "async function executeQueryMissing() {",
            "highlighted": false
          },
          {
            "line": 133,
            "content": "  // ❌ No error handling on .exec()",
            "highlighted": false
          },
          {
            "line": 134,
            "content": "  const users = await User.find({ active: true }).limit(10).exec();",
            "highlighted": true
          },
          {
            "line": 135,
            "content": "  return users;",
            "highlighted": false
          },
          {
            "line": 136,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 137,
            "content": "",
            "highlighted": false
          },
          {
            "line": 138,
            "content": "async function executeWithOrFailMissing(id: string) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 134,
      "column": 23,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "connection-error-no-try-catch",
      "description": "No try-catch block found. MongooseError or MongoError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
      "code_snippet": {
        "startLine": 130,
        "endLine": 138,
        "lines": [
          {
            "line": 130,
            "content": "// ❌ Query Methods WITHOUT Try-Catch",
            "highlighted": false
          },
          {
            "line": 131,
            "content": "",
            "highlighted": false
          },
          {
            "line": 132,
            "content": "async function executeQueryMissing() {",
            "highlighted": false
          },
          {
            "line": 133,
            "content": "  // ❌ No error handling on .exec()",
            "highlighted": false
          },
          {
            "line": 134,
            "content": "  const users = await User.find({ active: true }).limit(10).exec();",
            "highlighted": true
          },
          {
            "line": 135,
            "content": "  return users;",
            "highlighted": false
          },
          {
            "line": 136,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 137,
            "content": "",
            "highlighted": false
          },
          {
            "line": 138,
            "content": "async function executeWithOrFailMissing(id: string) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-cast-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 134,
      "column": 23,
      "package": "mongoose",
      "function": "find",
      "contract_clause": "cast-error-no-try-catch",
      "description": "No try-catch block found. CastError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/schematypes.html#what-is-a-schematype",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Validate query parameters before passing to mongoose. Handle CastError separately from other errors.\n",
      "code_snippet": {
        "startLine": 130,
        "endLine": 138,
        "lines": [
          {
            "line": 130,
            "content": "// ❌ Query Methods WITHOUT Try-Catch",
            "highlighted": false
          },
          {
            "line": 131,
            "content": "",
            "highlighted": false
          },
          {
            "line": 132,
            "content": "async function executeQueryMissing() {",
            "highlighted": false
          },
          {
            "line": 133,
            "content": "  // ❌ No error handling on .exec()",
            "highlighted": false
          },
          {
            "line": 134,
            "content": "  const users = await User.find({ active: true }).limit(10).exec();",
            "highlighted": true
          },
          {
            "line": 135,
            "content": "  return users;",
            "highlighted": false
          },
          {
            "line": 136,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 137,
            "content": "",
            "highlighted": false
          },
          {
            "line": 138,
            "content": "async function executeWithOrFailMissing(id: string) {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-document-not-found-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 140,
      "column": 22,
      "package": "mongoose",
      "function": "orFail",
      "contract_clause": "document-not-found-no-try-catch",
      "description": "No try-catch block found. DocumentNotFoundError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/api/query.html#query_Query-orFail",
      "suggested_fix": "Caller MUST wrap in try-catch. .orFail() is explicitly designed to throw when no results found. Use this when document existence is mandatory.\n",
      "code_snippet": {
        "startLine": 136,
        "endLine": 144,
        "lines": [
          {
            "line": 136,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 137,
            "content": "",
            "highlighted": false
          },
          {
            "line": 138,
            "content": "async function executeWithOrFailMissing(id: string) {",
            "highlighted": false
          },
          {
            "line": 139,
            "content": "  // ❌ No error handling - orFail() will throw but not caught",
            "highlighted": false
          },
          {
            "line": 140,
            "content": "  const user = await User.findById(id).orFail();",
            "highlighted": true
          },
          {
            "line": 141,
            "content": "  return user;",
            "highlighted": false
          },
          {
            "line": 142,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 143,
            "content": "",
            "highlighted": false
          },
          {
            "line": 144,
            "content": "// ❌ Aggregation Operations WITHOUT Try-Catch",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-cast-error-no-try-catch-invalid-id",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 140,
      "column": 22,
      "package": "mongoose",
      "function": "findById",
      "contract_clause": "cast-error-no-try-catch-invalid-id",
      "description": "No try-catch block found. CastError with kind: 'ObjectId' - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-findById",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Common when user input is passed directly as ID. Validate ID format before querying.\n",
      "code_snippet": {
        "startLine": 136,
        "endLine": 144,
        "lines": [
          {
            "line": 136,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 137,
            "content": "",
            "highlighted": false
          },
          {
            "line": 138,
            "content": "async function executeWithOrFailMissing(id: string) {",
            "highlighted": false
          },
          {
            "line": 139,
            "content": "  // ❌ No error handling - orFail() will throw but not caught",
            "highlighted": false
          },
          {
            "line": 140,
            "content": "  const user = await User.findById(id).orFail();",
            "highlighted": true
          },
          {
            "line": 141,
            "content": "  return user;",
            "highlighted": false
          },
          {
            "line": 142,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 143,
            "content": "",
            "highlighted": false
          },
          {
            "line": 144,
            "content": "// ❌ Aggregation Operations WITHOUT Try-Catch",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 140,
      "column": 22,
      "package": "mongoose",
      "function": "findById",
      "contract_clause": "connection-error-no-try-catch",
      "description": "No try-catch block found. MongooseError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST handle connection errors",
      "code_snippet": {
        "startLine": 136,
        "endLine": 144,
        "lines": [
          {
            "line": 136,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 137,
            "content": "",
            "highlighted": false
          },
          {
            "line": 138,
            "content": "async function executeWithOrFailMissing(id: string) {",
            "highlighted": false
          },
          {
            "line": 139,
            "content": "  // ❌ No error handling - orFail() will throw but not caught",
            "highlighted": false
          },
          {
            "line": 140,
            "content": "  const user = await User.findById(id).orFail();",
            "highlighted": true
          },
          {
            "line": 141,
            "content": "  return user;",
            "highlighted": false
          },
          {
            "line": 142,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 143,
            "content": "",
            "highlighted": false
          },
          {
            "line": 144,
            "content": "// ❌ Aggregation Operations WITHOUT Try-Catch",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-aggregation-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 148,
      "column": 24,
      "package": "mongoose",
      "function": "aggregate",
      "contract_clause": "aggregation-error-no-try-catch",
      "description": "No try-catch block found. MongooseError or MongoError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-aggregate",
      "suggested_fix": "Caller MUST wrap in try-catch. Aggregation pipelines can fail with complex stage errors.",
      "code_snippet": {
        "startLine": 144,
        "endLine": 152,
        "lines": [
          {
            "line": 144,
            "content": "// ❌ Aggregation Operations WITHOUT Try-Catch",
            "highlighted": false
          },
          {
            "line": 145,
            "content": "",
            "highlighted": false
          },
          {
            "line": 146,
            "content": "async function aggregateUsersMissing() {",
            "highlighted": false
          },
          {
            "line": 147,
            "content": "  // ❌ No error handling",
            "highlighted": false
          },
          {
            "line": 148,
            "content": "  const result = await User.aggregate([",
            "highlighted": true
          },
          {
            "line": 149,
            "content": "    { $match: { active: true } },",
            "highlighted": false
          },
          {
            "line": 150,
            "content": "    { $group: { _id: '$age', count: { $sum: 1 } } }",
            "highlighted": false
          },
          {
            "line": 151,
            "content": "  ]);",
            "highlighted": false
          },
          {
            "line": 152,
            "content": "  return result;",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 157,
      "column": 23,
      "package": "mongoose",
      "function": "countDocuments",
      "contract_clause": "connection-error-no-try-catch",
      "description": "No try-catch block found. MongooseError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-countDocuments",
      "suggested_fix": "Caller MUST wrap in try-catch",
      "code_snippet": {
        "startLine": 153,
        "endLine": 161,
        "lines": [
          {
            "line": 153,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 154,
            "content": "",
            "highlighted": false
          },
          {
            "line": 155,
            "content": "async function countUsersMissing() {",
            "highlighted": false
          },
          {
            "line": 156,
            "content": "  // ❌ No error handling",
            "highlighted": false
          },
          {
            "line": 157,
            "content": "  const count = await User.countDocuments({ active: true });",
            "highlighted": true
          },
          {
            "line": 158,
            "content": "  return count;",
            "highlighted": false
          },
          {
            "line": 159,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 160,
            "content": "",
            "highlighted": false
          },
          {
            "line": 161,
            "content": "async function estimateCountMissing() {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-failed-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 171,
      "column": 9,
      "package": "mongoose",
      "function": "connect",
      "contract_clause": "connection-failed-no-try-catch",
      "description": "No try-catch block found. MongooseError or MongoError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch. Connection failures should stop application startup. Log error details and exit gracefully.\n",
      "code_snippet": {
        "startLine": 167,
        "endLine": 175,
        "lines": [
          {
            "line": 167,
            "content": "// ❌ Connection Operations WITHOUT Try-Catch",
            "highlighted": false
          },
          {
            "line": 168,
            "content": "",
            "highlighted": false
          },
          {
            "line": 169,
            "content": "async function connectToMongoDBMissing() {",
            "highlighted": false
          },
          {
            "line": 170,
            "content": "  // ❌ No error handling - will crash on connection failure",
            "highlighted": false
          },
          {
            "line": 171,
            "content": "  await mongoose.connect('mongodb://localhost:27017/test');",
            "highlighted": true
          },
          {
            "line": 172,
            "content": "  console.log('Connected to MongoDB');",
            "highlighted": false
          },
          {
            "line": 173,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 174,
            "content": "",
            "highlighted": false
          },
          {
            "line": 175,
            "content": "async function closeConnectionMissing() {",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-cast-error-no-try-catch-invalid-id",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 185,
      "column": 10,
      "package": "mongoose",
      "function": "findById",
      "contract_clause": "cast-error-no-try-catch-invalid-id",
      "description": "No try-catch block found. CastError with kind: 'ObjectId' - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-findById",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Common when user input is passed directly as ID. Validate ID format before querying.\n",
      "code_snippet": {
        "startLine": 181,
        "endLine": 189,
        "lines": [
          {
            "line": 181,
            "content": "// ❌ Promise WITHOUT .catch() Handler",
            "highlighted": false
          },
          {
            "line": 182,
            "content": "",
            "highlighted": false
          },
          {
            "line": 183,
            "content": "function findUserWithoutCatch(id: string) {",
            "highlighted": false
          },
          {
            "line": 184,
            "content": "  // ❌ No .catch() handler - unhandled promise rejection",
            "highlighted": false
          },
          {
            "line": 185,
            "content": "  return User.findById(id)",
            "highlighted": true
          },
          {
            "line": 186,
            "content": "    .then(user => {",
            "highlighted": false
          },
          {
            "line": 187,
            "content": "      console.log('User found:', user);",
            "highlighted": false
          },
          {
            "line": 188,
            "content": "      return user;",
            "highlighted": false
          },
          {
            "line": 189,
            "content": "    });",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 185,
      "column": 10,
      "package": "mongoose",
      "function": "findById",
      "contract_clause": "connection-error-no-try-catch",
      "description": "No try-catch block found. MongooseError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST handle connection errors",
      "code_snippet": {
        "startLine": 181,
        "endLine": 189,
        "lines": [
          {
            "line": 181,
            "content": "// ❌ Promise WITHOUT .catch() Handler",
            "highlighted": false
          },
          {
            "line": 182,
            "content": "",
            "highlighted": false
          },
          {
            "line": 183,
            "content": "function findUserWithoutCatch(id: string) {",
            "highlighted": false
          },
          {
            "line": 184,
            "content": "  // ❌ No .catch() handler - unhandled promise rejection",
            "highlighted": false
          },
          {
            "line": 185,
            "content": "  return User.findById(id)",
            "highlighted": true
          },
          {
            "line": 186,
            "content": "    .then(user => {",
            "highlighted": false
          },
          {
            "line": 187,
            "content": "      console.log('User found:', user);",
            "highlighted": false
          },
          {
            "line": 188,
            "content": "      return user;",
            "highlighted": false
          },
          {
            "line": 189,
            "content": "    });",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-validation-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 195,
      "column": 10,
      "package": "mongoose",
      "function": "create",
      "contract_clause": "validation-error-no-try-catch",
      "description": "No try-catch block found. ValidationError with errors object containing field-specific ValidatorErrors - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/validation.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Check error.name === 'ValidationError' and inspect error.errors object. Each field error is accessible via error.errors[fieldName].\n",
      "code_snippet": {
        "startLine": 191,
        "endLine": 199,
        "lines": [
          {
            "line": 191,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 192,
            "content": "",
            "highlighted": false
          },
          {
            "line": 193,
            "content": "function createUserWithoutCatch(data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 194,
            "content": "  // ❌ No .catch() handler - unhandled promise rejection",
            "highlighted": false
          },
          {
            "line": 195,
            "content": "  return User.create(data)",
            "highlighted": true
          },
          {
            "line": 196,
            "content": "    .then(user => {",
            "highlighted": false
          },
          {
            "line": 197,
            "content": "      console.log('User created:', user);",
            "highlighted": false
          },
          {
            "line": 198,
            "content": "      return user;",
            "highlighted": false
          },
          {
            "line": 199,
            "content": "    });",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-duplicate-key-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 195,
      "column": 10,
      "package": "mongoose",
      "function": "create",
      "contract_clause": "duplicate-key-error-no-try-catch",
      "description": "No try-catch block found. MongoError with code: 11000 - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/validation.html#unique-indexes",
      "suggested_fix": "Caller MUST wrap in try-catch and check error.code === 11000. This is NOT a ValidationError - it comes from MongoDB driver. Extract duplicate field from error message or error.keyPattern.\n",
      "code_snippet": {
        "startLine": 191,
        "endLine": 199,
        "lines": [
          {
            "line": 191,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 192,
            "content": "",
            "highlighted": false
          },
          {
            "line": 193,
            "content": "function createUserWithoutCatch(data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 194,
            "content": "  // ❌ No .catch() handler - unhandled promise rejection",
            "highlighted": false
          },
          {
            "line": 195,
            "content": "  return User.create(data)",
            "highlighted": true
          },
          {
            "line": 196,
            "content": "    .then(user => {",
            "highlighted": false
          },
          {
            "line": 197,
            "content": "      console.log('User created:', user);",
            "highlighted": false
          },
          {
            "line": 198,
            "content": "      return user;",
            "highlighted": false
          },
          {
            "line": 199,
            "content": "    });",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 195,
      "column": 10,
      "package": "mongoose",
      "function": "create",
      "contract_clause": "connection-error-no-try-catch",
      "description": "No try-catch block found. MongooseError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST handle connection errors with retry logic",
      "code_snippet": {
        "startLine": 191,
        "endLine": 199,
        "lines": [
          {
            "line": 191,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 192,
            "content": "",
            "highlighted": false
          },
          {
            "line": 193,
            "content": "function createUserWithoutCatch(data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 194,
            "content": "  // ❌ No .catch() handler - unhandled promise rejection",
            "highlighted": false
          },
          {
            "line": 195,
            "content": "  return User.create(data)",
            "highlighted": true
          },
          {
            "line": 196,
            "content": "    .then(user => {",
            "highlighted": false
          },
          {
            "line": 197,
            "content": "      console.log('User created:', user);",
            "highlighted": false
          },
          {
            "line": 198,
            "content": "      return user;",
            "highlighted": false
          },
          {
            "line": 199,
            "content": "    });",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-query-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 207,
      "column": 22,
      "package": "mongoose",
      "function": "exec",
      "contract_clause": "query-error-no-try-catch",
      "description": "No try-catch block found. MongooseError, CastError, or ValidationError depending on failure type - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/api/query.html#query_Query-exec",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). .exec() is the terminal operation for query chains. All query errors surface here.\n",
      "code_snippet": {
        "startLine": 203,
        "endLine": 211,
        "lines": [
          {
            "line": 203,
            "content": "// ❌ Chained Query WITHOUT Try-Catch",
            "highlighted": false
          },
          {
            "line": 204,
            "content": "",
            "highlighted": false
          },
          {
            "line": 205,
            "content": "async function chainedQueryMissing(email: string) {",
            "highlighted": false
          },
          {
            "line": 206,
            "content": "  // ❌ No error handling on chained query",
            "highlighted": false
          },
          {
            "line": 207,
            "content": "  const user = await User.findOne({ email })",
            "highlighted": true
          },
          {
            "line": 208,
            "content": "    .select('name email')",
            "highlighted": false
          },
          {
            "line": 209,
            "content": "    .limit(1)",
            "highlighted": false
          },
          {
            "line": 210,
            "content": "    .exec();",
            "highlighted": false
          },
          {
            "line": 211,
            "content": "  return user;",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 207,
      "column": 22,
      "package": "mongoose",
      "function": "findOne",
      "contract_clause": "connection-error-no-try-catch",
      "description": "No try-catch block found. MongooseError or MongoError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch() to handle connection errors",
      "code_snippet": {
        "startLine": 203,
        "endLine": 211,
        "lines": [
          {
            "line": 203,
            "content": "// ❌ Chained Query WITHOUT Try-Catch",
            "highlighted": false
          },
          {
            "line": 204,
            "content": "",
            "highlighted": false
          },
          {
            "line": 205,
            "content": "async function chainedQueryMissing(email: string) {",
            "highlighted": false
          },
          {
            "line": 206,
            "content": "  // ❌ No error handling on chained query",
            "highlighted": false
          },
          {
            "line": 207,
            "content": "  const user = await User.findOne({ email })",
            "highlighted": true
          },
          {
            "line": 208,
            "content": "    .select('name email')",
            "highlighted": false
          },
          {
            "line": 209,
            "content": "    .limit(1)",
            "highlighted": false
          },
          {
            "line": 210,
            "content": "    .exec();",
            "highlighted": false
          },
          {
            "line": 211,
            "content": "  return user;",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-cast-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 207,
      "column": 22,
      "package": "mongoose",
      "function": "findOne",
      "contract_clause": "cast-error-no-try-catch",
      "description": "No try-catch block found. CastError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/schematypes.html",
      "suggested_fix": "Caller MUST wrap in try-catch to handle type casting errors",
      "code_snippet": {
        "startLine": 203,
        "endLine": 211,
        "lines": [
          {
            "line": 203,
            "content": "// ❌ Chained Query WITHOUT Try-Catch",
            "highlighted": false
          },
          {
            "line": 204,
            "content": "",
            "highlighted": false
          },
          {
            "line": 205,
            "content": "async function chainedQueryMissing(email: string) {",
            "highlighted": false
          },
          {
            "line": 206,
            "content": "  // ❌ No error handling on chained query",
            "highlighted": false
          },
          {
            "line": 207,
            "content": "  const user = await User.findOne({ email })",
            "highlighted": true
          },
          {
            "line": 208,
            "content": "    .select('name email')",
            "highlighted": false
          },
          {
            "line": 209,
            "content": "    .limit(1)",
            "highlighted": false
          },
          {
            "line": 210,
            "content": "    .exec();",
            "highlighted": false
          },
          {
            "line": 211,
            "content": "  return user;",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 238,
      "column": 22,
      "package": "mongoose",
      "function": "findOne",
      "contract_clause": "connection-error-no-try-catch",
      "description": "No try-catch block found. MongooseError or MongoError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch() to handle connection errors",
      "code_snippet": {
        "startLine": 234,
        "endLine": 242,
        "lines": [
          {
            "line": 234,
            "content": "// ❌ Multiple Operations in Sequence WITHOUT Try-Catch",
            "highlighted": false
          },
          {
            "line": 235,
            "content": "",
            "highlighted": false
          },
          {
            "line": 236,
            "content": "async function multipleOperationsMissing(email: string, data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 237,
            "content": "  // ❌ No error handling for either operation",
            "highlighted": false
          },
          {
            "line": 238,
            "content": "  const user = await User.findOne({ email });",
            "highlighted": true
          },
          {
            "line": 239,
            "content": "  if (user) {",
            "highlighted": false
          },
          {
            "line": 240,
            "content": "    await User.updateOne({ _id: user._id }, data);",
            "highlighted": false
          },
          {
            "line": 241,
            "content": "  }",
            "highlighted": false
          },
          {
            "line": 242,
            "content": "  return user;",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-cast-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 238,
      "column": 22,
      "package": "mongoose",
      "function": "findOne",
      "contract_clause": "cast-error-no-try-catch",
      "description": "No try-catch block found. CastError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/schematypes.html",
      "suggested_fix": "Caller MUST wrap in try-catch to handle type casting errors",
      "code_snippet": {
        "startLine": 234,
        "endLine": 242,
        "lines": [
          {
            "line": 234,
            "content": "// ❌ Multiple Operations in Sequence WITHOUT Try-Catch",
            "highlighted": false
          },
          {
            "line": 235,
            "content": "",
            "highlighted": false
          },
          {
            "line": 236,
            "content": "async function multipleOperationsMissing(email: string, data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 237,
            "content": "  // ❌ No error handling for either operation",
            "highlighted": false
          },
          {
            "line": 238,
            "content": "  const user = await User.findOne({ email });",
            "highlighted": true
          },
          {
            "line": 239,
            "content": "  if (user) {",
            "highlighted": false
          },
          {
            "line": 240,
            "content": "    await User.updateOne({ _id: user._id }, data);",
            "highlighted": false
          },
          {
            "line": 241,
            "content": "  }",
            "highlighted": false
          },
          {
            "line": 242,
            "content": "  return user;",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-validation-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 240,
      "column": 11,
      "package": "mongoose",
      "function": "updateOne",
      "contract_clause": "validation-error-no-try-catch",
      "description": "No try-catch block found. ValidationError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/validation.html",
      "suggested_fix": "Caller MUST wrap in try-catch to handle validation errors",
      "code_snippet": {
        "startLine": 236,
        "endLine": 244,
        "lines": [
          {
            "line": 236,
            "content": "async function multipleOperationsMissing(email: string, data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 237,
            "content": "  // ❌ No error handling for either operation",
            "highlighted": false
          },
          {
            "line": 238,
            "content": "  const user = await User.findOne({ email });",
            "highlighted": false
          },
          {
            "line": 239,
            "content": "  if (user) {",
            "highlighted": false
          },
          {
            "line": 240,
            "content": "    await User.updateOne({ _id: user._id }, data);",
            "highlighted": true
          },
          {
            "line": 241,
            "content": "  }",
            "highlighted": false
          },
          {
            "line": 242,
            "content": "  return user;",
            "highlighted": false
          },
          {
            "line": 243,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 244,
            "content": "",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-cast-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 240,
      "column": 11,
      "package": "mongoose",
      "function": "updateOne",
      "contract_clause": "cast-error-no-try-catch",
      "description": "No try-catch block found. CastError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/schematypes.html",
      "suggested_fix": "Caller MUST wrap in try-catch to handle type errors",
      "code_snippet": {
        "startLine": 236,
        "endLine": 244,
        "lines": [
          {
            "line": 236,
            "content": "async function multipleOperationsMissing(email: string, data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 237,
            "content": "  // ❌ No error handling for either operation",
            "highlighted": false
          },
          {
            "line": 238,
            "content": "  const user = await User.findOne({ email });",
            "highlighted": false
          },
          {
            "line": 239,
            "content": "  if (user) {",
            "highlighted": false
          },
          {
            "line": 240,
            "content": "    await User.updateOne({ _id: user._id }, data);",
            "highlighted": true
          },
          {
            "line": 241,
            "content": "  }",
            "highlighted": false
          },
          {
            "line": 242,
            "content": "  return user;",
            "highlighted": false
          },
          {
            "line": 243,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 244,
            "content": "",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 240,
      "column": 11,
      "package": "mongoose",
      "function": "updateOne",
      "contract_clause": "connection-error-no-try-catch",
      "description": "No try-catch block found. MongooseError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST handle connection errors",
      "code_snippet": {
        "startLine": 236,
        "endLine": 244,
        "lines": [
          {
            "line": 236,
            "content": "async function multipleOperationsMissing(email: string, data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 237,
            "content": "  // ❌ No error handling for either operation",
            "highlighted": false
          },
          {
            "line": 238,
            "content": "  const user = await User.findOne({ email });",
            "highlighted": false
          },
          {
            "line": 239,
            "content": "  if (user) {",
            "highlighted": false
          },
          {
            "line": 240,
            "content": "    await User.updateOne({ _id: user._id }, data);",
            "highlighted": true
          },
          {
            "line": 241,
            "content": "  }",
            "highlighted": false
          },
          {
            "line": 242,
            "content": "  return user;",
            "highlighted": false
          },
          {
            "line": 243,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 244,
            "content": "",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-cast-error-no-try-catch-invalid-id",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 249,
      "column": 22,
      "package": "mongoose",
      "function": "findById",
      "contract_clause": "cast-error-no-try-catch-invalid-id",
      "description": "No try-catch block found. CastError with kind: 'ObjectId' - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-findById",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Common when user input is passed directly as ID. Validate ID format before querying.\n",
      "code_snippet": {
        "startLine": 245,
        "endLine": 253,
        "lines": [
          {
            "line": 245,
            "content": "// ❌ Nested Operations WITHOUT Try-Catch",
            "highlighted": false
          },
          {
            "line": 246,
            "content": "",
            "highlighted": false
          },
          {
            "line": 247,
            "content": "async function nestedOperationsMissing(userId: string) {",
            "highlighted": false
          },
          {
            "line": 248,
            "content": "  // ❌ No error handling",
            "highlighted": false
          },
          {
            "line": 249,
            "content": "  const user = await User.findById(userId);",
            "highlighted": true
          },
          {
            "line": 250,
            "content": "",
            "highlighted": false
          },
          {
            "line": 251,
            "content": "  if (user) {",
            "highlighted": false
          },
          {
            "line": 252,
            "content": "    // ❌ No error handling on nested operation",
            "highlighted": false
          },
          {
            "line": 253,
            "content": "    const count = await User.countDocuments({ age: user.age });",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 249,
      "column": 22,
      "package": "mongoose",
      "function": "findById",
      "contract_clause": "connection-error-no-try-catch",
      "description": "No try-catch block found. MongooseError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST handle connection errors",
      "code_snippet": {
        "startLine": 245,
        "endLine": 253,
        "lines": [
          {
            "line": 245,
            "content": "// ❌ Nested Operations WITHOUT Try-Catch",
            "highlighted": false
          },
          {
            "line": 246,
            "content": "",
            "highlighted": false
          },
          {
            "line": 247,
            "content": "async function nestedOperationsMissing(userId: string) {",
            "highlighted": false
          },
          {
            "line": 248,
            "content": "  // ❌ No error handling",
            "highlighted": false
          },
          {
            "line": 249,
            "content": "  const user = await User.findById(userId);",
            "highlighted": true
          },
          {
            "line": 250,
            "content": "",
            "highlighted": false
          },
          {
            "line": 251,
            "content": "  if (user) {",
            "highlighted": false
          },
          {
            "line": 252,
            "content": "    // ❌ No error handling on nested operation",
            "highlighted": false
          },
          {
            "line": 253,
            "content": "    const count = await User.countDocuments({ age: user.age });",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
      "line": 253,
      "column": 25,
      "package": "mongoose",
      "function": "countDocuments",
      "contract_clause": "connection-error-no-try-catch",
      "description": "No try-catch block found. MongooseError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-countDocuments",
      "suggested_fix": "Caller MUST wrap in try-catch",
      "code_snippet": {
        "startLine": 249,
        "endLine": 257,
        "lines": [
          {
            "line": 249,
            "content": "  const user = await User.findById(userId);",
            "highlighted": false
          },
          {
            "line": 250,
            "content": "",
            "highlighted": false
          },
          {
            "line": 251,
            "content": "  if (user) {",
            "highlighted": false
          },
          {
            "line": 252,
            "content": "    // ❌ No error handling on nested operation",
            "highlighted": false
          },
          {
            "line": 253,
            "content": "    const count = await User.countDocuments({ age: user.age });",
            "highlighted": true
          },
          {
            "line": 254,
            "content": "    return { user, count };",
            "highlighted": false
          },
          {
            "line": 255,
            "content": "  }",
            "highlighted": false
          },
          {
            "line": 256,
            "content": "",
            "highlighted": false
          },
          {
            "line": 257,
            "content": "  return null;",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-cast-error-no-try-catch-invalid-id",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/proper-error-handling.ts",
      "line": 257,
      "column": 10,
      "package": "mongoose",
      "function": "findById",
      "contract_clause": "cast-error-no-try-catch-invalid-id",
      "description": "No try-catch block found. CastError with kind: 'ObjectId' - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-findById",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Common when user input is passed directly as ID. Validate ID format before querying.\n",
      "code_snippet": {
        "startLine": 253,
        "endLine": 261,
        "lines": [
          {
            "line": 253,
            "content": "",
            "highlighted": false
          },
          {
            "line": 254,
            "content": "// ✅ Promise .catch() Pattern (Alternative to Try-Catch)",
            "highlighted": false
          },
          {
            "line": 255,
            "content": "",
            "highlighted": false
          },
          {
            "line": 256,
            "content": "function findUserWithCatch(id: string) {",
            "highlighted": false
          },
          {
            "line": 257,
            "content": "  return User.findById(id)",
            "highlighted": true
          },
          {
            "line": 258,
            "content": "    .then(user => {",
            "highlighted": false
          },
          {
            "line": 259,
            "content": "      console.log('User found:', user);",
            "highlighted": false
          },
          {
            "line": 260,
            "content": "      return user;",
            "highlighted": false
          },
          {
            "line": 261,
            "content": "    })",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/proper-error-handling.ts",
      "line": 257,
      "column": 10,
      "package": "mongoose",
      "function": "findById",
      "contract_clause": "connection-error-no-try-catch",
      "description": "No try-catch block found. MongooseError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST handle connection errors",
      "code_snippet": {
        "startLine": 253,
        "endLine": 261,
        "lines": [
          {
            "line": 253,
            "content": "",
            "highlighted": false
          },
          {
            "line": 254,
            "content": "// ✅ Promise .catch() Pattern (Alternative to Try-Catch)",
            "highlighted": false
          },
          {
            "line": 255,
            "content": "",
            "highlighted": false
          },
          {
            "line": 256,
            "content": "function findUserWithCatch(id: string) {",
            "highlighted": false
          },
          {
            "line": 257,
            "content": "  return User.findById(id)",
            "highlighted": true
          },
          {
            "line": 258,
            "content": "    .then(user => {",
            "highlighted": false
          },
          {
            "line": 259,
            "content": "      console.log('User found:', user);",
            "highlighted": false
          },
          {
            "line": 260,
            "content": "      return user;",
            "highlighted": false
          },
          {
            "line": 261,
            "content": "    })",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-validation-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/proper-error-handling.ts",
      "line": 269,
      "column": 10,
      "package": "mongoose",
      "function": "create",
      "contract_clause": "validation-error-no-try-catch",
      "description": "No try-catch block found. ValidationError with errors object containing field-specific ValidatorErrors - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/validation.html",
      "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Check error.name === 'ValidationError' and inspect error.errors object. Each field error is accessible via error.errors[fieldName].\n",
      "code_snippet": {
        "startLine": 265,
        "endLine": 273,
        "lines": [
          {
            "line": 265,
            "content": "    });",
            "highlighted": false
          },
          {
            "line": 266,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 267,
            "content": "",
            "highlighted": false
          },
          {
            "line": 268,
            "content": "function createUserWithCatch(data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 269,
            "content": "  return User.create(data)",
            "highlighted": true
          },
          {
            "line": 270,
            "content": "    .then(user => {",
            "highlighted": false
          },
          {
            "line": 271,
            "content": "      console.log('User created:', user);",
            "highlighted": false
          },
          {
            "line": 272,
            "content": "      return user;",
            "highlighted": false
          },
          {
            "line": 273,
            "content": "    })",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-duplicate-key-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/proper-error-handling.ts",
      "line": 269,
      "column": 10,
      "package": "mongoose",
      "function": "create",
      "contract_clause": "duplicate-key-error-no-try-catch",
      "description": "No try-catch block found. MongoError with code: 11000 - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/validation.html#unique-indexes",
      "suggested_fix": "Caller MUST wrap in try-catch and check error.code === 11000. This is NOT a ValidationError - it comes from MongoDB driver. Extract duplicate field from error message or error.keyPattern.\n",
      "code_snippet": {
        "startLine": 265,
        "endLine": 273,
        "lines": [
          {
            "line": 265,
            "content": "    });",
            "highlighted": false
          },
          {
            "line": 266,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 267,
            "content": "",
            "highlighted": false
          },
          {
            "line": 268,
            "content": "function createUserWithCatch(data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 269,
            "content": "  return User.create(data)",
            "highlighted": true
          },
          {
            "line": 270,
            "content": "    .then(user => {",
            "highlighted": false
          },
          {
            "line": 271,
            "content": "      console.log('User created:', user);",
            "highlighted": false
          },
          {
            "line": 272,
            "content": "      return user;",
            "highlighted": false
          },
          {
            "line": 273,
            "content": "    })",
            "highlighted": false
          }
        ]
      }
    },
    {
      "id": "mongoose-connection-error-no-try-catch",
      "severity": "error",
      "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/proper-error-handling.ts",
      "line": 269,
      "column": 10,
      "package": "mongoose",
      "function": "create",
      "contract_clause": "connection-error-no-try-catch",
      "description": "No try-catch block found. MongooseError - this will crash the application.",
      "source_doc": "https://mongoosejs.com/docs/connections.html",
      "suggested_fix": "Caller MUST handle connection errors with retry logic",
      "code_snippet": {
        "startLine": 265,
        "endLine": 273,
        "lines": [
          {
            "line": 265,
            "content": "    });",
            "highlighted": false
          },
          {
            "line": 266,
            "content": "}",
            "highlighted": false
          },
          {
            "line": 267,
            "content": "",
            "highlighted": false
          },
          {
            "line": 268,
            "content": "function createUserWithCatch(data: Partial<IUser>) {",
            "highlighted": false
          },
          {
            "line": 269,
            "content": "  return User.create(data)",
            "highlighted": true
          },
          {
            "line": 270,
            "content": "    .then(user => {",
            "highlighted": false
          },
          {
            "line": 271,
            "content": "      console.log('User created:', user);",
            "highlighted": false
          },
          {
            "line": 272,
            "content": "      return user;",
            "highlighted": false
          },
          {
            "line": 273,
            "content": "    })",
            "highlighted": false
          }
        ]
      }
    }
  ],
  "summary": {
    "total_violations": 120,
    "error_count": 120,
    "warning_count": 0,
    "info_count": 0,
    "passed": false
  },
  "package_discovery": {
    "total": 13,
    "withContracts": 2,
    "withoutContracts": 11,
    "packages": [
      {
        "name": "mongoose",
        "version": "unknown",
        "source": "import",
        "hasContract": true,
        "contractVersion": "1.0.0",
        "usedIn": [
          "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/proper-error-handling.ts"
        ]
      },
      {
        "name": "typescript",
        "version": "^5.3.3",
        "source": "package.json",
        "hasContract": true,
        "contractVersion": "1.0.0",
        "usedIn": []
      },
      {
        "name": "@behavioral-contracts/corpus",
        "version": "^1.0.0",
        "source": "package.json",
        "hasContract": false,
        "usedIn": []
      },
      {
        "name": "@types/node",
        "version": "^20.11.0",
        "source": "package.json",
        "hasContract": false,
        "usedIn": []
      },
      {
        "name": "@typescript-eslint/eslint-plugin",
        "version": "^6.19.0",
        "source": "package.json",
        "hasContract": false,
        "usedIn": []
      },
      {
        "name": "@typescript-eslint/parser",
        "version": "^6.19.0",
        "source": "package.json",
        "hasContract": false,
        "usedIn": []
      },
      {
        "name": "ajv",
        "version": "^8.12.0",
        "source": "package.json",
        "hasContract": false,
        "usedIn": []
      },
      {
        "name": "chalk",
        "version": "^5.3.0",
        "source": "package.json",
        "hasContract": false,
        "usedIn": []
      },
      {
        "name": "commander",
        "version": "^12.0.0",
        "source": "package.json",
        "hasContract": false,
        "usedIn": []
      },
      {
        "name": "eslint",
        "version": "^8.56.0",
        "source": "package.json",
        "hasContract": false,
        "usedIn": []
      },
      {
        "name": "glob",
        "version": "^10.3.10",
        "source": "package.json",
        "hasContract": false,
        "usedIn": []
      },
      {
        "name": "vitest",
        "version": "^1.2.0",
        "source": "package.json",
        "hasContract": false,
        "usedIn": []
      },
      {
        "name": "yaml",
        "version": "^2.3.4",
        "source": "package.json",
        "hasContract": false,
        "usedIn": []
      }
    ]
  },
  "violations_by_package": {
    "mongoose": {
      "total": 120,
      "errors": 120,
      "warnings": 0,
      "info": 0,
      "violations": [
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 74,
          "column": 3,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'saveDocumentMissing' contains unprotected await expression. await user.save()... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 70,
            "endLine": 78,
            "lines": [
              {
                "line": 70,
                "content": "",
                "highlighted": false
              },
              {
                "line": 71,
                "content": "async function saveDocumentMissing(email: string, name: string, age: number) {",
                "highlighted": false
              },
              {
                "line": 72,
                "content": "  const user = new User({ email, name, age });",
                "highlighted": false
              },
              {
                "line": 73,
                "content": "  // ❌ No try-catch - will crash on validation error or duplicate key",
                "highlighted": false
              },
              {
                "line": 74,
                "content": "  await user.save();",
                "highlighted": true
              },
              {
                "line": 75,
                "content": "  return user;",
                "highlighted": false
              },
              {
                "line": 76,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 77,
                "content": "",
                "highlighted": false
              },
              {
                "line": 78,
                "content": "async function validateDocumentMissing(data: Partial<IUser>) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 81,
          "column": 3,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'validateDocumentMissing' contains unprotected await expression. await user.validate()... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 77,
            "endLine": 85,
            "lines": [
              {
                "line": 77,
                "content": "",
                "highlighted": false
              },
              {
                "line": 78,
                "content": "async function validateDocumentMissing(data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 79,
                "content": "  const user = new User(data);",
                "highlighted": false
              },
              {
                "line": 80,
                "content": "  // ❌ No try-catch - will crash on validation error",
                "highlighted": false
              },
              {
                "line": 81,
                "content": "  await user.validate();",
                "highlighted": true
              },
              {
                "line": 82,
                "content": "  return true;",
                "highlighted": false
              },
              {
                "line": 83,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 84,
                "content": "",
                "highlighted": false
              },
              {
                "line": 85,
                "content": "async function deleteDocumentMissing(id: string) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 87,
          "column": 16,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'deleteDocumentMissing' contains unprotected await expression. await User.findById(id)... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 83,
            "endLine": 91,
            "lines": [
              {
                "line": 83,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 84,
                "content": "",
                "highlighted": false
              },
              {
                "line": 85,
                "content": "async function deleteDocumentMissing(id: string) {",
                "highlighted": false
              },
              {
                "line": 86,
                "content": "  // ❌ No try-catch on findById",
                "highlighted": false
              },
              {
                "line": 87,
                "content": "  const user = await User.findById(id);",
                "highlighted": true
              },
              {
                "line": 88,
                "content": "  if (user) {",
                "highlighted": false
              },
              {
                "line": 89,
                "content": "    // ❌ No try-catch on deleteOne",
                "highlighted": false
              },
              {
                "line": 90,
                "content": "    await user.deleteOne();",
                "highlighted": false
              },
              {
                "line": 91,
                "content": "  }",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 90,
          "column": 5,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'deleteDocumentMissing' contains unprotected await expression. await user.deleteOne()... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 86,
            "endLine": 94,
            "lines": [
              {
                "line": 86,
                "content": "  // ❌ No try-catch on findById",
                "highlighted": false
              },
              {
                "line": 87,
                "content": "  const user = await User.findById(id);",
                "highlighted": false
              },
              {
                "line": 88,
                "content": "  if (user) {",
                "highlighted": false
              },
              {
                "line": 89,
                "content": "    // ❌ No try-catch on deleteOne",
                "highlighted": false
              },
              {
                "line": 90,
                "content": "    await user.deleteOne();",
                "highlighted": true
              },
              {
                "line": 91,
                "content": "  }",
                "highlighted": false
              },
              {
                "line": 92,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 93,
                "content": "",
                "highlighted": false
              },
              {
                "line": 94,
                "content": "// NOTE: Document.remove() was deprecated in mongoose >= 7.x",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 101,
          "column": 16,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'createAndUpdateMissing' contains unprotected await expression. await User.create({ email, name: 'Test', age: 25 }... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 97,
            "endLine": 105,
            "lines": [
              {
                "line": 97,
                "content": "// ❌ Multiple Document Operations in Sequence",
                "highlighted": false
              },
              {
                "line": 98,
                "content": "",
                "highlighted": false
              },
              {
                "line": 99,
                "content": "async function createAndUpdateMissing(email: string) {",
                "highlighted": false
              },
              {
                "line": 100,
                "content": "  // ❌ No try-catch on create",
                "highlighted": false
              },
              {
                "line": 101,
                "content": "  const user = await User.create({ email, name: 'Test', age: 25 });",
                "highlighted": true
              },
              {
                "line": 102,
                "content": "",
                "highlighted": false
              },
              {
                "line": 103,
                "content": "  // Modify the document",
                "highlighted": false
              },
              {
                "line": 104,
                "content": "  user.name = 'Updated';",
                "highlighted": false
              },
              {
                "line": 105,
                "content": "",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 107,
          "column": 3,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'createAndUpdateMissing' contains unprotected await expression. await user.save()... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 103,
            "endLine": 111,
            "lines": [
              {
                "line": 103,
                "content": "  // Modify the document",
                "highlighted": false
              },
              {
                "line": 104,
                "content": "  user.name = 'Updated';",
                "highlighted": false
              },
              {
                "line": 105,
                "content": "",
                "highlighted": false
              },
              {
                "line": 106,
                "content": "  // ❌ No try-catch on save",
                "highlighted": false
              },
              {
                "line": 107,
                "content": "  await user.save();",
                "highlighted": true
              },
              {
                "line": 108,
                "content": "",
                "highlighted": false
              },
              {
                "line": 109,
                "content": "  return user;",
                "highlighted": false
              },
              {
                "line": 110,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 111,
                "content": "",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 114,
          "column": 16,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'findAndModifyMissing' contains unprotected await expression. await User.findById(id)... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 110,
            "endLine": 118,
            "lines": [
              {
                "line": 110,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 111,
                "content": "",
                "highlighted": false
              },
              {
                "line": 112,
                "content": "async function findAndModifyMissing(id: string) {",
                "highlighted": false
              },
              {
                "line": 113,
                "content": "  // ❌ No try-catch on findById",
                "highlighted": false
              },
              {
                "line": 114,
                "content": "  const user = await User.findById(id);",
                "highlighted": true
              },
              {
                "line": 115,
                "content": "",
                "highlighted": false
              },
              {
                "line": 116,
                "content": "  if (user) {",
                "highlighted": false
              },
              {
                "line": 117,
                "content": "    user.age = 30;",
                "highlighted": false
              },
              {
                "line": 118,
                "content": "    // ❌ No try-catch on save",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 119,
          "column": 5,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'findAndModifyMissing' contains unprotected await expression. await user.save()... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 115,
            "endLine": 123,
            "lines": [
              {
                "line": 115,
                "content": "",
                "highlighted": false
              },
              {
                "line": 116,
                "content": "  if (user) {",
                "highlighted": false
              },
              {
                "line": 117,
                "content": "    user.age = 30;",
                "highlighted": false
              },
              {
                "line": 118,
                "content": "    // ❌ No try-catch on save",
                "highlighted": false
              },
              {
                "line": 119,
                "content": "    await user.save();",
                "highlighted": true
              },
              {
                "line": 120,
                "content": "  }",
                "highlighted": false
              },
              {
                "line": 121,
                "content": "",
                "highlighted": false
              },
              {
                "line": 122,
                "content": "  return user;",
                "highlighted": false
              },
              {
                "line": 123,
                "content": "}",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 160,
          "column": 12,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'findById' contains unprotected await expression. await User.findById(id)... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 156,
            "endLine": 164,
            "lines": [
              {
                "line": 156,
                "content": "  // ❌ No try-catch in class methods",
                "highlighted": false
              },
              {
                "line": 157,
                "content": "",
                "highlighted": false
              },
              {
                "line": 158,
                "content": "  async findById(id: string) {",
                "highlighted": false
              },
              {
                "line": 159,
                "content": "    // ❌ No error handling",
                "highlighted": false
              },
              {
                "line": 160,
                "content": "    return await User.findById(id);",
                "highlighted": true
              },
              {
                "line": 161,
                "content": "  }",
                "highlighted": false
              },
              {
                "line": 162,
                "content": "",
                "highlighted": false
              },
              {
                "line": 163,
                "content": "  async create(data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 164,
                "content": "    // ❌ No error handling",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 166,
          "column": 5,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'create' contains unprotected await expression. await user.save()... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 162,
            "endLine": 170,
            "lines": [
              {
                "line": 162,
                "content": "",
                "highlighted": false
              },
              {
                "line": 163,
                "content": "  async create(data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 164,
                "content": "    // ❌ No error handling",
                "highlighted": false
              },
              {
                "line": 165,
                "content": "    const user = new User(data);",
                "highlighted": false
              },
              {
                "line": 166,
                "content": "    await user.save();",
                "highlighted": true
              },
              {
                "line": 167,
                "content": "    return user;",
                "highlighted": false
              },
              {
                "line": 168,
                "content": "  }",
                "highlighted": false
              },
              {
                "line": 169,
                "content": "",
                "highlighted": false
              },
              {
                "line": 170,
                "content": "  async update(id: string, data: Partial<IUser>) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 172,
          "column": 18,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'update' contains unprotected await expression. await User.findById(id)... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 168,
            "endLine": 176,
            "lines": [
              {
                "line": 168,
                "content": "  }",
                "highlighted": false
              },
              {
                "line": 169,
                "content": "",
                "highlighted": false
              },
              {
                "line": 170,
                "content": "  async update(id: string, data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 171,
                "content": "    // ❌ No error handling",
                "highlighted": false
              },
              {
                "line": 172,
                "content": "    const user = await User.findById(id);",
                "highlighted": true
              },
              {
                "line": 173,
                "content": "    if (user) {",
                "highlighted": false
              },
              {
                "line": 174,
                "content": "      Object.assign(user, data);",
                "highlighted": false
              },
              {
                "line": 175,
                "content": "      await user.save();",
                "highlighted": false
              },
              {
                "line": 176,
                "content": "    }",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 175,
          "column": 7,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'update' contains unprotected await expression. await user.save()... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 171,
            "endLine": 179,
            "lines": [
              {
                "line": 171,
                "content": "    // ❌ No error handling",
                "highlighted": false
              },
              {
                "line": 172,
                "content": "    const user = await User.findById(id);",
                "highlighted": false
              },
              {
                "line": 173,
                "content": "    if (user) {",
                "highlighted": false
              },
              {
                "line": 174,
                "content": "      Object.assign(user, data);",
                "highlighted": false
              },
              {
                "line": 175,
                "content": "      await user.save();",
                "highlighted": true
              },
              {
                "line": 176,
                "content": "    }",
                "highlighted": false
              },
              {
                "line": 177,
                "content": "    return user;",
                "highlighted": false
              },
              {
                "line": 178,
                "content": "  }",
                "highlighted": false
              },
              {
                "line": 179,
                "content": "",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 182,
          "column": 18,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'delete' contains unprotected await expression. await User.findById(id)... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 178,
            "endLine": 186,
            "lines": [
              {
                "line": 178,
                "content": "  }",
                "highlighted": false
              },
              {
                "line": 179,
                "content": "",
                "highlighted": false
              },
              {
                "line": 180,
                "content": "  async delete(id: string) {",
                "highlighted": false
              },
              {
                "line": 181,
                "content": "    // ❌ No error handling",
                "highlighted": false
              },
              {
                "line": 182,
                "content": "    const user = await User.findById(id);",
                "highlighted": true
              },
              {
                "line": 183,
                "content": "    if (user) {",
                "highlighted": false
              },
              {
                "line": 184,
                "content": "      await user.deleteOne();",
                "highlighted": false
              },
              {
                "line": 185,
                "content": "    }",
                "highlighted": false
              },
              {
                "line": 186,
                "content": "  }",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 184,
          "column": 7,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'delete' contains unprotected await expression. await user.deleteOne()... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 180,
            "endLine": 188,
            "lines": [
              {
                "line": 180,
                "content": "  async delete(id: string) {",
                "highlighted": false
              },
              {
                "line": 181,
                "content": "    // ❌ No error handling",
                "highlighted": false
              },
              {
                "line": 182,
                "content": "    const user = await User.findById(id);",
                "highlighted": false
              },
              {
                "line": 183,
                "content": "    if (user) {",
                "highlighted": false
              },
              {
                "line": 184,
                "content": "      await user.deleteOne();",
                "highlighted": true
              },
              {
                "line": 185,
                "content": "    }",
                "highlighted": false
              },
              {
                "line": 186,
                "content": "  }",
                "highlighted": false
              },
              {
                "line": 187,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 188,
                "content": "",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 245,
          "column": 16,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'middlewareHandlerMissing' contains unprotected await expression. await User.findById(id)... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 241,
            "endLine": 249,
            "lines": [
              {
                "line": 241,
                "content": "async function middlewareHandlerMissing(req: any, res: any) {",
                "highlighted": false
              },
              {
                "line": 242,
                "content": "  const { id } = req.params;",
                "highlighted": false
              },
              {
                "line": 243,
                "content": "",
                "highlighted": false
              },
              {
                "line": 244,
                "content": "  // ❌ No try-catch - will crash the server",
                "highlighted": false
              },
              {
                "line": 245,
                "content": "  const user = await User.findById(id);",
                "highlighted": true
              },
              {
                "line": 246,
                "content": "",
                "highlighted": false
              },
              {
                "line": 247,
                "content": "  res.json(user);",
                "highlighted": false
              },
              {
                "line": 248,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 249,
                "content": "",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 254,
          "column": 16,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'createUserHandlerMissing' contains unprotected await expression. await User.create(data)... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 250,
            "endLine": 258,
            "lines": [
              {
                "line": 250,
                "content": "async function createUserHandlerMissing(req: any, res: any) {",
                "highlighted": false
              },
              {
                "line": 251,
                "content": "  const data = req.body;",
                "highlighted": false
              },
              {
                "line": 252,
                "content": "",
                "highlighted": false
              },
              {
                "line": 253,
                "content": "  // ❌ No try-catch",
                "highlighted": false
              },
              {
                "line": 254,
                "content": "  const user = await User.create(data);",
                "highlighted": true
              },
              {
                "line": 255,
                "content": "",
                "highlighted": false
              },
              {
                "line": 256,
                "content": "  res.json(user);",
                "highlighted": false
              },
              {
                "line": 257,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 258,
                "content": "",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 290,
          "column": 16,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'complexOperationMissing' contains unprotected await expression. await User.findById(userId)... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 286,
            "endLine": 294,
            "lines": [
              {
                "line": 286,
                "content": "// ❌ Complex Patterns WITHOUT Try-Catch",
                "highlighted": false
              },
              {
                "line": 287,
                "content": "",
                "highlighted": false
              },
              {
                "line": 288,
                "content": "async function complexOperationMissing(userId: string) {",
                "highlighted": false
              },
              {
                "line": 289,
                "content": "  // ❌ No try-catch on first operation",
                "highlighted": false
              },
              {
                "line": 290,
                "content": "  const user = await User.findById(userId);",
                "highlighted": true
              },
              {
                "line": 291,
                "content": "",
                "highlighted": false
              },
              {
                "line": 292,
                "content": "  if (user) {",
                "highlighted": false
              },
              {
                "line": 293,
                "content": "    user.active = false;",
                "highlighted": false
              },
              {
                "line": 294,
                "content": "    // ❌ No try-catch on save",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 295,
          "column": 5,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'complexOperationMissing' contains unprotected await expression. await user.save()... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 291,
            "endLine": 299,
            "lines": [
              {
                "line": 291,
                "content": "",
                "highlighted": false
              },
              {
                "line": 292,
                "content": "  if (user) {",
                "highlighted": false
              },
              {
                "line": 293,
                "content": "    user.active = false;",
                "highlighted": false
              },
              {
                "line": 294,
                "content": "    // ❌ No try-catch on save",
                "highlighted": false
              },
              {
                "line": 295,
                "content": "    await user.save();",
                "highlighted": true
              },
              {
                "line": 296,
                "content": "",
                "highlighted": false
              },
              {
                "line": 297,
                "content": "    // ❌ No try-catch on countDocuments",
                "highlighted": false
              },
              {
                "line": 298,
                "content": "    const inactiveCount = await User.countDocuments({ active: false });",
                "highlighted": false
              },
              {
                "line": 299,
                "content": "",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 298,
          "column": 27,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'complexOperationMissing' contains unprotected await expression. await User.countDocuments({ active: false })... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 294,
            "endLine": 302,
            "lines": [
              {
                "line": 294,
                "content": "    // ❌ No try-catch on save",
                "highlighted": false
              },
              {
                "line": 295,
                "content": "    await user.save();",
                "highlighted": false
              },
              {
                "line": 296,
                "content": "",
                "highlighted": false
              },
              {
                "line": 297,
                "content": "    // ❌ No try-catch on countDocuments",
                "highlighted": false
              },
              {
                "line": 298,
                "content": "    const inactiveCount = await User.countDocuments({ active: false });",
                "highlighted": true
              },
              {
                "line": 299,
                "content": "",
                "highlighted": false
              },
              {
                "line": 300,
                "content": "    return { user, inactiveCount };",
                "highlighted": false
              },
              {
                "line": 301,
                "content": "  }",
                "highlighted": false
              },
              {
                "line": 302,
                "content": "",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-cast-error-no-try-catch-invalid-id",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 87,
          "column": 22,
          "package": "mongoose",
          "function": "findById",
          "contract_clause": "cast-error-no-try-catch-invalid-id",
          "description": "No try-catch block found. CastError with kind: 'ObjectId' - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-findById",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Common when user input is passed directly as ID. Validate ID format before querying.\n",
          "code_snippet": {
            "startLine": 83,
            "endLine": 91,
            "lines": [
              {
                "line": 83,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 84,
                "content": "",
                "highlighted": false
              },
              {
                "line": 85,
                "content": "async function deleteDocumentMissing(id: string) {",
                "highlighted": false
              },
              {
                "line": 86,
                "content": "  // ❌ No try-catch on findById",
                "highlighted": false
              },
              {
                "line": 87,
                "content": "  const user = await User.findById(id);",
                "highlighted": true
              },
              {
                "line": 88,
                "content": "  if (user) {",
                "highlighted": false
              },
              {
                "line": 89,
                "content": "    // ❌ No try-catch on deleteOne",
                "highlighted": false
              },
              {
                "line": 90,
                "content": "    await user.deleteOne();",
                "highlighted": false
              },
              {
                "line": 91,
                "content": "  }",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 87,
          "column": 22,
          "package": "mongoose",
          "function": "findById",
          "contract_clause": "connection-error-no-try-catch",
          "description": "No try-catch block found. MongooseError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST handle connection errors",
          "code_snippet": {
            "startLine": 83,
            "endLine": 91,
            "lines": [
              {
                "line": 83,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 84,
                "content": "",
                "highlighted": false
              },
              {
                "line": 85,
                "content": "async function deleteDocumentMissing(id: string) {",
                "highlighted": false
              },
              {
                "line": 86,
                "content": "  // ❌ No try-catch on findById",
                "highlighted": false
              },
              {
                "line": 87,
                "content": "  const user = await User.findById(id);",
                "highlighted": true
              },
              {
                "line": 88,
                "content": "  if (user) {",
                "highlighted": false
              },
              {
                "line": 89,
                "content": "    // ❌ No try-catch on deleteOne",
                "highlighted": false
              },
              {
                "line": 90,
                "content": "    await user.deleteOne();",
                "highlighted": false
              },
              {
                "line": 91,
                "content": "  }",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-validation-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 101,
          "column": 22,
          "package": "mongoose",
          "function": "create",
          "contract_clause": "validation-error-no-try-catch",
          "description": "No try-catch block found. ValidationError with errors object containing field-specific ValidatorErrors - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/validation.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Check error.name === 'ValidationError' and inspect error.errors object. Each field error is accessible via error.errors[fieldName].\n",
          "code_snippet": {
            "startLine": 97,
            "endLine": 105,
            "lines": [
              {
                "line": 97,
                "content": "// ❌ Multiple Document Operations in Sequence",
                "highlighted": false
              },
              {
                "line": 98,
                "content": "",
                "highlighted": false
              },
              {
                "line": 99,
                "content": "async function createAndUpdateMissing(email: string) {",
                "highlighted": false
              },
              {
                "line": 100,
                "content": "  // ❌ No try-catch on create",
                "highlighted": false
              },
              {
                "line": 101,
                "content": "  const user = await User.create({ email, name: 'Test', age: 25 });",
                "highlighted": true
              },
              {
                "line": 102,
                "content": "",
                "highlighted": false
              },
              {
                "line": 103,
                "content": "  // Modify the document",
                "highlighted": false
              },
              {
                "line": 104,
                "content": "  user.name = 'Updated';",
                "highlighted": false
              },
              {
                "line": 105,
                "content": "",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-duplicate-key-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 101,
          "column": 22,
          "package": "mongoose",
          "function": "create",
          "contract_clause": "duplicate-key-error-no-try-catch",
          "description": "No try-catch block found. MongoError with code: 11000 - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/validation.html#unique-indexes",
          "suggested_fix": "Caller MUST wrap in try-catch and check error.code === 11000. This is NOT a ValidationError - it comes from MongoDB driver. Extract duplicate field from error message or error.keyPattern.\n",
          "code_snippet": {
            "startLine": 97,
            "endLine": 105,
            "lines": [
              {
                "line": 97,
                "content": "// ❌ Multiple Document Operations in Sequence",
                "highlighted": false
              },
              {
                "line": 98,
                "content": "",
                "highlighted": false
              },
              {
                "line": 99,
                "content": "async function createAndUpdateMissing(email: string) {",
                "highlighted": false
              },
              {
                "line": 100,
                "content": "  // ❌ No try-catch on create",
                "highlighted": false
              },
              {
                "line": 101,
                "content": "  const user = await User.create({ email, name: 'Test', age: 25 });",
                "highlighted": true
              },
              {
                "line": 102,
                "content": "",
                "highlighted": false
              },
              {
                "line": 103,
                "content": "  // Modify the document",
                "highlighted": false
              },
              {
                "line": 104,
                "content": "  user.name = 'Updated';",
                "highlighted": false
              },
              {
                "line": 105,
                "content": "",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 101,
          "column": 22,
          "package": "mongoose",
          "function": "create",
          "contract_clause": "connection-error-no-try-catch",
          "description": "No try-catch block found. MongooseError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST handle connection errors with retry logic",
          "code_snippet": {
            "startLine": 97,
            "endLine": 105,
            "lines": [
              {
                "line": 97,
                "content": "// ❌ Multiple Document Operations in Sequence",
                "highlighted": false
              },
              {
                "line": 98,
                "content": "",
                "highlighted": false
              },
              {
                "line": 99,
                "content": "async function createAndUpdateMissing(email: string) {",
                "highlighted": false
              },
              {
                "line": 100,
                "content": "  // ❌ No try-catch on create",
                "highlighted": false
              },
              {
                "line": 101,
                "content": "  const user = await User.create({ email, name: 'Test', age: 25 });",
                "highlighted": true
              },
              {
                "line": 102,
                "content": "",
                "highlighted": false
              },
              {
                "line": 103,
                "content": "  // Modify the document",
                "highlighted": false
              },
              {
                "line": 104,
                "content": "  user.name = 'Updated';",
                "highlighted": false
              },
              {
                "line": 105,
                "content": "",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-cast-error-no-try-catch-invalid-id",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 114,
          "column": 22,
          "package": "mongoose",
          "function": "findById",
          "contract_clause": "cast-error-no-try-catch-invalid-id",
          "description": "No try-catch block found. CastError with kind: 'ObjectId' - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-findById",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Common when user input is passed directly as ID. Validate ID format before querying.\n",
          "code_snippet": {
            "startLine": 110,
            "endLine": 118,
            "lines": [
              {
                "line": 110,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 111,
                "content": "",
                "highlighted": false
              },
              {
                "line": 112,
                "content": "async function findAndModifyMissing(id: string) {",
                "highlighted": false
              },
              {
                "line": 113,
                "content": "  // ❌ No try-catch on findById",
                "highlighted": false
              },
              {
                "line": 114,
                "content": "  const user = await User.findById(id);",
                "highlighted": true
              },
              {
                "line": 115,
                "content": "",
                "highlighted": false
              },
              {
                "line": 116,
                "content": "  if (user) {",
                "highlighted": false
              },
              {
                "line": 117,
                "content": "    user.age = 30;",
                "highlighted": false
              },
              {
                "line": 118,
                "content": "    // ❌ No try-catch on save",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 114,
          "column": 22,
          "package": "mongoose",
          "function": "findById",
          "contract_clause": "connection-error-no-try-catch",
          "description": "No try-catch block found. MongooseError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST handle connection errors",
          "code_snippet": {
            "startLine": 110,
            "endLine": 118,
            "lines": [
              {
                "line": 110,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 111,
                "content": "",
                "highlighted": false
              },
              {
                "line": 112,
                "content": "async function findAndModifyMissing(id: string) {",
                "highlighted": false
              },
              {
                "line": 113,
                "content": "  // ❌ No try-catch on findById",
                "highlighted": false
              },
              {
                "line": 114,
                "content": "  const user = await User.findById(id);",
                "highlighted": true
              },
              {
                "line": 115,
                "content": "",
                "highlighted": false
              },
              {
                "line": 116,
                "content": "  if (user) {",
                "highlighted": false
              },
              {
                "line": 117,
                "content": "    user.age = 30;",
                "highlighted": false
              },
              {
                "line": 118,
                "content": "    // ❌ No try-catch on save",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-cast-error-no-try-catch-invalid-id",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 160,
          "column": 18,
          "package": "mongoose",
          "function": "findById",
          "contract_clause": "cast-error-no-try-catch-invalid-id",
          "description": "No try-catch block found. CastError with kind: 'ObjectId' - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-findById",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Common when user input is passed directly as ID. Validate ID format before querying.\n",
          "code_snippet": {
            "startLine": 156,
            "endLine": 164,
            "lines": [
              {
                "line": 156,
                "content": "  // ❌ No try-catch in class methods",
                "highlighted": false
              },
              {
                "line": 157,
                "content": "",
                "highlighted": false
              },
              {
                "line": 158,
                "content": "  async findById(id: string) {",
                "highlighted": false
              },
              {
                "line": 159,
                "content": "    // ❌ No error handling",
                "highlighted": false
              },
              {
                "line": 160,
                "content": "    return await User.findById(id);",
                "highlighted": true
              },
              {
                "line": 161,
                "content": "  }",
                "highlighted": false
              },
              {
                "line": 162,
                "content": "",
                "highlighted": false
              },
              {
                "line": 163,
                "content": "  async create(data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 164,
                "content": "    // ❌ No error handling",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 160,
          "column": 18,
          "package": "mongoose",
          "function": "findById",
          "contract_clause": "connection-error-no-try-catch",
          "description": "No try-catch block found. MongooseError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST handle connection errors",
          "code_snippet": {
            "startLine": 156,
            "endLine": 164,
            "lines": [
              {
                "line": 156,
                "content": "  // ❌ No try-catch in class methods",
                "highlighted": false
              },
              {
                "line": 157,
                "content": "",
                "highlighted": false
              },
              {
                "line": 158,
                "content": "  async findById(id: string) {",
                "highlighted": false
              },
              {
                "line": 159,
                "content": "    // ❌ No error handling",
                "highlighted": false
              },
              {
                "line": 160,
                "content": "    return await User.findById(id);",
                "highlighted": true
              },
              {
                "line": 161,
                "content": "  }",
                "highlighted": false
              },
              {
                "line": 162,
                "content": "",
                "highlighted": false
              },
              {
                "line": 163,
                "content": "  async create(data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 164,
                "content": "    // ❌ No error handling",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-cast-error-no-try-catch-invalid-id",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 172,
          "column": 24,
          "package": "mongoose",
          "function": "findById",
          "contract_clause": "cast-error-no-try-catch-invalid-id",
          "description": "No try-catch block found. CastError with kind: 'ObjectId' - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-findById",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Common when user input is passed directly as ID. Validate ID format before querying.\n",
          "code_snippet": {
            "startLine": 168,
            "endLine": 176,
            "lines": [
              {
                "line": 168,
                "content": "  }",
                "highlighted": false
              },
              {
                "line": 169,
                "content": "",
                "highlighted": false
              },
              {
                "line": 170,
                "content": "  async update(id: string, data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 171,
                "content": "    // ❌ No error handling",
                "highlighted": false
              },
              {
                "line": 172,
                "content": "    const user = await User.findById(id);",
                "highlighted": true
              },
              {
                "line": 173,
                "content": "    if (user) {",
                "highlighted": false
              },
              {
                "line": 174,
                "content": "      Object.assign(user, data);",
                "highlighted": false
              },
              {
                "line": 175,
                "content": "      await user.save();",
                "highlighted": false
              },
              {
                "line": 176,
                "content": "    }",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 172,
          "column": 24,
          "package": "mongoose",
          "function": "findById",
          "contract_clause": "connection-error-no-try-catch",
          "description": "No try-catch block found. MongooseError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST handle connection errors",
          "code_snippet": {
            "startLine": 168,
            "endLine": 176,
            "lines": [
              {
                "line": 168,
                "content": "  }",
                "highlighted": false
              },
              {
                "line": 169,
                "content": "",
                "highlighted": false
              },
              {
                "line": 170,
                "content": "  async update(id: string, data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 171,
                "content": "    // ❌ No error handling",
                "highlighted": false
              },
              {
                "line": 172,
                "content": "    const user = await User.findById(id);",
                "highlighted": true
              },
              {
                "line": 173,
                "content": "    if (user) {",
                "highlighted": false
              },
              {
                "line": 174,
                "content": "      Object.assign(user, data);",
                "highlighted": false
              },
              {
                "line": 175,
                "content": "      await user.save();",
                "highlighted": false
              },
              {
                "line": 176,
                "content": "    }",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-cast-error-no-try-catch-invalid-id",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 182,
          "column": 24,
          "package": "mongoose",
          "function": "findById",
          "contract_clause": "cast-error-no-try-catch-invalid-id",
          "description": "No try-catch block found. CastError with kind: 'ObjectId' - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-findById",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Common when user input is passed directly as ID. Validate ID format before querying.\n",
          "code_snippet": {
            "startLine": 178,
            "endLine": 186,
            "lines": [
              {
                "line": 178,
                "content": "  }",
                "highlighted": false
              },
              {
                "line": 179,
                "content": "",
                "highlighted": false
              },
              {
                "line": 180,
                "content": "  async delete(id: string) {",
                "highlighted": false
              },
              {
                "line": 181,
                "content": "    // ❌ No error handling",
                "highlighted": false
              },
              {
                "line": 182,
                "content": "    const user = await User.findById(id);",
                "highlighted": true
              },
              {
                "line": 183,
                "content": "    if (user) {",
                "highlighted": false
              },
              {
                "line": 184,
                "content": "      await user.deleteOne();",
                "highlighted": false
              },
              {
                "line": 185,
                "content": "    }",
                "highlighted": false
              },
              {
                "line": 186,
                "content": "  }",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 182,
          "column": 24,
          "package": "mongoose",
          "function": "findById",
          "contract_clause": "connection-error-no-try-catch",
          "description": "No try-catch block found. MongooseError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST handle connection errors",
          "code_snippet": {
            "startLine": 178,
            "endLine": 186,
            "lines": [
              {
                "line": 178,
                "content": "  }",
                "highlighted": false
              },
              {
                "line": 179,
                "content": "",
                "highlighted": false
              },
              {
                "line": 180,
                "content": "  async delete(id: string) {",
                "highlighted": false
              },
              {
                "line": 181,
                "content": "    // ❌ No error handling",
                "highlighted": false
              },
              {
                "line": 182,
                "content": "    const user = await User.findById(id);",
                "highlighted": true
              },
              {
                "line": 183,
                "content": "    if (user) {",
                "highlighted": false
              },
              {
                "line": 184,
                "content": "      await user.deleteOne();",
                "highlighted": false
              },
              {
                "line": 185,
                "content": "    }",
                "highlighted": false
              },
              {
                "line": 186,
                "content": "  }",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-cast-error-no-try-catch-invalid-id",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 245,
          "column": 22,
          "package": "mongoose",
          "function": "findById",
          "contract_clause": "cast-error-no-try-catch-invalid-id",
          "description": "No try-catch block found. CastError with kind: 'ObjectId' - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-findById",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Common when user input is passed directly as ID. Validate ID format before querying.\n",
          "code_snippet": {
            "startLine": 241,
            "endLine": 249,
            "lines": [
              {
                "line": 241,
                "content": "async function middlewareHandlerMissing(req: any, res: any) {",
                "highlighted": false
              },
              {
                "line": 242,
                "content": "  const { id } = req.params;",
                "highlighted": false
              },
              {
                "line": 243,
                "content": "",
                "highlighted": false
              },
              {
                "line": 244,
                "content": "  // ❌ No try-catch - will crash the server",
                "highlighted": false
              },
              {
                "line": 245,
                "content": "  const user = await User.findById(id);",
                "highlighted": true
              },
              {
                "line": 246,
                "content": "",
                "highlighted": false
              },
              {
                "line": 247,
                "content": "  res.json(user);",
                "highlighted": false
              },
              {
                "line": 248,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 249,
                "content": "",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 245,
          "column": 22,
          "package": "mongoose",
          "function": "findById",
          "contract_clause": "connection-error-no-try-catch",
          "description": "No try-catch block found. MongooseError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST handle connection errors",
          "code_snippet": {
            "startLine": 241,
            "endLine": 249,
            "lines": [
              {
                "line": 241,
                "content": "async function middlewareHandlerMissing(req: any, res: any) {",
                "highlighted": false
              },
              {
                "line": 242,
                "content": "  const { id } = req.params;",
                "highlighted": false
              },
              {
                "line": 243,
                "content": "",
                "highlighted": false
              },
              {
                "line": 244,
                "content": "  // ❌ No try-catch - will crash the server",
                "highlighted": false
              },
              {
                "line": 245,
                "content": "  const user = await User.findById(id);",
                "highlighted": true
              },
              {
                "line": 246,
                "content": "",
                "highlighted": false
              },
              {
                "line": 247,
                "content": "  res.json(user);",
                "highlighted": false
              },
              {
                "line": 248,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 249,
                "content": "",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-validation-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 254,
          "column": 22,
          "package": "mongoose",
          "function": "create",
          "contract_clause": "validation-error-no-try-catch",
          "description": "No try-catch block found. ValidationError with errors object containing field-specific ValidatorErrors - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/validation.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Check error.name === 'ValidationError' and inspect error.errors object. Each field error is accessible via error.errors[fieldName].\n",
          "code_snippet": {
            "startLine": 250,
            "endLine": 258,
            "lines": [
              {
                "line": 250,
                "content": "async function createUserHandlerMissing(req: any, res: any) {",
                "highlighted": false
              },
              {
                "line": 251,
                "content": "  const data = req.body;",
                "highlighted": false
              },
              {
                "line": 252,
                "content": "",
                "highlighted": false
              },
              {
                "line": 253,
                "content": "  // ❌ No try-catch",
                "highlighted": false
              },
              {
                "line": 254,
                "content": "  const user = await User.create(data);",
                "highlighted": true
              },
              {
                "line": 255,
                "content": "",
                "highlighted": false
              },
              {
                "line": 256,
                "content": "  res.json(user);",
                "highlighted": false
              },
              {
                "line": 257,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 258,
                "content": "",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-duplicate-key-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 254,
          "column": 22,
          "package": "mongoose",
          "function": "create",
          "contract_clause": "duplicate-key-error-no-try-catch",
          "description": "No try-catch block found. MongoError with code: 11000 - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/validation.html#unique-indexes",
          "suggested_fix": "Caller MUST wrap in try-catch and check error.code === 11000. This is NOT a ValidationError - it comes from MongoDB driver. Extract duplicate field from error message or error.keyPattern.\n",
          "code_snippet": {
            "startLine": 250,
            "endLine": 258,
            "lines": [
              {
                "line": 250,
                "content": "async function createUserHandlerMissing(req: any, res: any) {",
                "highlighted": false
              },
              {
                "line": 251,
                "content": "  const data = req.body;",
                "highlighted": false
              },
              {
                "line": 252,
                "content": "",
                "highlighted": false
              },
              {
                "line": 253,
                "content": "  // ❌ No try-catch",
                "highlighted": false
              },
              {
                "line": 254,
                "content": "  const user = await User.create(data);",
                "highlighted": true
              },
              {
                "line": 255,
                "content": "",
                "highlighted": false
              },
              {
                "line": 256,
                "content": "  res.json(user);",
                "highlighted": false
              },
              {
                "line": 257,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 258,
                "content": "",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 254,
          "column": 22,
          "package": "mongoose",
          "function": "create",
          "contract_clause": "connection-error-no-try-catch",
          "description": "No try-catch block found. MongooseError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST handle connection errors with retry logic",
          "code_snippet": {
            "startLine": 250,
            "endLine": 258,
            "lines": [
              {
                "line": 250,
                "content": "async function createUserHandlerMissing(req: any, res: any) {",
                "highlighted": false
              },
              {
                "line": 251,
                "content": "  const data = req.body;",
                "highlighted": false
              },
              {
                "line": 252,
                "content": "",
                "highlighted": false
              },
              {
                "line": 253,
                "content": "  // ❌ No try-catch",
                "highlighted": false
              },
              {
                "line": 254,
                "content": "  const user = await User.create(data);",
                "highlighted": true
              },
              {
                "line": 255,
                "content": "",
                "highlighted": false
              },
              {
                "line": 256,
                "content": "  res.json(user);",
                "highlighted": false
              },
              {
                "line": 257,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 258,
                "content": "",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-cast-error-no-try-catch-invalid-id",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 290,
          "column": 22,
          "package": "mongoose",
          "function": "findById",
          "contract_clause": "cast-error-no-try-catch-invalid-id",
          "description": "No try-catch block found. CastError with kind: 'ObjectId' - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-findById",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Common when user input is passed directly as ID. Validate ID format before querying.\n",
          "code_snippet": {
            "startLine": 286,
            "endLine": 294,
            "lines": [
              {
                "line": 286,
                "content": "// ❌ Complex Patterns WITHOUT Try-Catch",
                "highlighted": false
              },
              {
                "line": 287,
                "content": "",
                "highlighted": false
              },
              {
                "line": 288,
                "content": "async function complexOperationMissing(userId: string) {",
                "highlighted": false
              },
              {
                "line": 289,
                "content": "  // ❌ No try-catch on first operation",
                "highlighted": false
              },
              {
                "line": 290,
                "content": "  const user = await User.findById(userId);",
                "highlighted": true
              },
              {
                "line": 291,
                "content": "",
                "highlighted": false
              },
              {
                "line": 292,
                "content": "  if (user) {",
                "highlighted": false
              },
              {
                "line": 293,
                "content": "    user.active = false;",
                "highlighted": false
              },
              {
                "line": 294,
                "content": "    // ❌ No try-catch on save",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 290,
          "column": 22,
          "package": "mongoose",
          "function": "findById",
          "contract_clause": "connection-error-no-try-catch",
          "description": "No try-catch block found. MongooseError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST handle connection errors",
          "code_snippet": {
            "startLine": 286,
            "endLine": 294,
            "lines": [
              {
                "line": 286,
                "content": "// ❌ Complex Patterns WITHOUT Try-Catch",
                "highlighted": false
              },
              {
                "line": 287,
                "content": "",
                "highlighted": false
              },
              {
                "line": 288,
                "content": "async function complexOperationMissing(userId: string) {",
                "highlighted": false
              },
              {
                "line": 289,
                "content": "  // ❌ No try-catch on first operation",
                "highlighted": false
              },
              {
                "line": 290,
                "content": "  const user = await User.findById(userId);",
                "highlighted": true
              },
              {
                "line": 291,
                "content": "",
                "highlighted": false
              },
              {
                "line": 292,
                "content": "  if (user) {",
                "highlighted": false
              },
              {
                "line": 293,
                "content": "    user.active = false;",
                "highlighted": false
              },
              {
                "line": 294,
                "content": "    // ❌ No try-catch on save",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/instance-usage.ts",
          "line": 298,
          "column": 33,
          "package": "mongoose",
          "function": "countDocuments",
          "contract_clause": "connection-error-no-try-catch",
          "description": "No try-catch block found. MongooseError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-countDocuments",
          "suggested_fix": "Caller MUST wrap in try-catch",
          "code_snippet": {
            "startLine": 294,
            "endLine": 302,
            "lines": [
              {
                "line": 294,
                "content": "    // ❌ No try-catch on save",
                "highlighted": false
              },
              {
                "line": 295,
                "content": "    await user.save();",
                "highlighted": false
              },
              {
                "line": 296,
                "content": "",
                "highlighted": false
              },
              {
                "line": 297,
                "content": "    // ❌ No try-catch on countDocuments",
                "highlighted": false
              },
              {
                "line": 298,
                "content": "    const inactiveCount = await User.countDocuments({ active: false });",
                "highlighted": true
              },
              {
                "line": 299,
                "content": "",
                "highlighted": false
              },
              {
                "line": 300,
                "content": "    return { user, inactiveCount };",
                "highlighted": false
              },
              {
                "line": 301,
                "content": "  }",
                "highlighted": false
              },
              {
                "line": 302,
                "content": "",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 33,
          "column": 17,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'findAllUsersMissing' contains unprotected await expression. await User.find()... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 29,
            "endLine": 37,
            "lines": [
              {
                "line": 29,
                "content": "// ❌ Query Operations WITHOUT Try-Catch",
                "highlighted": false
              },
              {
                "line": 30,
                "content": "",
                "highlighted": false
              },
              {
                "line": 31,
                "content": "async function findAllUsersMissing() {",
                "highlighted": false
              },
              {
                "line": 32,
                "content": "  // ❌ No error handling - will crash if connection fails",
                "highlighted": false
              },
              {
                "line": 33,
                "content": "  const users = await User.find();",
                "highlighted": true
              },
              {
                "line": 34,
                "content": "  return users;",
                "highlighted": false
              },
              {
                "line": 35,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 36,
                "content": "",
                "highlighted": false
              },
              {
                "line": 37,
                "content": "async function findOneUserMissing(email: string) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 39,
          "column": 16,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'findOneUserMissing' contains unprotected await expression. await User.findOne({ email })... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 35,
            "endLine": 43,
            "lines": [
              {
                "line": 35,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 36,
                "content": "",
                "highlighted": false
              },
              {
                "line": 37,
                "content": "async function findOneUserMissing(email: string) {",
                "highlighted": false
              },
              {
                "line": 38,
                "content": "  // ❌ No error handling - will crash on query error",
                "highlighted": false
              },
              {
                "line": 39,
                "content": "  const user = await User.findOne({ email });",
                "highlighted": true
              },
              {
                "line": 40,
                "content": "  return user;",
                "highlighted": false
              },
              {
                "line": 41,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 42,
                "content": "",
                "highlighted": false
              },
              {
                "line": 43,
                "content": "async function findUserByIdMissing(id: string) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 45,
          "column": 16,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'findUserByIdMissing' contains unprotected await expression. await User.findById(id)... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 41,
            "endLine": 49,
            "lines": [
              {
                "line": 41,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 42,
                "content": "",
                "highlighted": false
              },
              {
                "line": 43,
                "content": "async function findUserByIdMissing(id: string) {",
                "highlighted": false
              },
              {
                "line": 44,
                "content": "  // ❌ No error handling - will crash on invalid ObjectId",
                "highlighted": false
              },
              {
                "line": 45,
                "content": "  const user = await User.findById(id);",
                "highlighted": true
              },
              {
                "line": 46,
                "content": "  return user;",
                "highlighted": false
              },
              {
                "line": 47,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 48,
                "content": "",
                "highlighted": false
              },
              {
                "line": 49,
                "content": "// ❌ Create Operations WITHOUT Try-Catch",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 53,
          "column": 16,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'createUserMissing' contains unprotected await expression. await User.create(data)... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 49,
            "endLine": 57,
            "lines": [
              {
                "line": 49,
                "content": "// ❌ Create Operations WITHOUT Try-Catch",
                "highlighted": false
              },
              {
                "line": 50,
                "content": "",
                "highlighted": false
              },
              {
                "line": 51,
                "content": "async function createUserMissing(data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 52,
                "content": "  // ❌ No error handling - will crash on validation error or duplicate key",
                "highlighted": false
              },
              {
                "line": 53,
                "content": "  const user = await User.create(data);",
                "highlighted": true
              },
              {
                "line": 54,
                "content": "  return user;",
                "highlighted": false
              },
              {
                "line": 55,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 56,
                "content": "",
                "highlighted": false
              },
              {
                "line": 57,
                "content": "async function createMultipleUsersMissing(users: Partial<IUser>[]) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 59,
          "column": 18,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'createMultipleUsersMissing' contains unprotected await expression. await User.insertMany(users)... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 55,
            "endLine": 63,
            "lines": [
              {
                "line": 55,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 56,
                "content": "",
                "highlighted": false
              },
              {
                "line": 57,
                "content": "async function createMultipleUsersMissing(users: Partial<IUser>[]) {",
                "highlighted": false
              },
              {
                "line": 58,
                "content": "  // ❌ No error handling - will crash on bulk insert failure",
                "highlighted": false
              },
              {
                "line": 59,
                "content": "  const result = await User.insertMany(users);",
                "highlighted": true
              },
              {
                "line": 60,
                "content": "  return result;",
                "highlighted": false
              },
              {
                "line": 61,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 62,
                "content": "",
                "highlighted": false
              },
              {
                "line": 63,
                "content": "// ❌ Update Operations WITHOUT Try-Catch",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 67,
          "column": 18,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'updateOneUserMissing' contains unprotected await expression. await User.updateOne({ _id: id }, data)... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 63,
            "endLine": 71,
            "lines": [
              {
                "line": 63,
                "content": "// ❌ Update Operations WITHOUT Try-Catch",
                "highlighted": false
              },
              {
                "line": 64,
                "content": "",
                "highlighted": false
              },
              {
                "line": 65,
                "content": "async function updateOneUserMissing(id: string, data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 66,
                "content": "  // ❌ No error handling - will crash on update failure",
                "highlighted": false
              },
              {
                "line": 67,
                "content": "  const result = await User.updateOne({ _id: id }, data);",
                "highlighted": true
              },
              {
                "line": 68,
                "content": "  return result;",
                "highlighted": false
              },
              {
                "line": 69,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 70,
                "content": "",
                "highlighted": false
              },
              {
                "line": 71,
                "content": "async function updateManyUsersMissing(filter: any, update: Partial<IUser>) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 73,
          "column": 18,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'updateManyUsersMissing' contains unprotected await expression. await User.updateMany(filter, update)... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 69,
            "endLine": 77,
            "lines": [
              {
                "line": 69,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 70,
                "content": "",
                "highlighted": false
              },
              {
                "line": 71,
                "content": "async function updateManyUsersMissing(filter: any, update: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 72,
                "content": "  // ❌ No error handling - will crash on bulk update failure",
                "highlighted": false
              },
              {
                "line": 73,
                "content": "  const result = await User.updateMany(filter, update);",
                "highlighted": true
              },
              {
                "line": 74,
                "content": "  return result;",
                "highlighted": false
              },
              {
                "line": 75,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 76,
                "content": "",
                "highlighted": false
              },
              {
                "line": 77,
                "content": "async function findAndUpdateUserMissing(id: string, data: Partial<IUser>) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 79,
          "column": 16,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'findAndUpdateUserMissing' contains unprotected await expression. await User.findByIdAndUpdate(id, data, { new: true... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 75,
            "endLine": 83,
            "lines": [
              {
                "line": 75,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 76,
                "content": "",
                "highlighted": false
              },
              {
                "line": 77,
                "content": "async function findAndUpdateUserMissing(id: string, data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 78,
                "content": "  // ❌ No error handling - vulnerable to CVE-2023-3696",
                "highlighted": false
              },
              {
                "line": 79,
                "content": "  const user = await User.findByIdAndUpdate(id, data, { new: true });",
                "highlighted": true
              },
              {
                "line": 80,
                "content": "  return user;",
                "highlighted": false
              },
              {
                "line": 81,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 82,
                "content": "",
                "highlighted": false
              },
              {
                "line": 83,
                "content": "async function findOneAndUpdateUserMissing(email: string, data: Partial<IUser>) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 85,
          "column": 16,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'findOneAndUpdateUserMissing' contains unprotected await expression. await User.findOneAndUpdate({ email }, data, { new... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 81,
            "endLine": 89,
            "lines": [
              {
                "line": 81,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 82,
                "content": "",
                "highlighted": false
              },
              {
                "line": 83,
                "content": "async function findOneAndUpdateUserMissing(email: string, data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 84,
                "content": "  // ❌ No error handling - vulnerable to CVE-2023-3696",
                "highlighted": false
              },
              {
                "line": 85,
                "content": "  const user = await User.findOneAndUpdate({ email }, data, { new: true });",
                "highlighted": true
              },
              {
                "line": 86,
                "content": "  return user;",
                "highlighted": false
              },
              {
                "line": 87,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 88,
                "content": "",
                "highlighted": false
              },
              {
                "line": 89,
                "content": "async function replaceOneUserMissing(id: string, data: Partial<IUser>) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 91,
          "column": 18,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'replaceOneUserMissing' contains unprotected await expression. await User.replaceOne({ _id: id }, data)... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 87,
            "endLine": 95,
            "lines": [
              {
                "line": 87,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 88,
                "content": "",
                "highlighted": false
              },
              {
                "line": 89,
                "content": "async function replaceOneUserMissing(id: string, data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 90,
                "content": "  // ❌ No error handling",
                "highlighted": false
              },
              {
                "line": 91,
                "content": "  const result = await User.replaceOne({ _id: id }, data);",
                "highlighted": true
              },
              {
                "line": 92,
                "content": "  return result;",
                "highlighted": false
              },
              {
                "line": 93,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 94,
                "content": "",
                "highlighted": false
              },
              {
                "line": 95,
                "content": "async function findOneAndReplaceMissing(email: string, data: Partial<IUser>) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 97,
          "column": 16,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'findOneAndReplaceMissing' contains unprotected await expression. await User.findOneAndReplace({ email }, data)... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 93,
            "endLine": 101,
            "lines": [
              {
                "line": 93,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 94,
                "content": "",
                "highlighted": false
              },
              {
                "line": 95,
                "content": "async function findOneAndReplaceMissing(email: string, data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 96,
                "content": "  // ❌ No error handling",
                "highlighted": false
              },
              {
                "line": 97,
                "content": "  const user = await User.findOneAndReplace({ email }, data);",
                "highlighted": true
              },
              {
                "line": 98,
                "content": "  return user;",
                "highlighted": false
              },
              {
                "line": 99,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 100,
                "content": "",
                "highlighted": false
              },
              {
                "line": 101,
                "content": "// ❌ Delete Operations WITHOUT Try-Catch",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 105,
          "column": 18,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'deleteOneUserMissing' contains unprotected await expression. await User.deleteOne({ _id: id })... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 101,
            "endLine": 109,
            "lines": [
              {
                "line": 101,
                "content": "// ❌ Delete Operations WITHOUT Try-Catch",
                "highlighted": false
              },
              {
                "line": 102,
                "content": "",
                "highlighted": false
              },
              {
                "line": 103,
                "content": "async function deleteOneUserMissing(id: string) {",
                "highlighted": false
              },
              {
                "line": 104,
                "content": "  // ❌ No error handling",
                "highlighted": false
              },
              {
                "line": 105,
                "content": "  const result = await User.deleteOne({ _id: id });",
                "highlighted": true
              },
              {
                "line": 106,
                "content": "  return result;",
                "highlighted": false
              },
              {
                "line": 107,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 108,
                "content": "",
                "highlighted": false
              },
              {
                "line": 109,
                "content": "async function deleteManyUsersMissing(filter: any) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 111,
          "column": 18,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'deleteManyUsersMissing' contains unprotected await expression. await User.deleteMany(filter)... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 107,
            "endLine": 115,
            "lines": [
              {
                "line": 107,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 108,
                "content": "",
                "highlighted": false
              },
              {
                "line": 109,
                "content": "async function deleteManyUsersMissing(filter: any) {",
                "highlighted": false
              },
              {
                "line": 110,
                "content": "  // ❌ No error handling",
                "highlighted": false
              },
              {
                "line": 111,
                "content": "  const result = await User.deleteMany(filter);",
                "highlighted": true
              },
              {
                "line": 112,
                "content": "  return result;",
                "highlighted": false
              },
              {
                "line": 113,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 114,
                "content": "",
                "highlighted": false
              },
              {
                "line": 115,
                "content": "async function findAndDeleteUserMissing(id: string) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 117,
          "column": 16,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'findAndDeleteUserMissing' contains unprotected await expression. await User.findByIdAndDelete(id)... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 113,
            "endLine": 121,
            "lines": [
              {
                "line": 113,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 114,
                "content": "",
                "highlighted": false
              },
              {
                "line": 115,
                "content": "async function findAndDeleteUserMissing(id: string) {",
                "highlighted": false
              },
              {
                "line": 116,
                "content": "  // ❌ No error handling",
                "highlighted": false
              },
              {
                "line": 117,
                "content": "  const user = await User.findByIdAndDelete(id);",
                "highlighted": true
              },
              {
                "line": 118,
                "content": "  return user;",
                "highlighted": false
              },
              {
                "line": 119,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 120,
                "content": "",
                "highlighted": false
              },
              {
                "line": 121,
                "content": "async function findOneAndDeleteUserMissing(email: string) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 123,
          "column": 16,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'findOneAndDeleteUserMissing' contains unprotected await expression. await User.findOneAndDelete({ email })... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 119,
            "endLine": 127,
            "lines": [
              {
                "line": 119,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 120,
                "content": "",
                "highlighted": false
              },
              {
                "line": 121,
                "content": "async function findOneAndDeleteUserMissing(email: string) {",
                "highlighted": false
              },
              {
                "line": 122,
                "content": "  // ❌ No error handling",
                "highlighted": false
              },
              {
                "line": 123,
                "content": "  const user = await User.findOneAndDelete({ email });",
                "highlighted": true
              },
              {
                "line": 124,
                "content": "  return user;",
                "highlighted": false
              },
              {
                "line": 125,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 126,
                "content": "",
                "highlighted": false
              },
              {
                "line": 127,
                "content": "// NOTE: Model.findByIdAndRemove() was deprecated in mongoose >= 7.x",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 134,
          "column": 17,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'executeQueryMissing' contains unprotected await expression. await User.find({ active: true }).limit(10).exec()... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 130,
            "endLine": 138,
            "lines": [
              {
                "line": 130,
                "content": "// ❌ Query Methods WITHOUT Try-Catch",
                "highlighted": false
              },
              {
                "line": 131,
                "content": "",
                "highlighted": false
              },
              {
                "line": 132,
                "content": "async function executeQueryMissing() {",
                "highlighted": false
              },
              {
                "line": 133,
                "content": "  // ❌ No error handling on .exec()",
                "highlighted": false
              },
              {
                "line": 134,
                "content": "  const users = await User.find({ active: true }).limit(10).exec();",
                "highlighted": true
              },
              {
                "line": 135,
                "content": "  return users;",
                "highlighted": false
              },
              {
                "line": 136,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 137,
                "content": "",
                "highlighted": false
              },
              {
                "line": 138,
                "content": "async function executeWithOrFailMissing(id: string) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 140,
          "column": 16,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'executeWithOrFailMissing' contains unprotected await expression. await User.findById(id).orFail()... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 136,
            "endLine": 144,
            "lines": [
              {
                "line": 136,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 137,
                "content": "",
                "highlighted": false
              },
              {
                "line": 138,
                "content": "async function executeWithOrFailMissing(id: string) {",
                "highlighted": false
              },
              {
                "line": 139,
                "content": "  // ❌ No error handling - orFail() will throw but not caught",
                "highlighted": false
              },
              {
                "line": 140,
                "content": "  const user = await User.findById(id).orFail();",
                "highlighted": true
              },
              {
                "line": 141,
                "content": "  return user;",
                "highlighted": false
              },
              {
                "line": 142,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 143,
                "content": "",
                "highlighted": false
              },
              {
                "line": 144,
                "content": "// ❌ Aggregation Operations WITHOUT Try-Catch",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 148,
          "column": 18,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'aggregateUsersMissing' contains unprotected await expression. await User.aggregate([\n    { $match: { active: tru... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 144,
            "endLine": 152,
            "lines": [
              {
                "line": 144,
                "content": "// ❌ Aggregation Operations WITHOUT Try-Catch",
                "highlighted": false
              },
              {
                "line": 145,
                "content": "",
                "highlighted": false
              },
              {
                "line": 146,
                "content": "async function aggregateUsersMissing() {",
                "highlighted": false
              },
              {
                "line": 147,
                "content": "  // ❌ No error handling",
                "highlighted": false
              },
              {
                "line": 148,
                "content": "  const result = await User.aggregate([",
                "highlighted": true
              },
              {
                "line": 149,
                "content": "    { $match: { active: true } },",
                "highlighted": false
              },
              {
                "line": 150,
                "content": "    { $group: { _id: '$age', count: { $sum: 1 } } }",
                "highlighted": false
              },
              {
                "line": 151,
                "content": "  ]);",
                "highlighted": false
              },
              {
                "line": 152,
                "content": "  return result;",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 157,
          "column": 17,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'countUsersMissing' contains unprotected await expression. await User.countDocuments({ active: true })... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 153,
            "endLine": 161,
            "lines": [
              {
                "line": 153,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 154,
                "content": "",
                "highlighted": false
              },
              {
                "line": 155,
                "content": "async function countUsersMissing() {",
                "highlighted": false
              },
              {
                "line": 156,
                "content": "  // ❌ No error handling",
                "highlighted": false
              },
              {
                "line": 157,
                "content": "  const count = await User.countDocuments({ active: true });",
                "highlighted": true
              },
              {
                "line": 158,
                "content": "  return count;",
                "highlighted": false
              },
              {
                "line": 159,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 160,
                "content": "",
                "highlighted": false
              },
              {
                "line": 161,
                "content": "async function estimateCountMissing() {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 163,
          "column": 17,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'estimateCountMissing' contains unprotected await expression. await User.estimatedDocumentCount()... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 159,
            "endLine": 167,
            "lines": [
              {
                "line": 159,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 160,
                "content": "",
                "highlighted": false
              },
              {
                "line": 161,
                "content": "async function estimateCountMissing() {",
                "highlighted": false
              },
              {
                "line": 162,
                "content": "  // ❌ No error handling",
                "highlighted": false
              },
              {
                "line": 163,
                "content": "  const count = await User.estimatedDocumentCount();",
                "highlighted": true
              },
              {
                "line": 164,
                "content": "  return count;",
                "highlighted": false
              },
              {
                "line": 165,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 166,
                "content": "",
                "highlighted": false
              },
              {
                "line": 167,
                "content": "// ❌ Connection Operations WITHOUT Try-Catch",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 207,
          "column": 16,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'chainedQueryMissing' contains unprotected await expression. await User.findOne({ email })\n    .select('name em... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 203,
            "endLine": 211,
            "lines": [
              {
                "line": 203,
                "content": "// ❌ Chained Query WITHOUT Try-Catch",
                "highlighted": false
              },
              {
                "line": 204,
                "content": "",
                "highlighted": false
              },
              {
                "line": 205,
                "content": "async function chainedQueryMissing(email: string) {",
                "highlighted": false
              },
              {
                "line": 206,
                "content": "  // ❌ No error handling on chained query",
                "highlighted": false
              },
              {
                "line": 207,
                "content": "  const user = await User.findOne({ email })",
                "highlighted": true
              },
              {
                "line": 208,
                "content": "    .select('name email')",
                "highlighted": false
              },
              {
                "line": 209,
                "content": "    .limit(1)",
                "highlighted": false
              },
              {
                "line": 210,
                "content": "    .exec();",
                "highlighted": false
              },
              {
                "line": 211,
                "content": "  return user;",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 218,
          "column": 18,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'checkUserExistsMissing' contains unprotected await expression. await User.exists({ email })... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 214,
            "endLine": 222,
            "lines": [
              {
                "line": 214,
                "content": "// ❌ Additional Methods WITHOUT Try-Catch",
                "highlighted": false
              },
              {
                "line": 215,
                "content": "",
                "highlighted": false
              },
              {
                "line": 216,
                "content": "async function checkUserExistsMissing(email: string) {",
                "highlighted": false
              },
              {
                "line": 217,
                "content": "  // ❌ No error handling",
                "highlighted": false
              },
              {
                "line": 218,
                "content": "  const exists = await User.exists({ email });",
                "highlighted": true
              },
              {
                "line": 219,
                "content": "  return exists;",
                "highlighted": false
              },
              {
                "line": 220,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 221,
                "content": "",
                "highlighted": false
              },
              {
                "line": 222,
                "content": "async function getDistinctValuesMissing() {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 224,
          "column": 16,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'getDistinctValuesMissing' contains unprotected await expression. await User.distinct('age')... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 220,
            "endLine": 228,
            "lines": [
              {
                "line": 220,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 221,
                "content": "",
                "highlighted": false
              },
              {
                "line": 222,
                "content": "async function getDistinctValuesMissing() {",
                "highlighted": false
              },
              {
                "line": 223,
                "content": "  // ❌ No error handling",
                "highlighted": false
              },
              {
                "line": 224,
                "content": "  const ages = await User.distinct('age');",
                "highlighted": true
              },
              {
                "line": 225,
                "content": "  return ages;",
                "highlighted": false
              },
              {
                "line": 226,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 227,
                "content": "",
                "highlighted": false
              },
              {
                "line": 228,
                "content": "async function bulkWriteMissing(operations: any[]) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 230,
          "column": 18,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'bulkWriteMissing' contains unprotected await expression. await User.bulkWrite(operations)... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 226,
            "endLine": 234,
            "lines": [
              {
                "line": 226,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 227,
                "content": "",
                "highlighted": false
              },
              {
                "line": 228,
                "content": "async function bulkWriteMissing(operations: any[]) {",
                "highlighted": false
              },
              {
                "line": 229,
                "content": "  // ❌ No error handling",
                "highlighted": false
              },
              {
                "line": 230,
                "content": "  const result = await User.bulkWrite(operations);",
                "highlighted": true
              },
              {
                "line": 231,
                "content": "  return result;",
                "highlighted": false
              },
              {
                "line": 232,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 233,
                "content": "",
                "highlighted": false
              },
              {
                "line": 234,
                "content": "// ❌ Multiple Operations in Sequence WITHOUT Try-Catch",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 238,
          "column": 16,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'multipleOperationsMissing' contains unprotected await expression. await User.findOne({ email })... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 234,
            "endLine": 242,
            "lines": [
              {
                "line": 234,
                "content": "// ❌ Multiple Operations in Sequence WITHOUT Try-Catch",
                "highlighted": false
              },
              {
                "line": 235,
                "content": "",
                "highlighted": false
              },
              {
                "line": 236,
                "content": "async function multipleOperationsMissing(email: string, data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 237,
                "content": "  // ❌ No error handling for either operation",
                "highlighted": false
              },
              {
                "line": 238,
                "content": "  const user = await User.findOne({ email });",
                "highlighted": true
              },
              {
                "line": 239,
                "content": "  if (user) {",
                "highlighted": false
              },
              {
                "line": 240,
                "content": "    await User.updateOne({ _id: user._id }, data);",
                "highlighted": false
              },
              {
                "line": 241,
                "content": "  }",
                "highlighted": false
              },
              {
                "line": 242,
                "content": "  return user;",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 240,
          "column": 5,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'multipleOperationsMissing' contains unprotected await expression. await User.updateOne({ _id: user._id }, data)... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 236,
            "endLine": 244,
            "lines": [
              {
                "line": 236,
                "content": "async function multipleOperationsMissing(email: string, data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 237,
                "content": "  // ❌ No error handling for either operation",
                "highlighted": false
              },
              {
                "line": 238,
                "content": "  const user = await User.findOne({ email });",
                "highlighted": false
              },
              {
                "line": 239,
                "content": "  if (user) {",
                "highlighted": false
              },
              {
                "line": 240,
                "content": "    await User.updateOne({ _id: user._id }, data);",
                "highlighted": true
              },
              {
                "line": 241,
                "content": "  }",
                "highlighted": false
              },
              {
                "line": 242,
                "content": "  return user;",
                "highlighted": false
              },
              {
                "line": 243,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 244,
                "content": "",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 249,
          "column": 16,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'nestedOperationsMissing' contains unprotected await expression. await User.findById(userId)... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 245,
            "endLine": 253,
            "lines": [
              {
                "line": 245,
                "content": "// ❌ Nested Operations WITHOUT Try-Catch",
                "highlighted": false
              },
              {
                "line": 246,
                "content": "",
                "highlighted": false
              },
              {
                "line": 247,
                "content": "async function nestedOperationsMissing(userId: string) {",
                "highlighted": false
              },
              {
                "line": 248,
                "content": "  // ❌ No error handling",
                "highlighted": false
              },
              {
                "line": 249,
                "content": "  const user = await User.findById(userId);",
                "highlighted": true
              },
              {
                "line": 250,
                "content": "",
                "highlighted": false
              },
              {
                "line": 251,
                "content": "  if (user) {",
                "highlighted": false
              },
              {
                "line": 252,
                "content": "    // ❌ No error handling on nested operation",
                "highlighted": false
              },
              {
                "line": 253,
                "content": "    const count = await User.countDocuments({ age: user.age });",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 253,
          "column": 19,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "Async function 'nestedOperationsMissing' contains unprotected await expression. await User.countDocuments({ age: user.age })... may throw unhandled errors.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 249,
            "endLine": 257,
            "lines": [
              {
                "line": 249,
                "content": "  const user = await User.findById(userId);",
                "highlighted": false
              },
              {
                "line": 250,
                "content": "",
                "highlighted": false
              },
              {
                "line": 251,
                "content": "  if (user) {",
                "highlighted": false
              },
              {
                "line": 252,
                "content": "    // ❌ No error handling on nested operation",
                "highlighted": false
              },
              {
                "line": 253,
                "content": "    const count = await User.countDocuments({ age: user.age });",
                "highlighted": true
              },
              {
                "line": 254,
                "content": "    return { user, count };",
                "highlighted": false
              },
              {
                "line": 255,
                "content": "  }",
                "highlighted": false
              },
              {
                "line": 256,
                "content": "",
                "highlighted": false
              },
              {
                "line": 257,
                "content": "  return null;",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 33,
          "column": 23,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "No try-catch block found. MongooseError or MongoError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 29,
            "endLine": 37,
            "lines": [
              {
                "line": 29,
                "content": "// ❌ Query Operations WITHOUT Try-Catch",
                "highlighted": false
              },
              {
                "line": 30,
                "content": "",
                "highlighted": false
              },
              {
                "line": 31,
                "content": "async function findAllUsersMissing() {",
                "highlighted": false
              },
              {
                "line": 32,
                "content": "  // ❌ No error handling - will crash if connection fails",
                "highlighted": false
              },
              {
                "line": 33,
                "content": "  const users = await User.find();",
                "highlighted": true
              },
              {
                "line": 34,
                "content": "  return users;",
                "highlighted": false
              },
              {
                "line": 35,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 36,
                "content": "",
                "highlighted": false
              },
              {
                "line": 37,
                "content": "async function findOneUserMissing(email: string) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-cast-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 33,
          "column": 23,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "cast-error-no-try-catch",
          "description": "No try-catch block found. CastError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/schematypes.html#what-is-a-schematype",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Validate query parameters before passing to mongoose. Handle CastError separately from other errors.\n",
          "code_snippet": {
            "startLine": 29,
            "endLine": 37,
            "lines": [
              {
                "line": 29,
                "content": "// ❌ Query Operations WITHOUT Try-Catch",
                "highlighted": false
              },
              {
                "line": 30,
                "content": "",
                "highlighted": false
              },
              {
                "line": 31,
                "content": "async function findAllUsersMissing() {",
                "highlighted": false
              },
              {
                "line": 32,
                "content": "  // ❌ No error handling - will crash if connection fails",
                "highlighted": false
              },
              {
                "line": 33,
                "content": "  const users = await User.find();",
                "highlighted": true
              },
              {
                "line": 34,
                "content": "  return users;",
                "highlighted": false
              },
              {
                "line": 35,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 36,
                "content": "",
                "highlighted": false
              },
              {
                "line": 37,
                "content": "async function findOneUserMissing(email: string) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 39,
          "column": 22,
          "package": "mongoose",
          "function": "findOne",
          "contract_clause": "connection-error-no-try-catch",
          "description": "No try-catch block found. MongooseError or MongoError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch() to handle connection errors",
          "code_snippet": {
            "startLine": 35,
            "endLine": 43,
            "lines": [
              {
                "line": 35,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 36,
                "content": "",
                "highlighted": false
              },
              {
                "line": 37,
                "content": "async function findOneUserMissing(email: string) {",
                "highlighted": false
              },
              {
                "line": 38,
                "content": "  // ❌ No error handling - will crash on query error",
                "highlighted": false
              },
              {
                "line": 39,
                "content": "  const user = await User.findOne({ email });",
                "highlighted": true
              },
              {
                "line": 40,
                "content": "  return user;",
                "highlighted": false
              },
              {
                "line": 41,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 42,
                "content": "",
                "highlighted": false
              },
              {
                "line": 43,
                "content": "async function findUserByIdMissing(id: string) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-cast-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 39,
          "column": 22,
          "package": "mongoose",
          "function": "findOne",
          "contract_clause": "cast-error-no-try-catch",
          "description": "No try-catch block found. CastError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/schematypes.html",
          "suggested_fix": "Caller MUST wrap in try-catch to handle type casting errors",
          "code_snippet": {
            "startLine": 35,
            "endLine": 43,
            "lines": [
              {
                "line": 35,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 36,
                "content": "",
                "highlighted": false
              },
              {
                "line": 37,
                "content": "async function findOneUserMissing(email: string) {",
                "highlighted": false
              },
              {
                "line": 38,
                "content": "  // ❌ No error handling - will crash on query error",
                "highlighted": false
              },
              {
                "line": 39,
                "content": "  const user = await User.findOne({ email });",
                "highlighted": true
              },
              {
                "line": 40,
                "content": "  return user;",
                "highlighted": false
              },
              {
                "line": 41,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 42,
                "content": "",
                "highlighted": false
              },
              {
                "line": 43,
                "content": "async function findUserByIdMissing(id: string) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-cast-error-no-try-catch-invalid-id",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 45,
          "column": 22,
          "package": "mongoose",
          "function": "findById",
          "contract_clause": "cast-error-no-try-catch-invalid-id",
          "description": "No try-catch block found. CastError with kind: 'ObjectId' - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-findById",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Common when user input is passed directly as ID. Validate ID format before querying.\n",
          "code_snippet": {
            "startLine": 41,
            "endLine": 49,
            "lines": [
              {
                "line": 41,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 42,
                "content": "",
                "highlighted": false
              },
              {
                "line": 43,
                "content": "async function findUserByIdMissing(id: string) {",
                "highlighted": false
              },
              {
                "line": 44,
                "content": "  // ❌ No error handling - will crash on invalid ObjectId",
                "highlighted": false
              },
              {
                "line": 45,
                "content": "  const user = await User.findById(id);",
                "highlighted": true
              },
              {
                "line": 46,
                "content": "  return user;",
                "highlighted": false
              },
              {
                "line": 47,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 48,
                "content": "",
                "highlighted": false
              },
              {
                "line": 49,
                "content": "// ❌ Create Operations WITHOUT Try-Catch",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 45,
          "column": 22,
          "package": "mongoose",
          "function": "findById",
          "contract_clause": "connection-error-no-try-catch",
          "description": "No try-catch block found. MongooseError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST handle connection errors",
          "code_snippet": {
            "startLine": 41,
            "endLine": 49,
            "lines": [
              {
                "line": 41,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 42,
                "content": "",
                "highlighted": false
              },
              {
                "line": 43,
                "content": "async function findUserByIdMissing(id: string) {",
                "highlighted": false
              },
              {
                "line": 44,
                "content": "  // ❌ No error handling - will crash on invalid ObjectId",
                "highlighted": false
              },
              {
                "line": 45,
                "content": "  const user = await User.findById(id);",
                "highlighted": true
              },
              {
                "line": 46,
                "content": "  return user;",
                "highlighted": false
              },
              {
                "line": 47,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 48,
                "content": "",
                "highlighted": false
              },
              {
                "line": 49,
                "content": "// ❌ Create Operations WITHOUT Try-Catch",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-validation-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 53,
          "column": 22,
          "package": "mongoose",
          "function": "create",
          "contract_clause": "validation-error-no-try-catch",
          "description": "No try-catch block found. ValidationError with errors object containing field-specific ValidatorErrors - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/validation.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Check error.name === 'ValidationError' and inspect error.errors object. Each field error is accessible via error.errors[fieldName].\n",
          "code_snippet": {
            "startLine": 49,
            "endLine": 57,
            "lines": [
              {
                "line": 49,
                "content": "// ❌ Create Operations WITHOUT Try-Catch",
                "highlighted": false
              },
              {
                "line": 50,
                "content": "",
                "highlighted": false
              },
              {
                "line": 51,
                "content": "async function createUserMissing(data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 52,
                "content": "  // ❌ No error handling - will crash on validation error or duplicate key",
                "highlighted": false
              },
              {
                "line": 53,
                "content": "  const user = await User.create(data);",
                "highlighted": true
              },
              {
                "line": 54,
                "content": "  return user;",
                "highlighted": false
              },
              {
                "line": 55,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 56,
                "content": "",
                "highlighted": false
              },
              {
                "line": 57,
                "content": "async function createMultipleUsersMissing(users: Partial<IUser>[]) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-duplicate-key-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 53,
          "column": 22,
          "package": "mongoose",
          "function": "create",
          "contract_clause": "duplicate-key-error-no-try-catch",
          "description": "No try-catch block found. MongoError with code: 11000 - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/validation.html#unique-indexes",
          "suggested_fix": "Caller MUST wrap in try-catch and check error.code === 11000. This is NOT a ValidationError - it comes from MongoDB driver. Extract duplicate field from error message or error.keyPattern.\n",
          "code_snippet": {
            "startLine": 49,
            "endLine": 57,
            "lines": [
              {
                "line": 49,
                "content": "// ❌ Create Operations WITHOUT Try-Catch",
                "highlighted": false
              },
              {
                "line": 50,
                "content": "",
                "highlighted": false
              },
              {
                "line": 51,
                "content": "async function createUserMissing(data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 52,
                "content": "  // ❌ No error handling - will crash on validation error or duplicate key",
                "highlighted": false
              },
              {
                "line": 53,
                "content": "  const user = await User.create(data);",
                "highlighted": true
              },
              {
                "line": 54,
                "content": "  return user;",
                "highlighted": false
              },
              {
                "line": 55,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 56,
                "content": "",
                "highlighted": false
              },
              {
                "line": 57,
                "content": "async function createMultipleUsersMissing(users: Partial<IUser>[]) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 53,
          "column": 22,
          "package": "mongoose",
          "function": "create",
          "contract_clause": "connection-error-no-try-catch",
          "description": "No try-catch block found. MongooseError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST handle connection errors with retry logic",
          "code_snippet": {
            "startLine": 49,
            "endLine": 57,
            "lines": [
              {
                "line": 49,
                "content": "// ❌ Create Operations WITHOUT Try-Catch",
                "highlighted": false
              },
              {
                "line": 50,
                "content": "",
                "highlighted": false
              },
              {
                "line": 51,
                "content": "async function createUserMissing(data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 52,
                "content": "  // ❌ No error handling - will crash on validation error or duplicate key",
                "highlighted": false
              },
              {
                "line": 53,
                "content": "  const user = await User.create(data);",
                "highlighted": true
              },
              {
                "line": 54,
                "content": "  return user;",
                "highlighted": false
              },
              {
                "line": 55,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 56,
                "content": "",
                "highlighted": false
              },
              {
                "line": 57,
                "content": "async function createMultipleUsersMissing(users: Partial<IUser>[]) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-validation-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 59,
          "column": 24,
          "package": "mongoose",
          "function": "insertMany",
          "contract_clause": "validation-error-no-try-catch",
          "description": "No try-catch block found. ValidationError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-insertMany",
          "suggested_fix": "Caller MUST wrap in try-catch. Default behavior stops on first error; use ordered:false to continue on errors.",
          "code_snippet": {
            "startLine": 55,
            "endLine": 63,
            "lines": [
              {
                "line": 55,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 56,
                "content": "",
                "highlighted": false
              },
              {
                "line": 57,
                "content": "async function createMultipleUsersMissing(users: Partial<IUser>[]) {",
                "highlighted": false
              },
              {
                "line": 58,
                "content": "  // ❌ No error handling - will crash on bulk insert failure",
                "highlighted": false
              },
              {
                "line": 59,
                "content": "  const result = await User.insertMany(users);",
                "highlighted": true
              },
              {
                "line": 60,
                "content": "  return result;",
                "highlighted": false
              },
              {
                "line": 61,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 62,
                "content": "",
                "highlighted": false
              },
              {
                "line": 63,
                "content": "// ❌ Update Operations WITHOUT Try-Catch",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-duplicate-key-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 59,
          "column": 24,
          "package": "mongoose",
          "function": "insertMany",
          "contract_clause": "duplicate-key-error-no-try-catch",
          "description": "No try-catch block found. MongoError with code: 11000 - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-insertMany",
          "suggested_fix": "Caller MUST wrap in try-catch and handle duplicate key errors",
          "code_snippet": {
            "startLine": 55,
            "endLine": 63,
            "lines": [
              {
                "line": 55,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 56,
                "content": "",
                "highlighted": false
              },
              {
                "line": 57,
                "content": "async function createMultipleUsersMissing(users: Partial<IUser>[]) {",
                "highlighted": false
              },
              {
                "line": 58,
                "content": "  // ❌ No error handling - will crash on bulk insert failure",
                "highlighted": false
              },
              {
                "line": 59,
                "content": "  const result = await User.insertMany(users);",
                "highlighted": true
              },
              {
                "line": 60,
                "content": "  return result;",
                "highlighted": false
              },
              {
                "line": 61,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 62,
                "content": "",
                "highlighted": false
              },
              {
                "line": 63,
                "content": "// ❌ Update Operations WITHOUT Try-Catch",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-validation-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 67,
          "column": 24,
          "package": "mongoose",
          "function": "updateOne",
          "contract_clause": "validation-error-no-try-catch",
          "description": "No try-catch block found. ValidationError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/validation.html",
          "suggested_fix": "Caller MUST wrap in try-catch to handle validation errors",
          "code_snippet": {
            "startLine": 63,
            "endLine": 71,
            "lines": [
              {
                "line": 63,
                "content": "// ❌ Update Operations WITHOUT Try-Catch",
                "highlighted": false
              },
              {
                "line": 64,
                "content": "",
                "highlighted": false
              },
              {
                "line": 65,
                "content": "async function updateOneUserMissing(id: string, data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 66,
                "content": "  // ❌ No error handling - will crash on update failure",
                "highlighted": false
              },
              {
                "line": 67,
                "content": "  const result = await User.updateOne({ _id: id }, data);",
                "highlighted": true
              },
              {
                "line": 68,
                "content": "  return result;",
                "highlighted": false
              },
              {
                "line": 69,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 70,
                "content": "",
                "highlighted": false
              },
              {
                "line": 71,
                "content": "async function updateManyUsersMissing(filter: any, update: Partial<IUser>) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-cast-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 67,
          "column": 24,
          "package": "mongoose",
          "function": "updateOne",
          "contract_clause": "cast-error-no-try-catch",
          "description": "No try-catch block found. CastError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/schematypes.html",
          "suggested_fix": "Caller MUST wrap in try-catch to handle type errors",
          "code_snippet": {
            "startLine": 63,
            "endLine": 71,
            "lines": [
              {
                "line": 63,
                "content": "// ❌ Update Operations WITHOUT Try-Catch",
                "highlighted": false
              },
              {
                "line": 64,
                "content": "",
                "highlighted": false
              },
              {
                "line": 65,
                "content": "async function updateOneUserMissing(id: string, data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 66,
                "content": "  // ❌ No error handling - will crash on update failure",
                "highlighted": false
              },
              {
                "line": 67,
                "content": "  const result = await User.updateOne({ _id: id }, data);",
                "highlighted": true
              },
              {
                "line": 68,
                "content": "  return result;",
                "highlighted": false
              },
              {
                "line": 69,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 70,
                "content": "",
                "highlighted": false
              },
              {
                "line": 71,
                "content": "async function updateManyUsersMissing(filter: any, update: Partial<IUser>) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 67,
          "column": 24,
          "package": "mongoose",
          "function": "updateOne",
          "contract_clause": "connection-error-no-try-catch",
          "description": "No try-catch block found. MongooseError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST handle connection errors",
          "code_snippet": {
            "startLine": 63,
            "endLine": 71,
            "lines": [
              {
                "line": 63,
                "content": "// ❌ Update Operations WITHOUT Try-Catch",
                "highlighted": false
              },
              {
                "line": 64,
                "content": "",
                "highlighted": false
              },
              {
                "line": 65,
                "content": "async function updateOneUserMissing(id: string, data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 66,
                "content": "  // ❌ No error handling - will crash on update failure",
                "highlighted": false
              },
              {
                "line": 67,
                "content": "  const result = await User.updateOne({ _id: id }, data);",
                "highlighted": true
              },
              {
                "line": 68,
                "content": "  return result;",
                "highlighted": false
              },
              {
                "line": 69,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 70,
                "content": "",
                "highlighted": false
              },
              {
                "line": 71,
                "content": "async function updateManyUsersMissing(filter: any, update: Partial<IUser>) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-prototype-pollution-cve-2023-3696-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 79,
          "column": 22,
          "package": "mongoose",
          "function": "findByIdAndUpdate",
          "contract_clause": "prototype-pollution-cve-2023-3696-no-try-catch",
          "description": "No try-catch block found. May not throw - vulnerability allows arbitrary code execution - this will crash the application.",
          "source_doc": "https://security.snyk.io/vuln/SNYK-JS-MONGOOSE-5777721",
          "suggested_fix": "Caller MUST wrap in try-catch. CRITICAL: Ensure mongoose version >= 5.13.20, 6.4.6, or 7.3.1 to patch CVE-2023-3696. Validate and sanitize all update payloads from user input.\n",
          "code_snippet": {
            "startLine": 75,
            "endLine": 83,
            "lines": [
              {
                "line": 75,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 76,
                "content": "",
                "highlighted": false
              },
              {
                "line": 77,
                "content": "async function findAndUpdateUserMissing(id: string, data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 78,
                "content": "  // ❌ No error handling - vulnerable to CVE-2023-3696",
                "highlighted": false
              },
              {
                "line": 79,
                "content": "  const user = await User.findByIdAndUpdate(id, data, { new: true });",
                "highlighted": true
              },
              {
                "line": 80,
                "content": "  return user;",
                "highlighted": false
              },
              {
                "line": 81,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 82,
                "content": "",
                "highlighted": false
              },
              {
                "line": 83,
                "content": "async function findOneAndUpdateUserMissing(email: string, data: Partial<IUser>) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-validation-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 79,
          "column": 22,
          "package": "mongoose",
          "function": "findByIdAndUpdate",
          "contract_clause": "validation-error-no-try-catch",
          "description": "No try-catch block found. ValidationError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/validation.html",
          "suggested_fix": "Caller MUST wrap in try-catch",
          "code_snippet": {
            "startLine": 75,
            "endLine": 83,
            "lines": [
              {
                "line": 75,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 76,
                "content": "",
                "highlighted": false
              },
              {
                "line": 77,
                "content": "async function findAndUpdateUserMissing(id: string, data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 78,
                "content": "  // ❌ No error handling - vulnerable to CVE-2023-3696",
                "highlighted": false
              },
              {
                "line": 79,
                "content": "  const user = await User.findByIdAndUpdate(id, data, { new: true });",
                "highlighted": true
              },
              {
                "line": 80,
                "content": "  return user;",
                "highlighted": false
              },
              {
                "line": 81,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 82,
                "content": "",
                "highlighted": false
              },
              {
                "line": 83,
                "content": "async function findOneAndUpdateUserMissing(email: string, data: Partial<IUser>) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-cast-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 79,
          "column": 22,
          "package": "mongoose",
          "function": "findByIdAndUpdate",
          "contract_clause": "cast-error-no-try-catch",
          "description": "No try-catch block found. CastError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-findByIdAndUpdate",
          "suggested_fix": "Caller MUST wrap in try-catch",
          "code_snippet": {
            "startLine": 75,
            "endLine": 83,
            "lines": [
              {
                "line": 75,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 76,
                "content": "",
                "highlighted": false
              },
              {
                "line": 77,
                "content": "async function findAndUpdateUserMissing(id: string, data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 78,
                "content": "  // ❌ No error handling - vulnerable to CVE-2023-3696",
                "highlighted": false
              },
              {
                "line": 79,
                "content": "  const user = await User.findByIdAndUpdate(id, data, { new: true });",
                "highlighted": true
              },
              {
                "line": 80,
                "content": "  return user;",
                "highlighted": false
              },
              {
                "line": 81,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 82,
                "content": "",
                "highlighted": false
              },
              {
                "line": 83,
                "content": "async function findOneAndUpdateUserMissing(email: string, data: Partial<IUser>) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-prototype-pollution-cve-2023-3696-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 85,
          "column": 22,
          "package": "mongoose",
          "function": "findOneAndUpdate",
          "contract_clause": "prototype-pollution-cve-2023-3696-no-try-catch",
          "description": "No try-catch block found. May not throw - allows RCE - this will crash the application.",
          "source_doc": "https://security.snyk.io/vuln/SNYK-JS-MONGOOSE-5777721",
          "suggested_fix": "Caller MUST wrap in try-catch and validate input. Upgrade mongoose to patched version.",
          "code_snippet": {
            "startLine": 81,
            "endLine": 89,
            "lines": [
              {
                "line": 81,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 82,
                "content": "",
                "highlighted": false
              },
              {
                "line": 83,
                "content": "async function findOneAndUpdateUserMissing(email: string, data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 84,
                "content": "  // ❌ No error handling - vulnerable to CVE-2023-3696",
                "highlighted": false
              },
              {
                "line": 85,
                "content": "  const user = await User.findOneAndUpdate({ email }, data, { new: true });",
                "highlighted": true
              },
              {
                "line": 86,
                "content": "  return user;",
                "highlighted": false
              },
              {
                "line": 87,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 88,
                "content": "",
                "highlighted": false
              },
              {
                "line": 89,
                "content": "async function replaceOneUserMissing(id: string, data: Partial<IUser>) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-validation-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 85,
          "column": 22,
          "package": "mongoose",
          "function": "findOneAndUpdate",
          "contract_clause": "validation-error-no-try-catch",
          "description": "No try-catch block found. ValidationError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/validation.html",
          "suggested_fix": "Caller MUST wrap in try-catch",
          "code_snippet": {
            "startLine": 81,
            "endLine": 89,
            "lines": [
              {
                "line": 81,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 82,
                "content": "",
                "highlighted": false
              },
              {
                "line": 83,
                "content": "async function findOneAndUpdateUserMissing(email: string, data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 84,
                "content": "  // ❌ No error handling - vulnerable to CVE-2023-3696",
                "highlighted": false
              },
              {
                "line": 85,
                "content": "  const user = await User.findOneAndUpdate({ email }, data, { new: true });",
                "highlighted": true
              },
              {
                "line": 86,
                "content": "  return user;",
                "highlighted": false
              },
              {
                "line": 87,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 88,
                "content": "",
                "highlighted": false
              },
              {
                "line": 89,
                "content": "async function replaceOneUserMissing(id: string, data: Partial<IUser>) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 105,
          "column": 24,
          "package": "mongoose",
          "function": "deleteOne",
          "contract_clause": "connection-error-no-try-catch",
          "description": "No try-catch block found. MongooseError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch",
          "code_snippet": {
            "startLine": 101,
            "endLine": 109,
            "lines": [
              {
                "line": 101,
                "content": "// ❌ Delete Operations WITHOUT Try-Catch",
                "highlighted": false
              },
              {
                "line": 102,
                "content": "",
                "highlighted": false
              },
              {
                "line": 103,
                "content": "async function deleteOneUserMissing(id: string) {",
                "highlighted": false
              },
              {
                "line": 104,
                "content": "  // ❌ No error handling",
                "highlighted": false
              },
              {
                "line": 105,
                "content": "  const result = await User.deleteOne({ _id: id });",
                "highlighted": true
              },
              {
                "line": 106,
                "content": "  return result;",
                "highlighted": false
              },
              {
                "line": 107,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 108,
                "content": "",
                "highlighted": false
              },
              {
                "line": 109,
                "content": "async function deleteManyUsersMissing(filter: any) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-cast-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 117,
          "column": 22,
          "package": "mongoose",
          "function": "findByIdAndDelete",
          "contract_clause": "cast-error-no-try-catch",
          "description": "No try-catch block found. CastError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-findByIdAndDelete",
          "suggested_fix": "Caller MUST wrap in try-catch",
          "code_snippet": {
            "startLine": 113,
            "endLine": 121,
            "lines": [
              {
                "line": 113,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 114,
                "content": "",
                "highlighted": false
              },
              {
                "line": 115,
                "content": "async function findAndDeleteUserMissing(id: string) {",
                "highlighted": false
              },
              {
                "line": 116,
                "content": "  // ❌ No error handling",
                "highlighted": false
              },
              {
                "line": 117,
                "content": "  const user = await User.findByIdAndDelete(id);",
                "highlighted": true
              },
              {
                "line": 118,
                "content": "  return user;",
                "highlighted": false
              },
              {
                "line": 119,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 120,
                "content": "",
                "highlighted": false
              },
              {
                "line": 121,
                "content": "async function findOneAndDeleteUserMissing(email: string) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 117,
          "column": 22,
          "package": "mongoose",
          "function": "findByIdAndDelete",
          "contract_clause": "connection-error-no-try-catch",
          "description": "No try-catch block found. MongooseError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch",
          "code_snippet": {
            "startLine": 113,
            "endLine": 121,
            "lines": [
              {
                "line": 113,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 114,
                "content": "",
                "highlighted": false
              },
              {
                "line": 115,
                "content": "async function findAndDeleteUserMissing(id: string) {",
                "highlighted": false
              },
              {
                "line": 116,
                "content": "  // ❌ No error handling",
                "highlighted": false
              },
              {
                "line": 117,
                "content": "  const user = await User.findByIdAndDelete(id);",
                "highlighted": true
              },
              {
                "line": 118,
                "content": "  return user;",
                "highlighted": false
              },
              {
                "line": 119,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 120,
                "content": "",
                "highlighted": false
              },
              {
                "line": 121,
                "content": "async function findOneAndDeleteUserMissing(email: string) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-query-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 134,
          "column": 23,
          "package": "mongoose",
          "function": "exec",
          "contract_clause": "query-error-no-try-catch",
          "description": "No try-catch block found. MongooseError, CastError, or ValidationError depending on failure type - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/api/query.html#query_Query-exec",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). .exec() is the terminal operation for query chains. All query errors surface here.\n",
          "code_snippet": {
            "startLine": 130,
            "endLine": 138,
            "lines": [
              {
                "line": 130,
                "content": "// ❌ Query Methods WITHOUT Try-Catch",
                "highlighted": false
              },
              {
                "line": 131,
                "content": "",
                "highlighted": false
              },
              {
                "line": 132,
                "content": "async function executeQueryMissing() {",
                "highlighted": false
              },
              {
                "line": 133,
                "content": "  // ❌ No error handling on .exec()",
                "highlighted": false
              },
              {
                "line": 134,
                "content": "  const users = await User.find({ active: true }).limit(10).exec();",
                "highlighted": true
              },
              {
                "line": 135,
                "content": "  return users;",
                "highlighted": false
              },
              {
                "line": 136,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 137,
                "content": "",
                "highlighted": false
              },
              {
                "line": 138,
                "content": "async function executeWithOrFailMissing(id: string) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 134,
          "column": 23,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "connection-error-no-try-catch",
          "description": "No try-catch block found. MongooseError or MongoError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Handle connection errors separately from query results. Implement retry logic for transient connection issues.\n",
          "code_snippet": {
            "startLine": 130,
            "endLine": 138,
            "lines": [
              {
                "line": 130,
                "content": "// ❌ Query Methods WITHOUT Try-Catch",
                "highlighted": false
              },
              {
                "line": 131,
                "content": "",
                "highlighted": false
              },
              {
                "line": 132,
                "content": "async function executeQueryMissing() {",
                "highlighted": false
              },
              {
                "line": 133,
                "content": "  // ❌ No error handling on .exec()",
                "highlighted": false
              },
              {
                "line": 134,
                "content": "  const users = await User.find({ active: true }).limit(10).exec();",
                "highlighted": true
              },
              {
                "line": 135,
                "content": "  return users;",
                "highlighted": false
              },
              {
                "line": 136,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 137,
                "content": "",
                "highlighted": false
              },
              {
                "line": 138,
                "content": "async function executeWithOrFailMissing(id: string) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-cast-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 134,
          "column": 23,
          "package": "mongoose",
          "function": "find",
          "contract_clause": "cast-error-no-try-catch",
          "description": "No try-catch block found. CastError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/schematypes.html#what-is-a-schematype",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Validate query parameters before passing to mongoose. Handle CastError separately from other errors.\n",
          "code_snippet": {
            "startLine": 130,
            "endLine": 138,
            "lines": [
              {
                "line": 130,
                "content": "// ❌ Query Methods WITHOUT Try-Catch",
                "highlighted": false
              },
              {
                "line": 131,
                "content": "",
                "highlighted": false
              },
              {
                "line": 132,
                "content": "async function executeQueryMissing() {",
                "highlighted": false
              },
              {
                "line": 133,
                "content": "  // ❌ No error handling on .exec()",
                "highlighted": false
              },
              {
                "line": 134,
                "content": "  const users = await User.find({ active: true }).limit(10).exec();",
                "highlighted": true
              },
              {
                "line": 135,
                "content": "  return users;",
                "highlighted": false
              },
              {
                "line": 136,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 137,
                "content": "",
                "highlighted": false
              },
              {
                "line": 138,
                "content": "async function executeWithOrFailMissing(id: string) {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-document-not-found-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 140,
          "column": 22,
          "package": "mongoose",
          "function": "orFail",
          "contract_clause": "document-not-found-no-try-catch",
          "description": "No try-catch block found. DocumentNotFoundError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/api/query.html#query_Query-orFail",
          "suggested_fix": "Caller MUST wrap in try-catch. .orFail() is explicitly designed to throw when no results found. Use this when document existence is mandatory.\n",
          "code_snippet": {
            "startLine": 136,
            "endLine": 144,
            "lines": [
              {
                "line": 136,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 137,
                "content": "",
                "highlighted": false
              },
              {
                "line": 138,
                "content": "async function executeWithOrFailMissing(id: string) {",
                "highlighted": false
              },
              {
                "line": 139,
                "content": "  // ❌ No error handling - orFail() will throw but not caught",
                "highlighted": false
              },
              {
                "line": 140,
                "content": "  const user = await User.findById(id).orFail();",
                "highlighted": true
              },
              {
                "line": 141,
                "content": "  return user;",
                "highlighted": false
              },
              {
                "line": 142,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 143,
                "content": "",
                "highlighted": false
              },
              {
                "line": 144,
                "content": "// ❌ Aggregation Operations WITHOUT Try-Catch",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-cast-error-no-try-catch-invalid-id",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 140,
          "column": 22,
          "package": "mongoose",
          "function": "findById",
          "contract_clause": "cast-error-no-try-catch-invalid-id",
          "description": "No try-catch block found. CastError with kind: 'ObjectId' - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-findById",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Common when user input is passed directly as ID. Validate ID format before querying.\n",
          "code_snippet": {
            "startLine": 136,
            "endLine": 144,
            "lines": [
              {
                "line": 136,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 137,
                "content": "",
                "highlighted": false
              },
              {
                "line": 138,
                "content": "async function executeWithOrFailMissing(id: string) {",
                "highlighted": false
              },
              {
                "line": 139,
                "content": "  // ❌ No error handling - orFail() will throw but not caught",
                "highlighted": false
              },
              {
                "line": 140,
                "content": "  const user = await User.findById(id).orFail();",
                "highlighted": true
              },
              {
                "line": 141,
                "content": "  return user;",
                "highlighted": false
              },
              {
                "line": 142,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 143,
                "content": "",
                "highlighted": false
              },
              {
                "line": 144,
                "content": "// ❌ Aggregation Operations WITHOUT Try-Catch",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 140,
          "column": 22,
          "package": "mongoose",
          "function": "findById",
          "contract_clause": "connection-error-no-try-catch",
          "description": "No try-catch block found. MongooseError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST handle connection errors",
          "code_snippet": {
            "startLine": 136,
            "endLine": 144,
            "lines": [
              {
                "line": 136,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 137,
                "content": "",
                "highlighted": false
              },
              {
                "line": 138,
                "content": "async function executeWithOrFailMissing(id: string) {",
                "highlighted": false
              },
              {
                "line": 139,
                "content": "  // ❌ No error handling - orFail() will throw but not caught",
                "highlighted": false
              },
              {
                "line": 140,
                "content": "  const user = await User.findById(id).orFail();",
                "highlighted": true
              },
              {
                "line": 141,
                "content": "  return user;",
                "highlighted": false
              },
              {
                "line": 142,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 143,
                "content": "",
                "highlighted": false
              },
              {
                "line": 144,
                "content": "// ❌ Aggregation Operations WITHOUT Try-Catch",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-aggregation-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 148,
          "column": 24,
          "package": "mongoose",
          "function": "aggregate",
          "contract_clause": "aggregation-error-no-try-catch",
          "description": "No try-catch block found. MongooseError or MongoError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-aggregate",
          "suggested_fix": "Caller MUST wrap in try-catch. Aggregation pipelines can fail with complex stage errors.",
          "code_snippet": {
            "startLine": 144,
            "endLine": 152,
            "lines": [
              {
                "line": 144,
                "content": "// ❌ Aggregation Operations WITHOUT Try-Catch",
                "highlighted": false
              },
              {
                "line": 145,
                "content": "",
                "highlighted": false
              },
              {
                "line": 146,
                "content": "async function aggregateUsersMissing() {",
                "highlighted": false
              },
              {
                "line": 147,
                "content": "  // ❌ No error handling",
                "highlighted": false
              },
              {
                "line": 148,
                "content": "  const result = await User.aggregate([",
                "highlighted": true
              },
              {
                "line": 149,
                "content": "    { $match: { active: true } },",
                "highlighted": false
              },
              {
                "line": 150,
                "content": "    { $group: { _id: '$age', count: { $sum: 1 } } }",
                "highlighted": false
              },
              {
                "line": 151,
                "content": "  ]);",
                "highlighted": false
              },
              {
                "line": 152,
                "content": "  return result;",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 157,
          "column": 23,
          "package": "mongoose",
          "function": "countDocuments",
          "contract_clause": "connection-error-no-try-catch",
          "description": "No try-catch block found. MongooseError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-countDocuments",
          "suggested_fix": "Caller MUST wrap in try-catch",
          "code_snippet": {
            "startLine": 153,
            "endLine": 161,
            "lines": [
              {
                "line": 153,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 154,
                "content": "",
                "highlighted": false
              },
              {
                "line": 155,
                "content": "async function countUsersMissing() {",
                "highlighted": false
              },
              {
                "line": 156,
                "content": "  // ❌ No error handling",
                "highlighted": false
              },
              {
                "line": 157,
                "content": "  const count = await User.countDocuments({ active: true });",
                "highlighted": true
              },
              {
                "line": 158,
                "content": "  return count;",
                "highlighted": false
              },
              {
                "line": 159,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 160,
                "content": "",
                "highlighted": false
              },
              {
                "line": 161,
                "content": "async function estimateCountMissing() {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-failed-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 171,
          "column": 9,
          "package": "mongoose",
          "function": "connect",
          "contract_clause": "connection-failed-no-try-catch",
          "description": "No try-catch block found. MongooseError or MongoError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch. Connection failures should stop application startup. Log error details and exit gracefully.\n",
          "code_snippet": {
            "startLine": 167,
            "endLine": 175,
            "lines": [
              {
                "line": 167,
                "content": "// ❌ Connection Operations WITHOUT Try-Catch",
                "highlighted": false
              },
              {
                "line": 168,
                "content": "",
                "highlighted": false
              },
              {
                "line": 169,
                "content": "async function connectToMongoDBMissing() {",
                "highlighted": false
              },
              {
                "line": 170,
                "content": "  // ❌ No error handling - will crash on connection failure",
                "highlighted": false
              },
              {
                "line": 171,
                "content": "  await mongoose.connect('mongodb://localhost:27017/test');",
                "highlighted": true
              },
              {
                "line": 172,
                "content": "  console.log('Connected to MongoDB');",
                "highlighted": false
              },
              {
                "line": 173,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 174,
                "content": "",
                "highlighted": false
              },
              {
                "line": 175,
                "content": "async function closeConnectionMissing() {",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-cast-error-no-try-catch-invalid-id",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 185,
          "column": 10,
          "package": "mongoose",
          "function": "findById",
          "contract_clause": "cast-error-no-try-catch-invalid-id",
          "description": "No try-catch block found. CastError with kind: 'ObjectId' - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-findById",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Common when user input is passed directly as ID. Validate ID format before querying.\n",
          "code_snippet": {
            "startLine": 181,
            "endLine": 189,
            "lines": [
              {
                "line": 181,
                "content": "// ❌ Promise WITHOUT .catch() Handler",
                "highlighted": false
              },
              {
                "line": 182,
                "content": "",
                "highlighted": false
              },
              {
                "line": 183,
                "content": "function findUserWithoutCatch(id: string) {",
                "highlighted": false
              },
              {
                "line": 184,
                "content": "  // ❌ No .catch() handler - unhandled promise rejection",
                "highlighted": false
              },
              {
                "line": 185,
                "content": "  return User.findById(id)",
                "highlighted": true
              },
              {
                "line": 186,
                "content": "    .then(user => {",
                "highlighted": false
              },
              {
                "line": 187,
                "content": "      console.log('User found:', user);",
                "highlighted": false
              },
              {
                "line": 188,
                "content": "      return user;",
                "highlighted": false
              },
              {
                "line": 189,
                "content": "    });",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 185,
          "column": 10,
          "package": "mongoose",
          "function": "findById",
          "contract_clause": "connection-error-no-try-catch",
          "description": "No try-catch block found. MongooseError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST handle connection errors",
          "code_snippet": {
            "startLine": 181,
            "endLine": 189,
            "lines": [
              {
                "line": 181,
                "content": "// ❌ Promise WITHOUT .catch() Handler",
                "highlighted": false
              },
              {
                "line": 182,
                "content": "",
                "highlighted": false
              },
              {
                "line": 183,
                "content": "function findUserWithoutCatch(id: string) {",
                "highlighted": false
              },
              {
                "line": 184,
                "content": "  // ❌ No .catch() handler - unhandled promise rejection",
                "highlighted": false
              },
              {
                "line": 185,
                "content": "  return User.findById(id)",
                "highlighted": true
              },
              {
                "line": 186,
                "content": "    .then(user => {",
                "highlighted": false
              },
              {
                "line": 187,
                "content": "      console.log('User found:', user);",
                "highlighted": false
              },
              {
                "line": 188,
                "content": "      return user;",
                "highlighted": false
              },
              {
                "line": 189,
                "content": "    });",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-validation-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 195,
          "column": 10,
          "package": "mongoose",
          "function": "create",
          "contract_clause": "validation-error-no-try-catch",
          "description": "No try-catch block found. ValidationError with errors object containing field-specific ValidatorErrors - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/validation.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Check error.name === 'ValidationError' and inspect error.errors object. Each field error is accessible via error.errors[fieldName].\n",
          "code_snippet": {
            "startLine": 191,
            "endLine": 199,
            "lines": [
              {
                "line": 191,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 192,
                "content": "",
                "highlighted": false
              },
              {
                "line": 193,
                "content": "function createUserWithoutCatch(data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 194,
                "content": "  // ❌ No .catch() handler - unhandled promise rejection",
                "highlighted": false
              },
              {
                "line": 195,
                "content": "  return User.create(data)",
                "highlighted": true
              },
              {
                "line": 196,
                "content": "    .then(user => {",
                "highlighted": false
              },
              {
                "line": 197,
                "content": "      console.log('User created:', user);",
                "highlighted": false
              },
              {
                "line": 198,
                "content": "      return user;",
                "highlighted": false
              },
              {
                "line": 199,
                "content": "    });",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-duplicate-key-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 195,
          "column": 10,
          "package": "mongoose",
          "function": "create",
          "contract_clause": "duplicate-key-error-no-try-catch",
          "description": "No try-catch block found. MongoError with code: 11000 - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/validation.html#unique-indexes",
          "suggested_fix": "Caller MUST wrap in try-catch and check error.code === 11000. This is NOT a ValidationError - it comes from MongoDB driver. Extract duplicate field from error message or error.keyPattern.\n",
          "code_snippet": {
            "startLine": 191,
            "endLine": 199,
            "lines": [
              {
                "line": 191,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 192,
                "content": "",
                "highlighted": false
              },
              {
                "line": 193,
                "content": "function createUserWithoutCatch(data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 194,
                "content": "  // ❌ No .catch() handler - unhandled promise rejection",
                "highlighted": false
              },
              {
                "line": 195,
                "content": "  return User.create(data)",
                "highlighted": true
              },
              {
                "line": 196,
                "content": "    .then(user => {",
                "highlighted": false
              },
              {
                "line": 197,
                "content": "      console.log('User created:', user);",
                "highlighted": false
              },
              {
                "line": 198,
                "content": "      return user;",
                "highlighted": false
              },
              {
                "line": 199,
                "content": "    });",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 195,
          "column": 10,
          "package": "mongoose",
          "function": "create",
          "contract_clause": "connection-error-no-try-catch",
          "description": "No try-catch block found. MongooseError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST handle connection errors with retry logic",
          "code_snippet": {
            "startLine": 191,
            "endLine": 199,
            "lines": [
              {
                "line": 191,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 192,
                "content": "",
                "highlighted": false
              },
              {
                "line": 193,
                "content": "function createUserWithoutCatch(data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 194,
                "content": "  // ❌ No .catch() handler - unhandled promise rejection",
                "highlighted": false
              },
              {
                "line": 195,
                "content": "  return User.create(data)",
                "highlighted": true
              },
              {
                "line": 196,
                "content": "    .then(user => {",
                "highlighted": false
              },
              {
                "line": 197,
                "content": "      console.log('User created:', user);",
                "highlighted": false
              },
              {
                "line": 198,
                "content": "      return user;",
                "highlighted": false
              },
              {
                "line": 199,
                "content": "    });",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-query-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 207,
          "column": 22,
          "package": "mongoose",
          "function": "exec",
          "contract_clause": "query-error-no-try-catch",
          "description": "No try-catch block found. MongooseError, CastError, or ValidationError depending on failure type - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/api/query.html#query_Query-exec",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). .exec() is the terminal operation for query chains. All query errors surface here.\n",
          "code_snippet": {
            "startLine": 203,
            "endLine": 211,
            "lines": [
              {
                "line": 203,
                "content": "// ❌ Chained Query WITHOUT Try-Catch",
                "highlighted": false
              },
              {
                "line": 204,
                "content": "",
                "highlighted": false
              },
              {
                "line": 205,
                "content": "async function chainedQueryMissing(email: string) {",
                "highlighted": false
              },
              {
                "line": 206,
                "content": "  // ❌ No error handling on chained query",
                "highlighted": false
              },
              {
                "line": 207,
                "content": "  const user = await User.findOne({ email })",
                "highlighted": true
              },
              {
                "line": 208,
                "content": "    .select('name email')",
                "highlighted": false
              },
              {
                "line": 209,
                "content": "    .limit(1)",
                "highlighted": false
              },
              {
                "line": 210,
                "content": "    .exec();",
                "highlighted": false
              },
              {
                "line": 211,
                "content": "  return user;",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 207,
          "column": 22,
          "package": "mongoose",
          "function": "findOne",
          "contract_clause": "connection-error-no-try-catch",
          "description": "No try-catch block found. MongooseError or MongoError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch() to handle connection errors",
          "code_snippet": {
            "startLine": 203,
            "endLine": 211,
            "lines": [
              {
                "line": 203,
                "content": "// ❌ Chained Query WITHOUT Try-Catch",
                "highlighted": false
              },
              {
                "line": 204,
                "content": "",
                "highlighted": false
              },
              {
                "line": 205,
                "content": "async function chainedQueryMissing(email: string) {",
                "highlighted": false
              },
              {
                "line": 206,
                "content": "  // ❌ No error handling on chained query",
                "highlighted": false
              },
              {
                "line": 207,
                "content": "  const user = await User.findOne({ email })",
                "highlighted": true
              },
              {
                "line": 208,
                "content": "    .select('name email')",
                "highlighted": false
              },
              {
                "line": 209,
                "content": "    .limit(1)",
                "highlighted": false
              },
              {
                "line": 210,
                "content": "    .exec();",
                "highlighted": false
              },
              {
                "line": 211,
                "content": "  return user;",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-cast-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 207,
          "column": 22,
          "package": "mongoose",
          "function": "findOne",
          "contract_clause": "cast-error-no-try-catch",
          "description": "No try-catch block found. CastError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/schematypes.html",
          "suggested_fix": "Caller MUST wrap in try-catch to handle type casting errors",
          "code_snippet": {
            "startLine": 203,
            "endLine": 211,
            "lines": [
              {
                "line": 203,
                "content": "// ❌ Chained Query WITHOUT Try-Catch",
                "highlighted": false
              },
              {
                "line": 204,
                "content": "",
                "highlighted": false
              },
              {
                "line": 205,
                "content": "async function chainedQueryMissing(email: string) {",
                "highlighted": false
              },
              {
                "line": 206,
                "content": "  // ❌ No error handling on chained query",
                "highlighted": false
              },
              {
                "line": 207,
                "content": "  const user = await User.findOne({ email })",
                "highlighted": true
              },
              {
                "line": 208,
                "content": "    .select('name email')",
                "highlighted": false
              },
              {
                "line": 209,
                "content": "    .limit(1)",
                "highlighted": false
              },
              {
                "line": 210,
                "content": "    .exec();",
                "highlighted": false
              },
              {
                "line": 211,
                "content": "  return user;",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 238,
          "column": 22,
          "package": "mongoose",
          "function": "findOne",
          "contract_clause": "connection-error-no-try-catch",
          "description": "No try-catch block found. MongooseError or MongoError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch() to handle connection errors",
          "code_snippet": {
            "startLine": 234,
            "endLine": 242,
            "lines": [
              {
                "line": 234,
                "content": "// ❌ Multiple Operations in Sequence WITHOUT Try-Catch",
                "highlighted": false
              },
              {
                "line": 235,
                "content": "",
                "highlighted": false
              },
              {
                "line": 236,
                "content": "async function multipleOperationsMissing(email: string, data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 237,
                "content": "  // ❌ No error handling for either operation",
                "highlighted": false
              },
              {
                "line": 238,
                "content": "  const user = await User.findOne({ email });",
                "highlighted": true
              },
              {
                "line": 239,
                "content": "  if (user) {",
                "highlighted": false
              },
              {
                "line": 240,
                "content": "    await User.updateOne({ _id: user._id }, data);",
                "highlighted": false
              },
              {
                "line": 241,
                "content": "  }",
                "highlighted": false
              },
              {
                "line": 242,
                "content": "  return user;",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-cast-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 238,
          "column": 22,
          "package": "mongoose",
          "function": "findOne",
          "contract_clause": "cast-error-no-try-catch",
          "description": "No try-catch block found. CastError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/schematypes.html",
          "suggested_fix": "Caller MUST wrap in try-catch to handle type casting errors",
          "code_snippet": {
            "startLine": 234,
            "endLine": 242,
            "lines": [
              {
                "line": 234,
                "content": "// ❌ Multiple Operations in Sequence WITHOUT Try-Catch",
                "highlighted": false
              },
              {
                "line": 235,
                "content": "",
                "highlighted": false
              },
              {
                "line": 236,
                "content": "async function multipleOperationsMissing(email: string, data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 237,
                "content": "  // ❌ No error handling for either operation",
                "highlighted": false
              },
              {
                "line": 238,
                "content": "  const user = await User.findOne({ email });",
                "highlighted": true
              },
              {
                "line": 239,
                "content": "  if (user) {",
                "highlighted": false
              },
              {
                "line": 240,
                "content": "    await User.updateOne({ _id: user._id }, data);",
                "highlighted": false
              },
              {
                "line": 241,
                "content": "  }",
                "highlighted": false
              },
              {
                "line": 242,
                "content": "  return user;",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-validation-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 240,
          "column": 11,
          "package": "mongoose",
          "function": "updateOne",
          "contract_clause": "validation-error-no-try-catch",
          "description": "No try-catch block found. ValidationError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/validation.html",
          "suggested_fix": "Caller MUST wrap in try-catch to handle validation errors",
          "code_snippet": {
            "startLine": 236,
            "endLine": 244,
            "lines": [
              {
                "line": 236,
                "content": "async function multipleOperationsMissing(email: string, data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 237,
                "content": "  // ❌ No error handling for either operation",
                "highlighted": false
              },
              {
                "line": 238,
                "content": "  const user = await User.findOne({ email });",
                "highlighted": false
              },
              {
                "line": 239,
                "content": "  if (user) {",
                "highlighted": false
              },
              {
                "line": 240,
                "content": "    await User.updateOne({ _id: user._id }, data);",
                "highlighted": true
              },
              {
                "line": 241,
                "content": "  }",
                "highlighted": false
              },
              {
                "line": 242,
                "content": "  return user;",
                "highlighted": false
              },
              {
                "line": 243,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 244,
                "content": "",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-cast-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 240,
          "column": 11,
          "package": "mongoose",
          "function": "updateOne",
          "contract_clause": "cast-error-no-try-catch",
          "description": "No try-catch block found. CastError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/schematypes.html",
          "suggested_fix": "Caller MUST wrap in try-catch to handle type errors",
          "code_snippet": {
            "startLine": 236,
            "endLine": 244,
            "lines": [
              {
                "line": 236,
                "content": "async function multipleOperationsMissing(email: string, data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 237,
                "content": "  // ❌ No error handling for either operation",
                "highlighted": false
              },
              {
                "line": 238,
                "content": "  const user = await User.findOne({ email });",
                "highlighted": false
              },
              {
                "line": 239,
                "content": "  if (user) {",
                "highlighted": false
              },
              {
                "line": 240,
                "content": "    await User.updateOne({ _id: user._id }, data);",
                "highlighted": true
              },
              {
                "line": 241,
                "content": "  }",
                "highlighted": false
              },
              {
                "line": 242,
                "content": "  return user;",
                "highlighted": false
              },
              {
                "line": 243,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 244,
                "content": "",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 240,
          "column": 11,
          "package": "mongoose",
          "function": "updateOne",
          "contract_clause": "connection-error-no-try-catch",
          "description": "No try-catch block found. MongooseError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST handle connection errors",
          "code_snippet": {
            "startLine": 236,
            "endLine": 244,
            "lines": [
              {
                "line": 236,
                "content": "async function multipleOperationsMissing(email: string, data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 237,
                "content": "  // ❌ No error handling for either operation",
                "highlighted": false
              },
              {
                "line": 238,
                "content": "  const user = await User.findOne({ email });",
                "highlighted": false
              },
              {
                "line": 239,
                "content": "  if (user) {",
                "highlighted": false
              },
              {
                "line": 240,
                "content": "    await User.updateOne({ _id: user._id }, data);",
                "highlighted": true
              },
              {
                "line": 241,
                "content": "  }",
                "highlighted": false
              },
              {
                "line": 242,
                "content": "  return user;",
                "highlighted": false
              },
              {
                "line": 243,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 244,
                "content": "",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-cast-error-no-try-catch-invalid-id",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 249,
          "column": 22,
          "package": "mongoose",
          "function": "findById",
          "contract_clause": "cast-error-no-try-catch-invalid-id",
          "description": "No try-catch block found. CastError with kind: 'ObjectId' - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-findById",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Common when user input is passed directly as ID. Validate ID format before querying.\n",
          "code_snippet": {
            "startLine": 245,
            "endLine": 253,
            "lines": [
              {
                "line": 245,
                "content": "// ❌ Nested Operations WITHOUT Try-Catch",
                "highlighted": false
              },
              {
                "line": 246,
                "content": "",
                "highlighted": false
              },
              {
                "line": 247,
                "content": "async function nestedOperationsMissing(userId: string) {",
                "highlighted": false
              },
              {
                "line": 248,
                "content": "  // ❌ No error handling",
                "highlighted": false
              },
              {
                "line": 249,
                "content": "  const user = await User.findById(userId);",
                "highlighted": true
              },
              {
                "line": 250,
                "content": "",
                "highlighted": false
              },
              {
                "line": 251,
                "content": "  if (user) {",
                "highlighted": false
              },
              {
                "line": 252,
                "content": "    // ❌ No error handling on nested operation",
                "highlighted": false
              },
              {
                "line": 253,
                "content": "    const count = await User.countDocuments({ age: user.age });",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 249,
          "column": 22,
          "package": "mongoose",
          "function": "findById",
          "contract_clause": "connection-error-no-try-catch",
          "description": "No try-catch block found. MongooseError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST handle connection errors",
          "code_snippet": {
            "startLine": 245,
            "endLine": 253,
            "lines": [
              {
                "line": 245,
                "content": "// ❌ Nested Operations WITHOUT Try-Catch",
                "highlighted": false
              },
              {
                "line": 246,
                "content": "",
                "highlighted": false
              },
              {
                "line": 247,
                "content": "async function nestedOperationsMissing(userId: string) {",
                "highlighted": false
              },
              {
                "line": 248,
                "content": "  // ❌ No error handling",
                "highlighted": false
              },
              {
                "line": 249,
                "content": "  const user = await User.findById(userId);",
                "highlighted": true
              },
              {
                "line": 250,
                "content": "",
                "highlighted": false
              },
              {
                "line": 251,
                "content": "  if (user) {",
                "highlighted": false
              },
              {
                "line": 252,
                "content": "    // ❌ No error handling on nested operation",
                "highlighted": false
              },
              {
                "line": 253,
                "content": "    const count = await User.countDocuments({ age: user.age });",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/missing-error-handling.ts",
          "line": 253,
          "column": 25,
          "package": "mongoose",
          "function": "countDocuments",
          "contract_clause": "connection-error-no-try-catch",
          "description": "No try-catch block found. MongooseError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-countDocuments",
          "suggested_fix": "Caller MUST wrap in try-catch",
          "code_snippet": {
            "startLine": 249,
            "endLine": 257,
            "lines": [
              {
                "line": 249,
                "content": "  const user = await User.findById(userId);",
                "highlighted": false
              },
              {
                "line": 250,
                "content": "",
                "highlighted": false
              },
              {
                "line": 251,
                "content": "  if (user) {",
                "highlighted": false
              },
              {
                "line": 252,
                "content": "    // ❌ No error handling on nested operation",
                "highlighted": false
              },
              {
                "line": 253,
                "content": "    const count = await User.countDocuments({ age: user.age });",
                "highlighted": true
              },
              {
                "line": 254,
                "content": "    return { user, count };",
                "highlighted": false
              },
              {
                "line": 255,
                "content": "  }",
                "highlighted": false
              },
              {
                "line": 256,
                "content": "",
                "highlighted": false
              },
              {
                "line": 257,
                "content": "  return null;",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-cast-error-no-try-catch-invalid-id",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/proper-error-handling.ts",
          "line": 257,
          "column": 10,
          "package": "mongoose",
          "function": "findById",
          "contract_clause": "cast-error-no-try-catch-invalid-id",
          "description": "No try-catch block found. CastError with kind: 'ObjectId' - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/api/model.html#model_Model-findById",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Common when user input is passed directly as ID. Validate ID format before querying.\n",
          "code_snippet": {
            "startLine": 253,
            "endLine": 261,
            "lines": [
              {
                "line": 253,
                "content": "",
                "highlighted": false
              },
              {
                "line": 254,
                "content": "// ✅ Promise .catch() Pattern (Alternative to Try-Catch)",
                "highlighted": false
              },
              {
                "line": 255,
                "content": "",
                "highlighted": false
              },
              {
                "line": 256,
                "content": "function findUserWithCatch(id: string) {",
                "highlighted": false
              },
              {
                "line": 257,
                "content": "  return User.findById(id)",
                "highlighted": true
              },
              {
                "line": 258,
                "content": "    .then(user => {",
                "highlighted": false
              },
              {
                "line": 259,
                "content": "      console.log('User found:', user);",
                "highlighted": false
              },
              {
                "line": 260,
                "content": "      return user;",
                "highlighted": false
              },
              {
                "line": 261,
                "content": "    })",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/proper-error-handling.ts",
          "line": 257,
          "column": 10,
          "package": "mongoose",
          "function": "findById",
          "contract_clause": "connection-error-no-try-catch",
          "description": "No try-catch block found. MongooseError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST handle connection errors",
          "code_snippet": {
            "startLine": 253,
            "endLine": 261,
            "lines": [
              {
                "line": 253,
                "content": "",
                "highlighted": false
              },
              {
                "line": 254,
                "content": "// ✅ Promise .catch() Pattern (Alternative to Try-Catch)",
                "highlighted": false
              },
              {
                "line": 255,
                "content": "",
                "highlighted": false
              },
              {
                "line": 256,
                "content": "function findUserWithCatch(id: string) {",
                "highlighted": false
              },
              {
                "line": 257,
                "content": "  return User.findById(id)",
                "highlighted": true
              },
              {
                "line": 258,
                "content": "    .then(user => {",
                "highlighted": false
              },
              {
                "line": 259,
                "content": "      console.log('User found:', user);",
                "highlighted": false
              },
              {
                "line": 260,
                "content": "      return user;",
                "highlighted": false
              },
              {
                "line": 261,
                "content": "    })",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-validation-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/proper-error-handling.ts",
          "line": 269,
          "column": 10,
          "package": "mongoose",
          "function": "create",
          "contract_clause": "validation-error-no-try-catch",
          "description": "No try-catch block found. ValidationError with errors object containing field-specific ValidatorErrors - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/validation.html",
          "suggested_fix": "Caller MUST wrap in try-catch or use .catch(). Check error.name === 'ValidationError' and inspect error.errors object. Each field error is accessible via error.errors[fieldName].\n",
          "code_snippet": {
            "startLine": 265,
            "endLine": 273,
            "lines": [
              {
                "line": 265,
                "content": "    });",
                "highlighted": false
              },
              {
                "line": 266,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 267,
                "content": "",
                "highlighted": false
              },
              {
                "line": 268,
                "content": "function createUserWithCatch(data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 269,
                "content": "  return User.create(data)",
                "highlighted": true
              },
              {
                "line": 270,
                "content": "    .then(user => {",
                "highlighted": false
              },
              {
                "line": 271,
                "content": "      console.log('User created:', user);",
                "highlighted": false
              },
              {
                "line": 272,
                "content": "      return user;",
                "highlighted": false
              },
              {
                "line": 273,
                "content": "    })",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-duplicate-key-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/proper-error-handling.ts",
          "line": 269,
          "column": 10,
          "package": "mongoose",
          "function": "create",
          "contract_clause": "duplicate-key-error-no-try-catch",
          "description": "No try-catch block found. MongoError with code: 11000 - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/validation.html#unique-indexes",
          "suggested_fix": "Caller MUST wrap in try-catch and check error.code === 11000. This is NOT a ValidationError - it comes from MongoDB driver. Extract duplicate field from error message or error.keyPattern.\n",
          "code_snippet": {
            "startLine": 265,
            "endLine": 273,
            "lines": [
              {
                "line": 265,
                "content": "    });",
                "highlighted": false
              },
              {
                "line": 266,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 267,
                "content": "",
                "highlighted": false
              },
              {
                "line": 268,
                "content": "function createUserWithCatch(data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 269,
                "content": "  return User.create(data)",
                "highlighted": true
              },
              {
                "line": 270,
                "content": "    .then(user => {",
                "highlighted": false
              },
              {
                "line": 271,
                "content": "      console.log('User created:', user);",
                "highlighted": false
              },
              {
                "line": 272,
                "content": "      return user;",
                "highlighted": false
              },
              {
                "line": 273,
                "content": "    })",
                "highlighted": false
              }
            ]
          }
        },
        {
          "id": "mongoose-connection-error-no-try-catch",
          "severity": "error",
          "file": "/Users/calebgates/WebstormProjects/behavioral-contracts/corpus/packages/mongoose/fixtures/proper-error-handling.ts",
          "line": 269,
          "column": 10,
          "package": "mongoose",
          "function": "create",
          "contract_clause": "connection-error-no-try-catch",
          "description": "No try-catch block found. MongooseError - this will crash the application.",
          "source_doc": "https://mongoosejs.com/docs/connections.html",
          "suggested_fix": "Caller MUST handle connection errors with retry logic",
          "code_snippet": {
            "startLine": 265,
            "endLine": 273,
            "lines": [
              {
                "line": 265,
                "content": "    });",
                "highlighted": false
              },
              {
                "line": 266,
                "content": "}",
                "highlighted": false
              },
              {
                "line": 267,
                "content": "",
                "highlighted": false
              },
              {
                "line": 268,
                "content": "function createUserWithCatch(data: Partial<IUser>) {",
                "highlighted": false
              },
              {
                "line": 269,
                "content": "  return User.create(data)",
                "highlighted": true
              },
              {
                "line": 270,
                "content": "    .then(user => {",
                "highlighted": false
              },
              {
                "line": 271,
                "content": "      console.log('User created:', user);",
                "highlighted": false
              },
              {
                "line": 272,
                "content": "      return user;",
                "highlighted": false
              },
              {
                "line": 273,
                "content": "    })",
                "highlighted": false
              }
            ]
          }
        }
      ]
    }
  }
}